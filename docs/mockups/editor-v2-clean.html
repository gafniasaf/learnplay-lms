<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Plan Generator - Clean UI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #0a0a0f;
            color: #e4e4e7;
            height: 100vh;
            overflow: hidden;
        }

        /* Main Layout: Chat Left, Preview Right */
        .app {
            display: grid;
            grid-template-columns: 400px 1fr;
            height: 100vh;
        }

        /* Chat Panel */
        .chat-panel {
            background: #18181b;
            border-right: 1px solid #27272a;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 1rem;
            border-bottom: 1px solid #27272a;
            position: relative;
        }

        .status-chips {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
        }

        .status-chip {
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            border: 1px solid transparent;
        }

        .status-chip.ok {
            background: rgba(34, 197, 94, 0.15);
            border-color: rgba(34, 197, 94, 0.3);
            color: #4ade80;
        }

        .status-chip.warn {
            background: rgba(250, 204, 21, 0.15);
            border-color: rgba(250, 204, 21, 0.3);
            color: #facc15;
        }

        .back-button {
            position: absolute;
            top: 1rem;
            left: 1rem;
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            color: #a1a1aa;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            transition: all 0.2s;
        }

        .back-button:hover {
            background: #27272a;
            color: #fdd35c;
        }

        .back-icon {
            width: 1.25rem;
            height: 1.25rem;
        }

        .plan-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            height: 4px;
            background: #27272a;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fdd35c, #f59e0b);
            width: 30%;
            transition: width 0.3s ease;
        }

        .progress-label {
            font-size: 0.75rem;
            color: #a1a1aa;
            margin-top: 0.25rem;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .avatar.ai {
            background: #fdd35c;
            color: #0a0a0f;
        }

        .avatar.user {
            background: #3b82f6;
            color: white;
        }

        .bubble {
            max-width: 75%;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            line-height: 1.5;
            font-size: 0.875rem;
        }

        .message.ai .bubble {
            background: #27272a;
        }

        .message.user .bubble {
            background: #3b82f6;
            color: white;
        }

        /* Long message handling */
        .bubble-content {
            position: relative;
        }

        .bubble-content.collapsed {
            max-height: 120px;
            overflow: hidden;
        }

        .bubble-content.collapsed::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: linear-gradient(transparent, #27272a);
            pointer-events: none;
        }

        .message.user .bubble-content.collapsed::after {
            background: linear-gradient(transparent, #3b82f6);
        }

        .show-more-btn {
            background: transparent;
            border: none;
            color: #fdd35c;
            font-size: 0.75rem;
            cursor: pointer;
            padding: 0.25rem 0;
            margin-top: 0.25rem;
            display: block;
        }

        .show-more-btn:hover {
            text-decoration: underline;
        }

        .chat-input {
            padding: 1rem;
            border-top: 1px solid #27272a;
            display: flex;
            gap: 0.5rem;
        }

        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            background: #27272a;
            border: 1px solid #3f3f46;
            border-radius: 0.5rem;
            color: #e4e4e7;
            font-size: 0.875rem;
        }

        .chat-input input:focus {
            outline: none;
            border-color: #fdd35c;
        }

        .chat-input button {
            padding: 0.75rem 1rem;
            background: #fdd35c;
            border: none;
            border-radius: 0.5rem;
            color: #0a0a0f;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .chat-input button:hover {
            background: #f59e0b;
        }

        .chat-input button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Preview Panel */
        .preview-panel {
            display: flex;
            flex-direction: column;
            background: #0a0a0f;
        }

        .preview-header {
            padding: 1rem;
            border-bottom: 1px solid #27272a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-title {
            font-size: 1rem;
            font-weight: 600;
            color: #a1a1aa;
        }

        .preview-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: 1px solid #27272a;
            border-radius: 0.375rem;
            background: transparent;
            color: #e4e4e7;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #27272a;
            border-color: #fdd35c;
        }

        .btn-primary {
            background: #fdd35c;
            border-color: #fdd35c;
            color: #0a0a0f;
            font-weight: 600;
        }

        .btn-primary:hover {
            background: #f59e0b;
            border-color: #f59e0b;
        }

        .preview-content {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #52525b;
        }

        .empty-icon {
            width: 4rem;
            height: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .app {
                grid-template-columns: 1fr;
                grid-template-rows: 50vh 50vh;
            }
        }

        /* Scrollbar */
        .messages::-webkit-scrollbar {
            width: 8px;
        }

        .messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages::-webkit-scrollbar-thumb {
            background: #27272a;
            border-radius: 4px;
        }

        .messages::-webkit-scrollbar-thumb:hover {
            background: #3f3f46;
        }

        .cta-toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            min-width: 280px;
            max-width: 360px;
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            background: rgba(24, 24, 27, 0.95);
            color: #f4f4f5;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
            transition: opacity 0.25s ease, transform 0.25s ease;
            font-size: 0.9rem;
            line-height: 1.4;
            border: 1px solid rgba(63, 63, 70, 0.8);
            display: flex;
            gap: 0.65rem;
            align-items: flex-start;
        }

        .cta-toast.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-top: 0.25rem;
            flex-shrink: 0;
        }

        .toast-dot.info {
            background: #38bdf8;
        }

        .toast-dot.success {
            background: #4ade80;
        }

        .toast-dot.blocked {
            background: #f87171;
        }

        .preview-panel.flash {
            animation: pulse-panel 0.8s ease;
        }

        @keyframes pulse-panel {
            0% { box-shadow: 0 0 0 rgba(253, 211, 92, 0); }
            50% { box-shadow: 0 0 25px rgba(253, 211, 92, 0.4); }
            100% { box-shadow: 0 0 0 rgba(253, 211, 92, 0); }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Chat Panel -->
        <div class="chat-panel">
            <div class="chat-header">
                <button class="back-button" data-cta-id="back-dashboard" data-action="navigate" data-target="/dashboard">
                    <svg class="back-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                </button>
                <h1 class="plan-title">ACTIE Klinisch Redeneren</h1>
                <div class="status-chips">
                    <span class="status-chip ok" data-health="mcp">● MCP · OK</span>
                    <span class="status-chip ok" data-health="edge">● Edge · OK</span>
                    <span class="status-chip ok" data-health="llm">● LLM · Ready</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p class="progress-label">AI Confidence: 30%</p>
            </div>

            <div class="messages">
                <div class="message ai">
                    <div class="avatar ai">AI</div>
                    <div class="bubble">
                        <div class="bubble-content collapsed" id="msg-1">
                            yo, this is insanely detailed already – love it.
                            
                            What I'd do next is turn this into a clean React/Tailwind structure and wire it to Supabase exactly as specced.

                            Here's the breakdown of what we'll build:
                            - Welcome screen with ENI branding
                            - ACTIE methodology intro section  
                            - Features grid with icons
                            - Progress tracking dashboard
                            - User authentication flow
                            - Settings page with preferences
                            - Export functionality for reports

                            I'll start with the Welcome page since that's the entry point. The design will follow your dark mode theme with the gold accent colors. Ready when you are!
                        </div>
                        <button class="show-more-btn" onclick="toggleMessage('msg-1', this)">Show more...</button>
                    </div>
                </div>

                <div class="message user">
                    <div class="avatar user">You</div>
                    <div class="bubble">
                        <div class="bubble-content">
                            Build the Welcome Page mockup
                        </div>
                    </div>
                </div>

                <div class="message ai">
                    <div class="avatar ai">AI</div>
                    <div class="bubble">
                        <div class="bubble-content">
                            On it! Generating the Welcome screen with ENI branding, ACTIE intro, and the features grid. Check the preview in a sec. ✨
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input">
                <input type="text" placeholder="Tell me what to build or change..." data-field="ai_request" />
                <button data-cta-id="send-message" data-action="enqueueJob">Send</button>
            </div>
        </div>

        <!-- Preview Panel -->
        <div class="preview-panel">
            <div class="preview-header">
                <h2 class="preview-title">Live Preview</h2>
                <div class="preview-actions">
                    <button class="btn" data-cta-id="refresh-preview" data-action="ui">Refresh</button>
                    <button class="btn" data-cta-id="copy-code" data-action="ui">Copy Code</button>
                    <button class="btn btn-primary" data-cta-id="export-plan" data-action="save">Export</button>
                </div>
            </div>

            <div class="preview-content">
                <!-- When mockup exists, show iframe -->
                <!-- <iframe class="preview-iframe" srcdoc="..."></iframe> -->
                
                <!-- Empty state -->
                <div class="empty-state">
                    <svg class="empty-icon" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <p>No mockup yet. Describe your app to generate one!</p>
                </div>
            </div>
        </div>
    </div>

    <div class="cta-toast" data-toast>
        <span class="toast-dot info" data-toast-dot></span>
        <div>
            <strong data-toast-title>Action queued</strong>
            <p data-toast-body>Assistant will keep you posted.</p>
        </div>
    </div>

    <script>
        function toggleMessage(id, btn) {
            const content = document.getElementById(id);
            if (content.classList.contains('collapsed')) {
                content.classList.remove('collapsed');
                btn.textContent = 'Show less';
            } else {
                content.classList.add('collapsed');
                btn.textContent = 'Show more...';
            }
        }

        const toast = document.querySelector("[data-toast]");
        const toastDot = document.querySelector("[data-toast-dot]");
        const toastTitle = document.querySelector("[data-toast-title]");
        const toastBody = document.querySelector("[data-toast-body]");
        const previewPanel = document.querySelector(".preview-panel");
        let toastTimer;

        function showToast({ title, body, variant = "info" }) {
            clearTimeout(toastTimer);
            toastDot.className = `toast-dot ${variant}`;
            toastTitle.textContent = title;
            toastBody.textContent = body;
            toast.classList.add("visible");
            toastTimer = setTimeout(() => toast.classList.remove("visible"), 2600);
        }

        function flashPreview() {
            if (!previewPanel) return;
            previewPanel.classList.remove("flash");
            void previewPanel.offsetWidth; // force reflow
            previewPanel.classList.add("flash");
        }

        document.querySelectorAll("[data-cta-id]").forEach((cta) => {
            cta.addEventListener("click", () => {
                const action = cta.dataset.action;
                const target = cta.dataset.target || "";

                switch (action) {
                    case "navigate":
                        showToast({
                            title: "Navigation queued",
                            body: target
                                ? `Assistant will move you to ${target} as soon as the build is live.`
                                : "Assistant will route you once the build reaches this screen.",
                            variant: "info",
                        });
                        break;
                    case "enqueueJob":
                        showToast({
                            title: "Job enqueued",
                            body: "Claude is sketching the next HTML pass for you.",
                            variant: "success",
                        });
                        break;
                    case "save":
                        showToast({
                            title: "BLOCKED: Export paused",
                            body: "Finish CTA + guard checks before exporting Golden Plan artifacts.",
                            variant: "blocked",
                        });
                        break;
                    case "ui":
                        flashPreview();
                        showToast({
                            title: "Preview refreshed",
                            body: "Static mock updated locally. Backend sync not required.",
                            variant: "info",
                        });
                        break;
                    default:
                        showToast({
                            title: "Action noted",
                            body: "Assistant logged your click for the next AI pass.",
                        });
                }
            });
        });
    </script>
</body>
</html>
