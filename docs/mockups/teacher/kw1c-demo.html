<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpertCollege - Docent Portal | KW1C Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /**
     * KW1C Demo - ExpertCollege Teacher Portal
     * Light theme aligned with Book Monitor dashboard
     */

    :root {
      /* Light theme - Book Monitor aligned */
      --bg-primary: #f8fafc;
      --bg-secondary: #ffffff;
      --bg-card: #ffffff;
      --bg-card-hover: #f1f5f9;
      --bg-input: #f1f5f9;
      --border: #e2e8f0;
      --border-strong: #cbd5e1;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-muted: #94a3b8;
      
      /* Accent colors */
      --accent-cyan: #0891b2;
      --accent-purple: #7c3aed;
      --accent-pink: #db2777;
      --accent-orange: #ea580c;
      
      /* ExpertCollege brand colors (kept for branding) */
      --ec-orange: #f97316;
      --ec-orange-light: #fb923c;
      --ec-orange-dark: #ea580c;
      --ec-blue: #0ea5e9;
      --ec-green: #22c55e;
      --ec-purple: #8b5cf6;
      
      /* KD status colors */
      --kd-covered: #059669;
      --kd-partial: #d97706;
      --kd-gap: #dc2626;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(15, 23, 42, 0.08), 0 2px 4px -2px rgba(15, 23, 42, 0.05);
      --shadow-lg: 0 10px 15px -3px rgba(15, 23, 42, 0.08), 0 4px 6px -4px rgba(15, 23, 42, 0.04);
      --glow-cyan: rgba(8, 145, 178, 0.15);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      background-image:
        radial-gradient(ellipse at 20% 0%, rgba(8, 145, 178, 0.04) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 100%, rgba(124, 58, 237, 0.04) 0%, transparent 50%);
    }

    /* ===== HEADER ===== */
    .kw1c-header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
      padding: 0.75rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .kw1c-header-left {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .kw1c-logo {
      font-size: 1.25rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .kw1c-school-badge {
      background: var(--bg-input);
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      font-size: 0.75rem;
      color: var(--text-secondary);
      border: 1px solid var(--border);
    }

    .kw1c-user-menu {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .kw1c-user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.875rem;
    }

    /* ===== TAB NAVIGATION ===== */
    .kw1c-tabs {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      display: flex;
      padding: 0 1rem;
      overflow-x: auto;
    }

    .kw1c-tab {
      padding: 0.875rem 1.25rem;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-secondary);
      background: none;
      border: none;
      cursor: pointer;
      position: relative;
      white-space: nowrap;
      transition: color 0.2s;
    }

    .kw1c-tab:hover {
      color: var(--text-primary);
    }

    .kw1c-tab.active {
      color: var(--accent-cyan);
    }

    .kw1c-tab.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
    }

    /* ===== PANELS ===== */
    .kw1c-panel {
      display: none;
      padding: 1.5rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .kw1c-panel.active {
      display: block;
    }

    /* ===== CARDS ===== */
    .kw1c-card {
      background: var(--bg-secondary);
      border-radius: 12px;
      border: 1px solid var(--border);
      padding: 1.25rem;
      margin-bottom: 1rem;
      box-shadow: var(--shadow-sm);
      transition: box-shadow 0.2s ease, border-color 0.2s ease;
    }

    .kw1c-card:hover {
      box-shadow: var(--shadow-md);
      border-color: var(--border-strong);
    }

    .kw1c-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .kw1c-card-title {
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* ===== STATS GRID ===== */
    .kw1c-stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .kw1c-stat-card {
      background: var(--bg-secondary);
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      border: 1px solid var(--border);
      border-left: 3px solid var(--accent-cyan);
      box-shadow: var(--shadow-sm);
      transition: all 0.2s;
    }

    .kw1c-stat-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .kw1c-stat-value {
      font-size: 2rem;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent-cyan);
    }

    .kw1c-stat-label {
      font-size: 0.7rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* ===== TWO-COLUMN LAYOUT ===== */
    .kw1c-two-col {
      display: grid;
      grid-template-columns: 1fr 1.5fr;
      gap: 1.5rem;
    }

    @media (max-width: 900px) {
      .kw1c-two-col {
        grid-template-columns: 1fr;
      }
    }

    /* ===== FORM ELEMENTS ===== */
    .kw1c-form-group {
      margin-bottom: 1rem;
    }

    .kw1c-label {
      display: block;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .kw1c-label::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--accent-cyan);
      border-radius: 2px;
    }

    .kw1c-input,
    .kw1c-select {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 0.875rem;
      font-family: inherit;
    }

    .kw1c-input:focus,
    .kw1c-select:focus {
      outline: none;
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 3px var(--glow-cyan);
    }

    .kw1c-dropzone {
      border: 2px dashed var(--border);
      border-radius: 8px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--bg-secondary);
    }

    .kw1c-dropzone:hover {
      border-color: var(--accent-cyan);
      background: rgba(8, 145, 178, 0.05);
    }

    .kw1c-dropzone-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .kw1c-dropzone-text {
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    .kw1c-dropzone-file {
      background: rgba(5, 150, 105, 0.1);
      border: 1px solid var(--kd-covered);
      border-radius: 6px;
      padding: 0.5rem 1rem;
      margin-top: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--kd-covered);
    }

    /* ===== BUTTONS ===== */
    .kw1c-btn {
      padding: 0.625rem 1.25rem;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-family: inherit;
    }

    .kw1c-btn-primary {
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      color: white;
    }

    .kw1c-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px var(--glow-cyan);
    }

    .kw1c-btn-secondary {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .kw1c-btn-secondary:hover {
      background: var(--bg-card-hover);
      border-color: var(--accent-cyan);
    }

    .kw1c-btn-ghost {
      background: transparent;
      color: var(--text-secondary);
    }

    .kw1c-btn-ghost:hover {
      color: var(--text-primary);
      background: var(--bg-input);
    }

    .kw1c-btn-small {
      padding: 0.375rem 0.75rem;
      font-size: 0.75rem;
    }

    /* ===== MAPPING TABLE ===== */
    .kw1c-table {
      width: 100%;
      border-collapse: collapse;
    }

    .kw1c-table th,
    .kw1c-table td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .kw1c-table th {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: var(--bg-input);
    }

    .kw1c-table td {
      font-size: 0.875rem;
    }

    .kw1c-table tr:hover {
      background: var(--bg-card-hover);
    }

    /* ===== BADGES ===== */
    .kw1c-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.625rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .kw1c-badge-covered {
      background: rgba(5, 150, 105, 0.1);
      color: var(--kd-covered);
      border: 1px solid var(--kd-covered);
    }

    .kw1c-badge-partial {
      background: rgba(217, 119, 6, 0.1);
      color: var(--kd-partial);
      border: 1px solid var(--kd-partial);
    }

    .kw1c-badge-gap {
      background: rgba(220, 38, 38, 0.1);
      color: var(--kd-gap);
      border: 1px solid var(--kd-gap);
    }

    .kw1c-badge-wp {
      background: var(--bg-input);
      color: var(--accent-cyan);
      font-family: 'JetBrains Mono', monospace;
      border: 1px solid var(--border);
    }

    .kw1c-wp-code-secondary {
      font-size: 0.7rem;
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
      margin-top: 2px;
      display: block;
    }

    .kw1c-badge-tip {
      background: rgba(124, 58, 237, 0.1);
      color: var(--accent-purple);
      border: 1px solid var(--accent-purple);
    }

    /* ===== PROGRESS BAR ===== */
    .kw1c-progress-container {
      margin: 1rem 0;
    }

    .kw1c-progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.875rem;
    }

    .kw1c-progress-bar {
      height: 10px;
      background: var(--bg-input);
      border-radius: 5px;
      overflow: hidden;
    }

    .kw1c-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
      border-radius: 5px;
      transition: width 0.5s ease;
      position: relative;
    }

    .kw1c-progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .kw1c-progress-fill.green {
      background: linear-gradient(90deg, #059669, #22c55e);
    }

    /* ===== LANGUAGE LEVEL SELECTOR ===== */
    .kw1c-level-tabs {
      display: flex;
      background: var(--bg-input);
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 1rem;
      border: 1px solid var(--border);
    }

    .kw1c-level-tab {
      flex: 1;
      padding: 0.5rem 1rem;
      text-align: center;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      color: var(--text-secondary);
      background: transparent;
      border: none;
      transition: all 0.2s;
    }

    .kw1c-level-tab:hover {
      color: var(--text-primary);
    }

    .kw1c-level-tab.active {
      background: var(--bg-secondary);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }

    .kw1c-level-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .kw1c-level-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .kw1c-level-dot.b2 { background: var(--accent-cyan); }
    .kw1c-level-dot.b1 { background: var(--ec-orange); }
    .kw1c-level-dot.a2 { background: var(--kd-covered); }
    .kw1c-level-dot.arabic { background: #8b5cf6; }

    /* Dutch term highlighting for Arabic content */
    .kw1c-term-nl {
      color: var(--ec-blue);
      font-weight: 500;
      font-size: 0.9em;
      direction: ltr;
      display: inline;
      unicode-bidi: isolate;
    }

    /* ===== CONTENT VIEWER ===== */
    .kw1c-content-viewer {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.5rem;
      line-height: 1.8;
      box-shadow: var(--shadow-sm);
    }

    .kw1c-content-viewer h3 {
      font-size: 1.125rem;
      margin-bottom: 1rem;
      color: var(--accent-cyan);
    }

    .kw1c-content-viewer p {
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .kw1c-content-image {
      width: 100%;
      max-width: 400px;
      margin: 1rem auto;
      display: block;
      border-radius: 8px;
      background: var(--bg-input);
      padding: 1rem;
      border: 1px solid var(--border);
    }

    /* ===== CHAT INTERFACE ===== */
    .kw1c-chat-container {
      display: flex;
      flex-direction: column;
      height: 500px;
      background: var(--bg-secondary);
      border-radius: 12px;
      border: 1px solid var(--border);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }

    .kw1c-chat-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--bg-input);
    }

    .kw1c-chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
      background: var(--bg-primary);
    }

    .kw1c-chat-message {
      margin-bottom: 1rem;
      display: flex;
      gap: 0.75rem;
    }

    .kw1c-chat-message.user {
      flex-direction: row-reverse;
    }

    .kw1c-chat-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-input);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.875rem;
      flex-shrink: 0;
      color: white;
    }

    .kw1c-chat-message.user .kw1c-chat-avatar {
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
    }

    .kw1c-chat-message.ai .kw1c-chat-avatar {
      background: var(--accent-purple);
    }

    .kw1c-chat-bubble {
      max-width: 80%;
      padding: 0.75rem 1rem;
      border-radius: 12px;
      font-size: 0.875rem;
      line-height: 1.6;
    }

    .kw1c-chat-message.user .kw1c-chat-bubble {
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      color: white;
      border-bottom-right-radius: 4px;
    }

    .kw1c-chat-message.ai .kw1c-chat-bubble {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-bottom-left-radius: 4px;
    }

    .kw1c-chat-citation {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      background: rgba(124, 58, 237, 0.1);
      color: var(--accent-purple);
      padding: 0.125rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      margin-top: 0.5rem;
      cursor: pointer;
      border: 1px solid rgba(124, 58, 237, 0.3);
    }

    .kw1c-chat-citation:hover {
      background: rgba(124, 58, 237, 0.2);
    }

    .kw1c-chat-input-area {
      padding: 1rem;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 0.75rem;
      background: var(--bg-secondary);
    }

    .kw1c-chat-input {
      flex: 1;
      padding: 0.75rem 1rem;
      background: var(--bg-primary);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 0.875rem;
      font-family: inherit;
    }

    .kw1c-chat-input:focus {
      outline: none;
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 3px var(--glow-cyan);
    }

    /* ===== GENERATED CONTENT ===== */
    .kw1c-generated {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.25rem;
      position: relative;
      box-shadow: var(--shadow-sm);
    }

    .kw1c-generated::before {
      content: '‚ú® Gegenereerd';
      position: absolute;
      top: -10px;
      left: 12px;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      color: white;
      padding: 0.125rem 0.5rem;
      border-radius: 4px;
      font-size: 0.625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .kw1c-generated h4 {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      color: var(--accent-cyan);
    }

    .kw1c-generated p,
    .kw1c-generated li {
      font-size: 0.875rem;
      line-height: 1.7;
      color: var(--text-primary);
    }

    .kw1c-generated ul {
      margin: 0.75rem 0;
      padding-left: 1.25rem;
    }

    .kw1c-generated li {
      margin-bottom: 0.5rem;
    }

    /* ===== ATTENTION LIST ===== */
    .kw1c-attention-list {
      list-style: none;
    }

    .kw1c-attention-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-left: 3px solid var(--kd-partial);
      border-radius: 8px;
      margin-bottom: 0.5rem;
      transition: all 0.2s;
    }

    .kw1c-attention-item:hover {
      background: var(--bg-card-hover);
      transform: translateX(4px);
    }

    .kw1c-attention-item .name {
      flex: 1;
      font-weight: 500;
    }

    .kw1c-attention-item .issue {
      font-size: 0.75rem;
      color: var(--kd-partial);
    }

    /* ===== DONUT CHART (CSS) ===== */
    .kw1c-donut {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: conic-gradient(
        var(--accent-cyan) 0deg calc(var(--progress) * 3.6deg),
        var(--bg-input) calc(var(--progress) * 3.6deg) 360deg
      );
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .kw1c-donut::before {
      content: '';
      width: 70px;
      height: 70px;
      background: var(--bg-secondary);
      border-radius: 50%;
      position: absolute;
    }

    .kw1c-donut-value {
      position: relative;
      font-size: 1.25rem;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent-cyan);
    }

    .kw1c-mini-donut {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: conic-gradient(
        var(--accent-cyan) 0deg calc(var(--progress) * 3.6deg),
        var(--bg-input) calc(var(--progress) * 3.6deg) 360deg
      );
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .kw1c-mini-donut::before {
      content: '';
      position: absolute;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--bg-card);
    }

    .kw1c-mini-donut span {
      position: relative;
      font-size: 0.7rem;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent-cyan);
    }

    /* ===== CLASS CARDS ===== */
    .kw1c-class-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1rem;
    }

    .kw1c-class-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .kw1c-class-card:hover {
      border-color: var(--accent-cyan);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .kw1c-class-info {
      flex: 1;
    }

    .kw1c-class-name {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .kw1c-class-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    /* ===== SLIDER ===== */
    .kw1c-slider {
      width: 100%;
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 3px;
      background: var(--bg-input);
      outline: none;
    }

    .kw1c-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      cursor: pointer;
      box-shadow: var(--shadow-md);
    }

    /* ===== TYPE SELECTOR ===== */
    .kw1c-type-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .kw1c-type-btn {
      padding: 0.75rem;
      text-align: center;
      border-radius: 8px;
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      color: var(--text-secondary);
      transition: all 0.2s;
    }

    .kw1c-type-btn:hover {
      border-color: var(--border-strong);
      background: var(--bg-card-hover);
    }

    .kw1c-type-btn.active {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
      background: rgba(8, 145, 178, 0.05);
    }

    .kw1c-type-icon {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    /* ===== TOAST NOTIFICATION ===== */
    .kw1c-toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-left: 4px solid var(--kd-covered);
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: var(--shadow-lg);
      display: none;
      z-index: 1000;
    }

    .kw1c-toast.show {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* ===== DRAWER SYSTEM ===== */
    .kw1c-drawer-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.5);
      z-index: 1001;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .kw1c-drawer-overlay.open {
      opacity: 1;
      pointer-events: auto;
    }

    .kw1c-drawer {
      position: fixed;
      top: 0;
      right: 0;
      width: 480px;
      max-width: 90vw;
      height: 100vh;
      background: var(--bg-secondary);
      border-left: 1px solid var(--border);
      z-index: 1002;
      display: flex;
      flex-direction: column;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      box-shadow: var(--shadow-lg);
    }

    .kw1c-drawer.open {
      transform: translateX(0);
    }

    .kw1c-drawer-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      flex-shrink: 0;
      background: var(--bg-input);
    }

    .kw1c-drawer-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .kw1c-drawer-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    .kw1c-drawer-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0;
      line-height: 1;
      transition: color 0.2s;
    }

    .kw1c-drawer-close:hover {
      color: var(--text-primary);
    }

    .kw1c-drawer-body {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
    }

    .kw1c-drawer-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      flex-shrink: 0;
      background: var(--bg-input);
    }

    /* Drawer content styles */
    .kw1c-drawer-section {
      margin-bottom: 1.5rem;
    }

    .kw1c-drawer-section-title {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .kw1c-drawer-section-title::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--accent-cyan);
      border-radius: 2px;
    }

    .kw1c-drawer-card {
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 0.75rem;
    }

    .kw1c-drawer-stat-row {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
    }

    .kw1c-drawer-stat-row:last-child {
      border-bottom: none;
    }

    .kw1c-drawer-stat-label {
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    .kw1c-drawer-stat-value {
      color: var(--text-primary);
      font-weight: 500;
      font-size: 0.875rem;
    }

    .kw1c-drawer-list {
      list-style: none;
    }

    .kw1c-drawer-list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 6px;
      margin-bottom: 0.5rem;
      transition: all 0.2s;
    }

    .kw1c-drawer-list-item:hover {
      background: var(--bg-card-hover);
      border-color: var(--border-strong);
    }

    .kw1c-drawer-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--accent-purple);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.75rem;
      flex-shrink: 0;
    }

    .kw1c-drawer-list-content {
      flex: 1;
      min-width: 0;
    }

    .kw1c-drawer-list-name {
      font-weight: 500;
      font-size: 0.875rem;
    }

    .kw1c-drawer-list-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .kw1c-drawer-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .kw1c-drawer-tab {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 500;
      background: var(--bg-input);
      color: var(--text-secondary);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s;
    }

    .kw1c-drawer-tab:hover {
      border-color: var(--border-strong);
    }

    .kw1c-drawer-tab.active {
      background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
      color: white;
      border-color: transparent;
    }

    .kw1c-mini-progress {
      height: 6px;
      background: var(--bg-input);
      border-radius: 3px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .kw1c-mini-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-cyan), var(--accent-purple));
      border-radius: 3px;
    }

    .kw1c-drawer-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    /* Mapping progress animation */
    .kw1c-mapping-progress {
      text-align: center;
      padding: 2rem;
    }

    .kw1c-mapping-spinner {
      width: 48px;
      height: 48px;
      border: 4px solid var(--bg-input);
      border-top-color: var(--accent-cyan);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .kw1c-mapping-steps {
      text-align: left;
      max-width: 300px;
      margin: 1.5rem auto 0;
    }

    .kw1c-mapping-step {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0;
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .kw1c-mapping-step.done {
      color: var(--kd-covered);
    }

    .kw1c-mapping-step.active {
      color: var(--accent-cyan);
    }

    /* Student level selector in drawer */
    .kw1c-level-select-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 6px;
      margin-bottom: 0.5rem;
    }

    .kw1c-level-select-row select {
      padding: 0.375rem 0.5rem;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: var(--text-primary);
      font-size: 0.75rem;
      font-family: inherit;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
      .kw1c-header {
        flex-direction: column;
        gap: 0.75rem;
        padding: 1rem;
      }
      
      .kw1c-tabs {
        justify-content: flex-start;
      }
      
      .kw1c-panel {
        padding: 1rem;
      }
      
      .kw1c-stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .kw1c-drawer {
        width: 100%;
        max-width: 100%;
      }
    }
  </style>
</head>
<body data-route="/teacher/kw1c-demo" data-entity="TeacherDashboard">

  <!-- ===== HEADER ===== -->
  <header class="kw1c-header">
    <div class="kw1c-header-left">
      <span class="kw1c-logo">ExpertCollege</span>
      <span class="kw1c-school-badge">Koning Willem I College</span>
    </div>
    <div class="kw1c-user-menu">
      <span style="font-size: 0.875rem; color: var(--text-secondary);">Welkom, Mw. de Vries</span>
      <div class="kw1c-user-avatar">MV</div>
    </div>
  </header>

  <!-- ===== TAB NAVIGATION ===== -->
  <nav class="kw1c-tabs">
    <button class="kw1c-tab active" data-cta-id="cta-kw1c-tab-welkom" data-action="action" onclick="showPanel('welkom')">
      üè† Welkom
    </button>
    <button class="kw1c-tab" data-cta-id="cta-kw1c-tab-dashboard" data-action="action" onclick="showPanel('dashboard')">
      üìä Dashboard
    </button>
    <button class="kw1c-tab" data-cta-id="cta-kw1c-tab-kdmapping" data-action="action" onclick="showPanel('kdmapping')">
      üéØ Vaardigheden Check
    </button>
    <button class="kw1c-tab" data-cta-id="cta-kw1c-tab-werkopdrachten" data-action="action" onclick="showPanel('werkopdrachten')">
      ‚ú® Werkopdrachten
    </button>
    <button class="kw1c-tab" data-cta-id="cta-kw1c-tab-taalniveaus" data-action="action" onclick="showPanel('taalniveaus')">
      üåê Taalniveaus
    </button>
    <button class="kw1c-tab" data-cta-id="cta-kw1c-tab-teachergpt" data-action="action" onclick="showPanel('teachergpt')">
      ü§ñ e-Xpert SAM
    </button>
  </nav>

  <!-- ===== PANEL: WELKOM (Onboarding) ===== -->
  <section id="panel-welkom" class="kw1c-panel active">
    <div class="kw1c-card" style="max-width: 900px; margin: 0 auto;">
      <div style="text-align: center; padding: 2rem 1rem;">
        <h1 style="font-size: 1.75rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          Welkom bij ExpertCollege voor Docenten
        </h1>
        <p style="color: var(--text-secondary); font-size: 1rem;">
          e-Xpert SAM helpt je met lesvoorbereiding en kwalificatie-afstemming
        </p>
      </div>

      <!-- Sectie 1: Wat kan dit systeem -->
      <div class="kw1c-card" style="background: var(--bg-input); border: none; margin-bottom: 1.5rem;">
        <h2 class="kw1c-card-title" style="color: var(--accent-cyan);">üí° Wat kan dit systeem voor jou doen?</h2>
        <p style="margin-bottom: 1rem; line-height: 1.8;">
          Als docent wil je dat je studenten goed voorbereid zijn op hun stage en examen. Dit systeem helpt je daarbij:
        </p>
        <ul style="list-style: none; padding: 0;">
          <li style="padding: 0.5rem 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <span style="color: var(--kd-covered);">‚úì</span>
            <span><strong>Check automatisch</strong> of je lessen alle beroepsvaardigheden dekken</span>
          </li>
          <li style="padding: 0.5rem 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <span style="color: var(--kd-covered);">‚úì</span>
            <span><strong>Krijg suggesties</strong> voor lesmateriaal dat je mist</span>
          </li>
          <li style="padding: 0.5rem 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <span style="color: var(--kd-covered);">‚úì</span>
            <span><strong>Genereer opdrachten</strong> en toetsvragen met e-Xpert SAM</span>
          </li>
          <li style="padding: 0.5rem 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <span style="color: var(--kd-covered);">‚úì</span>
            <span><strong>Pas teksten aan</strong> op het taalniveau van je studenten</span>
          </li>
          <li style="padding: 0.5rem 0; display: flex; align-items: flex-start; gap: 0.75rem;">
            <span style="color: var(--kd-covered);">‚úì</span>
            <span><strong>Stel vragen</strong> aan e-Xpert SAM over didactiek en vakinhoud</span>
          </li>
        </ul>
      </div>

      <!-- Sectie 2: Wat is het KD -->
      <div class="kw1c-card" style="background: var(--bg-input); border: none; margin-bottom: 1.5rem;">
        <h2 class="kw1c-card-title" style="color: var(--accent-purple);">üìö Wat is het KD en waarom zie je het hier?</h2>
        <p style="margin-bottom: 1rem; line-height: 1.8;">
          Het <strong>Kwalificatiedossier (KD)</strong> is het landelijke document dat beschrijft wat studenten moeten kunnen als ze hun diploma halen. Elke opleiding heeft er een.
        </p>
        <p style="margin-bottom: 1rem; line-height: 1.8;">
          Je ziet in dit systeem soms codes zoals "<span class="kw1c-badge kw1c-badge-wp" style="font-size: 0.75rem;">WP2.3</span>" ‚Äî dat zijn verwijzingen naar specifieke vaardigheden in het KD. <strong>Je hoeft deze codes niet te onthouden!</strong> Wij vertalen ze voor je naar begrijpelijke taal.
        </p>
        <p style="line-height: 1.8; color: var(--text-secondary);">
          <em>De codes staan er wel bij zodat je curriculumco√∂rdinator of examencommissie ze kan terugvinden als dat nodig is.</em>
        </p>
      </div>

      <!-- Sectie 3: Hoe werkt de check -->
      <div class="kw1c-card" style="background: var(--bg-input); border: none; margin-bottom: 1.5rem;">
        <h2 class="kw1c-card-title" style="color: var(--ec-orange);">üéØ Hoe werkt de vaardigheden-check?</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
          <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">1Ô∏è‚É£</div>
            <div style="font-size: 0.875rem;"><strong>Upload</strong> je lesplan of lessenreeks</div>
          </div>
          <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">2Ô∏è‚É£</div>
            <div style="font-size: 0.875rem;"><strong>Analyse</strong> door e-Xpert SAM</div>
          </div>
          <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">3Ô∏è‚É£</div>
            <div style="font-size: 0.875rem;"><strong>Bekijk</strong> welke vaardigheden gedekt zijn</div>
          </div>
          <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">4Ô∏è‚É£</div>
            <div style="font-size: 0.875rem;"><strong>Ontvang tips</strong> voor ontbrekende vaardigheden</div>
          </div>
          <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">5Ô∏è‚É£</div>
            <div style="font-size: 0.875rem;"><strong>Voeg toe</strong> met √©√©n klik</div>
          </div>
        </div>
      </div>

      <!-- Snelstart knoppen -->
      <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; margin-top: 2rem;">
        <button class="kw1c-btn kw1c-btn-primary" data-cta-id="cta-kw1c-welkom-start-check" data-action="action" onclick="showPanel('kdmapping')">
          üéØ Start met Vaardigheden Check ‚Üí
        </button>
        <button class="kw1c-btn kw1c-btn-secondary" data-cta-id="cta-kw1c-welkom-generate" data-action="action" onclick="showPanel('werkopdrachten')">
          ‚ú® Genereer een opdracht ‚Üí
        </button>
        <button class="kw1c-btn kw1c-btn-secondary" data-cta-id="cta-kw1c-welkom-ask" data-action="action" onclick="showPanel('teachergpt')">
          ü§ñ Stel een vraag ‚Üí
        </button>
      </div>
    </div>
  </section>

  <!-- ===== PANEL: DASHBOARD ===== -->
  <section id="panel-dashboard" class="kw1c-panel">
    <!-- Stats Overview - Meaningful Insights (Clickable) -->
    <div class="kw1c-stats-grid">
      <div class="kw1c-stat-card" style="cursor: pointer;" onclick="openAllClassesDrawer()" data-cta-id="cta-kw1c-stat-klassen">
        <div class="kw1c-stat-value" data-field="total_students" style="font-size: 1.5rem;">3 klassen</div>
        <div class="kw1c-stat-label">87 studenten actief</div>
      </div>
      <div class="kw1c-stat-card" style="cursor: pointer;" onclick="openNakijkenDrawer()" data-cta-id="cta-kw1c-stat-nakijken">
        <div class="kw1c-stat-value" data-field="active_assignments" style="font-size: 1.5rem; color: var(--kd-partial);">4 nakijken</div>
        <div class="kw1c-stat-label">8 opdrachten deze week</div>
      </div>
      <div class="kw1c-stat-card" style="cursor: pointer;" onclick="openVoortgangDrawer()" data-cta-id="cta-kw1c-stat-voortgang">
        <div class="kw1c-stat-value" data-field="avg_completion" style="font-size: 1.5rem; color: var(--kd-covered);">Op schema ‚úì</div>
        <div class="kw1c-stat-label">Voortgang dit blok</div>
      </div>
      <div class="kw1c-stat-card" style="cursor: pointer;" onclick="openKDGapsDrawer()" data-cta-id="cta-kw1c-stat-kdgaps">
        <div class="kw1c-stat-value" data-field="kd_coverage" style="font-size: 1.5rem;">Bijna compleet</div>
        <div class="kw1c-stat-label">Nog 2 WP's te dekken</div>
      </div>
    </div>

    <!-- Classes Grid -->
    <div class="kw1c-card">
      <div class="kw1c-card-header">
        <h2 class="kw1c-card-title">üìö Mijn Klassen</h2>
        <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-dash-view-all-classes" data-action="navigate">
          Alle klassen ‚Üí
        </button>
      </div>
      <div class="kw1c-class-grid" data-list="classes">
        <div class="kw1c-class-card">
          <div class="kw1c-donut" style="--progress: 82">
            <span class="kw1c-donut-value" style="font-size: 0.7rem;">Op schema</span>
          </div>
          <div class="kw1c-class-info">
            <div class="kw1c-class-name" data-field="class_name">VIG-3A</div>
            <div class="kw1c-class-meta">24 studenten ‚Ä¢ Verzorgende IG</div>
            <div style="font-size: 0.75rem; color: var(--kd-covered); margin-top: 0.25rem;">‚úì Goed op weg</div>
          </div>
        </div>
        <div class="kw1c-class-card">
          <div class="kw1c-donut" style="--progress: 68">
            <span class="kw1c-donut-value" style="font-size: 0.65rem; color: var(--kd-partial);">Aandacht</span>
          </div>
          <div class="kw1c-class-info">
            <div class="kw1c-class-name" data-field="class_name">VP-4B</div>
            <div class="kw1c-class-meta">18 studenten ‚Ä¢ Verpleegkunde</div>
            <div style="font-size: 0.75rem; color: var(--kd-partial); margin-top: 0.25rem;">‚ö†Ô∏è 3 studenten achter</div>
          </div>
        </div>
        <div class="kw1c-class-card">
          <div class="kw1c-donut" style="--progress: 91">
            <span class="kw1c-donut-value" style="font-size: 0.7rem; color: var(--kd-covered);">Top! ‚≠ê</span>
          </div>
          <div class="kw1c-class-info">
            <div class="kw1c-class-name" data-field="class_name">Combi-1</div>
            <div class="kw1c-class-meta">45 studenten ‚Ä¢ Basisjaar</div>
            <div style="font-size: 0.75rem; color: var(--kd-covered); margin-top: 0.25rem;">‚úì Uitstekende voortgang</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Attention Needed -->
    <div class="kw1c-card">
      <div class="kw1c-card-header">
        <h2 class="kw1c-card-title">‚ö†Ô∏è Studenten die aandacht nodig hebben</h2>
      </div>
      <ul class="kw1c-attention-list" data-list="attention_students">
        <li class="kw1c-attention-item">
          <span class="name" data-field="student_name">Sophie M.</span>
          <span class="issue">Achterstand bij Klinisch Redeneren</span>
          <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-dash-view-student-0" data-action="navigate">
            Bekijk ‚Üí
          </button>
        </li>
        <li class="kw1c-attention-item">
          <span class="name" data-field="student_name">Ahmed K.</span>
          <span class="issue">3 gemiste opdrachten</span>
          <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-dash-view-student-1" data-action="navigate">
            Bekijk ‚Üí
          </button>
        </li>
        <li class="kw1c-attention-item">
          <span class="name" data-field="student_name">Lisa v.D.</span>
          <span class="issue">Taalniveau ondersteuning nodig</span>
          <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-dash-view-student-2" data-action="navigate">
            Bekijk ‚Üí
          </button>
        </li>
      </ul>
    </div>
  </section>

  <!-- ===== PANEL: KD MAPPING ===== -->
  <section id="panel-kdmapping" class="kw1c-panel">
    <div class="kw1c-two-col">
      <!-- Left: Upload & Controls -->
      <div>
        <div class="kw1c-card">
          <h2 class="kw1c-card-title">üìÑ Lesplan uploaden</h2>
          <div class="kw1c-dropzone" data-cta-id="cta-kw1c-kd-upload-lesplan" data-action="action">
            <div class="kw1c-dropzone-icon">üìÅ</div>
            <div class="kw1c-dropzone-text">Sleep je lesplan hier of klik om te uploaden</div>
            <div class="kw1c-dropzone-file">
              ‚úì Lessenreeks_Klinisch_Redeneren_Week1-4.docx
            </div>
          </div>
        </div>

        <div class="kw1c-card">
          <div class="kw1c-form-group">
            <label class="kw1c-label">Opleiding</label>
            <select class="kw1c-select" data-cta-id="cta-kw1c-kd-select-document" data-action="select">
              <option value="vig-2026" selected>Verzorgende IG (2026)</option>
              <option value="verpleegkunde-2026">MBO Verpleegkundige (2026)</option>
              <option value="niveau3-2026">Verpleegkunde Niveau 3 (2026)</option>
            </select>
          </div>

          <button class="kw1c-btn kw1c-btn-primary" style="width: 100%; margin-bottom: 0.75rem;" data-cta-id="cta-kw1c-kd-start-mapping" data-action="action" onclick="startKDMapping()">
            üéØ Start Vaardigheden Check
          </button>

          <button class="kw1c-btn kw1c-btn-secondary" style="width: 100%;" data-cta-id="cta-kw1c-kd-export-csv" data-action="action" onclick="exportMappingCSV()">
            üì• Exporteer naar CSV
          </button>
        </div>

        <!-- Coverage Summary -->
        <div class="kw1c-card">
          <h2 class="kw1c-card-title">üìä Vaardigheden Check</h2>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
            Je lessenreeks dekt <strong id="coverage-count">12</strong> van 14 beroepsvaardigheden
          </p>
          <div class="kw1c-progress-container">
            <div class="kw1c-progress-header">
              <span>Voortgang</span>
              <span><strong>12</strong> / 14</span>
            </div>
            <div class="kw1c-progress-bar">
              <div class="kw1c-progress-fill green" style="width: 86%;"></div>
            </div>
          </div>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem;">
            <span class="kw1c-badge kw1c-badge-covered">‚úì 12 Gedekt</span>
            <span class="kw1c-badge kw1c-badge-tip">üí° 2 Tips</span>
          </div>
        </div>
      </div>

      <!-- Right: Mapping Results Table -->
      <div class="kw1c-card">
        <div class="kw1c-card-header">
          <h2 class="kw1c-card-title">üó∫Ô∏è Overzicht Vaardigheden</h2>
          <span style="font-size: 0.75rem; color: var(--text-muted);">Laatst bijgewerkt: vandaag 14:32</span>
        </div>
        <table class="kw1c-table">
          <thead>
            <tr>
              <th>Jouw les</th>
              <th>Wat studenten leren</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody data-list="mappings">
            <tr>
              <td>Les 1: Vitale functies meten</td>
              <td>
                <div>Informatie verzamelen over een zorgvrager</div>
                <span class="kw1c-wp-code-secondary">WP1.1</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr>
              <td>Les 2: Klinisch redeneren basis</td>
              <td>
                <div>Inschatten wat er met een zorgvrager aan de hand is</div>
                <span class="kw1c-wp-code-secondary">WP2.3</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr>
              <td>Les 3: Medicatieveiligheid</td>
              <td>
                <div>Veilig omgaan met medicijnen</div>
                <span class="kw1c-wp-code-secondary">WP3.2</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr>
              <td>Les 4: Verpleegplan opstellen</td>
              <td>
                <div>Een zorgplan schrijven</div>
                <span class="kw1c-wp-code-secondary">WP2.1</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr>
              <td>Les 5: Zorgvrager communicatie</td>
              <td>
                <div>Goed communiceren met zorgvragers</div>
                <span class="kw1c-wp-code-secondary">WP1.3</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr>
              <td>Les 6: Hygi√´ne protocollen</td>
              <td>
                <div>Verpleegtechnische handelingen uitvoeren</div>
                <span class="kw1c-wp-code-secondary">WP3.1</span>
              </td>
              <td><span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span></td>
            </tr>
            <tr id="gap-row-0" style="background: rgba(124, 58, 237, 0.05);">
              <td style="color: var(--text-muted);">‚Äî</td>
              <td>
                <div>Kijken of de zorg goed werkt</div>
                <span class="kw1c-wp-code-secondary">WP4.1</span>
              </td>
              <td>
                <span class="kw1c-badge kw1c-badge-tip">üí° Tip</span>
                <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-kd-view-gap-0" data-action="action" style="margin-left: 0.5rem;" onclick="openGapDrawer(0)">
                  Bekijk suggestie ‚Üí
                </button>
              </td>
            </tr>
            <tr id="gap-row-1" style="background: rgba(124, 58, 237, 0.05);">
              <td style="color: var(--text-muted);">‚Äî</td>
              <td>
                <div>Nadenken over je eigen handelen</div>
                <span class="kw1c-wp-code-secondary">WP5.2</span>
              </td>
              <td>
                <span class="kw1c-badge kw1c-badge-tip">üí° Tip</span>
                <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-kd-view-gap-1" data-action="action" style="margin-left: 0.5rem;" onclick="openGapDrawer(1)">
                  Bekijk suggestie ‚Üí
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- ===== PANEL: AI WERKOPDRACHTEN ===== -->
  <section id="panel-werkopdrachten" class="kw1c-panel">
    <div class="kw1c-two-col">
      <!-- Left: Generator Controls -->
      <div>
        <div class="kw1c-card">
          <h2 class="kw1c-card-title">‚öôÔ∏è Genereer Opdracht</h2>
          
          <div class="kw1c-form-group">
            <label class="kw1c-label">Module</label>
            <select class="kw1c-select" data-cta-id="cta-kw1c-gen-select-module" data-action="select">
              <option value="klinisch-redeneren" selected>Klinisch Redeneren bij Pijn</option>
              <option value="ebp">Evidence Based Practice (EBP)</option>
              <option value="digitale-vaardigheden">Digitale Vaardigheden in de Zorg</option>
              <option value="medicatieveiligheid">Medicatieveiligheid</option>
              <option value="vitale-functies">Vitale Functies</option>
              <option value="verpleegplan">Verpleegplan Opstellen</option>
              <option value="anatomie-hart">Anatomie - Het Hart</option>
            </select>
          </div>

          <div class="kw1c-form-group">
            <label class="kw1c-label">Type opdracht</label>
            <div class="kw1c-type-grid">
              <button class="kw1c-type-btn active" data-cta-id="cta-kw1c-gen-type-werkopdracht" data-action="select">
                <div class="kw1c-type-icon">üìù</div>
                Werkopdracht
              </button>
              <button class="kw1c-type-btn" data-cta-id="cta-kw1c-gen-type-toetsvraag" data-action="select">
                <div class="kw1c-type-icon">‚úÖ</div>
                Toetsvraag
              </button>
              <button class="kw1c-type-btn" data-cta-id="cta-kw1c-gen-type-kennischeck" data-action="select">
                <div class="kw1c-type-icon">üí°</div>
                Kennischeck
              </button>
            </div>
          </div>

          <div class="kw1c-form-group">
            <label class="kw1c-label">Aantal vragen: <strong id="slider-value">5</strong></label>
            <input type="range" class="kw1c-slider" min="1" max="10" value="5" data-cta-id="cta-kw1c-gen-slider-count" data-action="edit" oninput="document.getElementById('slider-value').textContent = this.value">
          </div>

          <div class="kw1c-form-group">
            <label class="kw1c-label">KD Werkproces (optioneel)</label>
            <select class="kw1c-select" data-cta-id="cta-kw1c-gen-select-wp" data-action="select">
              <option value="" selected>‚Äî Automatisch detecteren ‚Äî</option>
              <option value="WP1.1">WP1.1 - Verzamelt gegevens</option>
              <option value="WP1.2">WP1.2 - Communiceert met zorgvrager</option>
              <option value="WP2.1">WP2.1 - Stelt zorgplan op</option>
              <option value="WP2.3">WP2.3 - Analyseert gezondheidssituatie</option>
              <option value="WP3.1">WP3.1 - Voert verpleegtechniek uit</option>
              <option value="WP3.2">WP3.2 - Bereidt medicatie voor</option>
              <option value="WP4.1">WP4.1 - Evalueert de zorg</option>
              <option value="WP5.2">WP5.2 - Reflecteert op handelen</option>
            </select>
          </div>

          <button class="kw1c-btn kw1c-btn-primary" style="width: 100%;" data-cta-id="cta-kw1c-gen-generate" data-action="action" onclick="showToast('Opdracht gegenereerd!')">
            ‚ú® Genereer met e-Xpert SAM
          </button>
        </div>
      </div>

      <!-- Right: Generated Content -->
      <div>
        <div class="kw1c-card">
          <div class="kw1c-card-header">
            <h2 class="kw1c-card-title">üìÑ Gegenereerde Opdracht</h2>
            <div style="display: flex; gap: 0.5rem;">
              <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-gen-regenerate" data-action="action">
                üîÑ Opnieuw
              </button>
              <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-gen-edit" data-action="action">
                ‚úèÔ∏è Aanpassen
              </button>
              <button class="kw1c-btn kw1c-btn-primary kw1c-btn-small" data-cta-id="cta-kw1c-gen-save" data-action="action" onclick="showToast('Opdracht opgeslagen!')">
                üíæ Opslaan
              </button>
            </div>
          </div>

          <div class="kw1c-generated">
            <h4>Werkopdracht: Klinisch Redeneren bij Pijn</h4>
            
            <p><strong>Leerdoel:</strong><br>
            De student kan een gestructureerde pijnanamnese afnemen volgens de ALTIS-methode en de bevindingen correct vastleggen in het zorgleefplan.</p>
            
            <p><strong>KD Werkproces:</strong> <span class="kw1c-badge kw1c-badge-wp">WP2.3</span></p>

            <p><strong>Opdracht:</strong><br>
            Je werkt vandaag op de afdeling Interne Geneeskunde. Mevrouw Jansen (78 jaar) is opgenomen met buikklachten. Ze geeft aan pijn te hebben, maar kan dit moeilijk onder woorden brengen.</p>

            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Neem een volledige pijnanamnese af bij een medestudent (die de rol van mevrouw Jansen speelt)</li>
              <li>Gebruik hierbij de ALTIS-methode (Aard, Lokalisatie, Tijdsduur, Intensiteit, Samenhang)</li>
              <li>Leg je bevindingen vast in het digitale zorgleefplan</li>
              <li>Formuleer minimaal 2 verpleegkundige diagnoses op basis van je bevindingen</li>
            </ul>

            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Alle ALTIS-componenten worden systematisch uitgevraagd</li>
              <li>‚úì Open vragen worden gebruikt om de zorgvrager te laten vertellen</li>
              <li>‚úì Non-verbale pijnsignalen worden herkend en benoemd</li>
              <li>‚úì Bevindingen worden correct en volledig genoteerd</li>
              <li>‚úì Verpleegkundige diagnoses zijn onderbouwd</li>
            </ul>

            <p><strong>Tijdsduur:</strong> 45 minuten</p>
          </div>
        </div>

        <!-- Quick Generate Buttons -->
        <div class="kw1c-card">
          <h2 class="kw1c-card-title">‚ö° Snel genereren</h2>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-gen-quick-kennischeck" data-action="action">
              5 Kennischeckvragen
            </button>
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-gen-quick-reflectie" data-action="action">
              Reflectieopdracht
            </button>
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-gen-quick-casus" data-action="action">
              Praktijkcasus
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== PANEL: TAALNIVEAUS ===== -->
  <section id="panel-taalniveaus" class="kw1c-panel">
    <div class="kw1c-card">
      <div class="kw1c-card-header">
        <div>
          <h2 class="kw1c-card-title">üìñ Basis Anatomie en Fysiologie</h2>
          <p style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.25rem;">
            Module: Het Hart ‚Ä¢ Hoofdstuk 2.1
          </p>
        </div>
        <div style="display: flex; gap: 0.5rem;">
          <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" data-cta-id="cta-kw1c-taal-prev-section" data-action="navigate">
            ‚Üê Vorige
          </button>
          <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-taal-next-section" data-action="navigate">
            Volgende ‚Üí
          </button>
        </div>
      </div>

      <!-- Language Level Selector -->
      <div class="kw1c-level-tabs">
        <button class="kw1c-level-tab active" data-cta-id="cta-kw1c-taal-level-normal" data-action="action" onclick="showLevel('normal')">
          üîµ Normaal (B2)
        </button>
        <button class="kw1c-level-tab" data-cta-id="cta-kw1c-taal-level-easy" data-action="action" onclick="showLevel('easy')">
          üü† Makkelijk (B1)
        </button>
        <button class="kw1c-level-tab" data-cta-id="cta-kw1c-taal-level-veryeasy" data-action="action" onclick="showLevel('veryeasy')">
          üü¢ Zeer Makkelijk (A2)
        </button>
        <button class="kw1c-level-tab" data-cta-id="cta-kw1c-taal-level-arabic" data-action="action" onclick="showLevel('arabic')">
          üåô ÿπÿ±ÿ®Ÿä (Arabisch)
        </button>
      </div>

      <!-- Content: Normal (B2) -->
      <div id="content-normal" class="kw1c-content-viewer" style="display: block;">
        <div class="kw1c-level-indicator">
          <span class="kw1c-level-dot b2"></span>
          <span>Taalniveau B2 - Standaard</span>
        </div>
        
        <h3>De structuur van het hart</h3>
        
        <p>Het hart is een holle spier die fungeert als de centrale pomp van het cardiovasculaire systeem. Het is gelegen in de thoraxholte, achter het sternum en tussen de longen in een ruimte die het mediastinum wordt genoemd.</p>

        <p>Het hart bestaat uit vier kamers: twee atria (boezems) aan de bovenzijde en twee ventrikels (hartkamers) aan de onderzijde. De rechterhelft van het hart ontvangt zuurstofarm bloed uit het lichaam via de vena cava en pompt dit naar de longen voor oxygenatie. De linkerhelft ontvangt zuurstofrijk bloed uit de longen en pompt dit via de aorta naar de systemische circulatie.</p>

        <p>De hartwand bestaat uit drie lagen: het epicard (buitenste laag), het myocard (spierlaag) en het endocard (binnenste laag). Het myocard is het dikst in de linkerventrikel, omdat deze kamer het bloed door het gehele lichaam moet pompen.</p>

        <!-- Placeholder for image -->
        <div style="background: #1e293b; border: 2px dashed var(--border); border-radius: 8px; padding: 3rem; text-align: center; margin: 1.5rem 0;">
          <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü´Ä</div>
          <div style="color: var(--text-muted); font-size: 0.875rem;">Afbeelding: Doorsnede van het hart met alle kamers en kleppen</div>
        </div>

        <p><strong>Belangrijke termen:</strong> atrium, ventrikel, septum, myocard, endocard, epicard, vena cava, aorta, pulmonale circulatie, systemische circulatie.</p>
      </div>

      <!-- Content: Easy (B1) -->
      <div id="content-easy" class="kw1c-content-viewer" style="display: none;">
        <div class="kw1c-level-indicator">
          <span class="kw1c-level-dot b1"></span>
          <span>Taalniveau B1 - Makkelijk</span>
        </div>
        
        <h3>Hoe ziet het hart eruit?</h3>
        
        <p>Het hart is een spier die werkt als een pomp. Het hart zit in je borstkas, achter je borstbeen en tussen je longen.</p>

        <p>Het hart heeft vier delen: twee boezems aan de bovenkant en twee kamers aan de onderkant. De rechterkant van het hart ontvangt bloed zonder zuurstof uit je lichaam. Dit bloed gaat naar de longen om zuurstof op te halen. De linkerkant ontvangt bloed met zuurstof uit de longen en stuurt dit naar de rest van je lichaam.</p>

        <p>De wand van het hart heeft drie lagen. De middelste laag is de spierlaag. Deze is het dikst aan de linkerkant, omdat de linkerkamer het hardst moet pompen.</p>

        <!-- Placeholder for image -->
        <div style="background: #1e293b; border: 2px dashed var(--border); border-radius: 8px; padding: 3rem; text-align: center; margin: 1.5rem 0;">
          <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü´Ä</div>
          <div style="color: var(--text-muted); font-size: 0.875rem;">Afbeelding: Het hart met de vier delen</div>
        </div>

        <p><strong>Onthoud deze woorden:</strong> boezem, hartkamer, spierlaag, zuurstofrijk bloed, zuurstofarm bloed.</p>
      </div>

      <!-- Content: Very Easy (A2) -->
      <div id="content-veryeasy" class="kw1c-content-viewer" style="display: none;">
        <div class="kw1c-level-indicator">
          <span class="kw1c-level-dot a2"></span>
          <span>Taalniveau A2 - Zeer Makkelijk</span>
        </div>
        
        <h3>Wat is het hart?</h3>
        
        <p>Het hart is een spier. Het hart pompt bloed door je lichaam. Het hart zit in je borst.</p>

        <p>Het hart heeft vier delen:</p>
        <ul style="margin: 1rem 0; padding-left: 1.5rem;">
          <li>Twee boezems (boven)</li>
          <li>Twee kamers (onder)</li>
        </ul>

        <p>Het bloed gaat zo:</p>
        <ul style="margin: 1rem 0; padding-left: 1.5rem;">
          <li>Bloed zonder zuurstof komt in de rechterkant</li>
          <li>Het bloed gaat naar de longen</li>
          <li>In de longen krijgt het bloed zuurstof</li>
          <li>Het bloed komt terug in de linkerkant</li>
          <li>De linkerkant pompt het bloed naar je lichaam</li>
        </ul>

        <!-- Placeholder for image -->
        <div style="background: #1e293b; border: 2px dashed var(--border); border-radius: 8px; padding: 3rem; text-align: center; margin: 1.5rem 0;">
          <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü´Ä</div>
          <div style="color: var(--text-muted); font-size: 0.875rem;">Plaatje: Het hart</div>
        </div>

        <p><strong>Nieuwe woorden:</strong></p>
        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
          <li><strong>Boezem</strong> = deel boven in het hart</li>
          <li><strong>Kamer</strong> = deel onder in het hart</li>
          <li><strong>Zuurstof</strong> = wat je inademt</li>
        </ul>
      </div>

      <!-- Content: Arabic -->
      <div id="content-arabic" class="kw1c-content-viewer" style="display: none; direction: rtl; text-align: right;">
        <div class="kw1c-level-indicator" style="direction: ltr; text-align: left;">
          <span class="kw1c-level-dot" style="background: #8b5cf6;"></span>
          <span>ÿπÿ±ÿ®Ÿä - Arabisch met Nederlandse vaktermen</span>
        </div>
        
        <h3>ŸÖÿß ŸáŸà ÿßŸÑŸÇŸÑÿ®ÿü <span class="kw1c-term-nl">(Het hart)</span></h3>
        
        <p>ÿßŸÑŸÇŸÑÿ® <span class="kw1c-term-nl">(het hart)</span> ŸáŸà ÿπÿ∂ŸÑÿ©. ÿßŸÑŸÇŸÑÿ® Ÿäÿ∂ÿÆ ÿßŸÑÿØŸÖ <span class="kw1c-term-nl">(bloed)</span> ŸÅŸä ÿ¨ÿ≥ŸÖŸÉ. ÿßŸÑŸÇŸÑÿ® ŸÖŸàÿ¨ŸàÿØ ŸÅŸä ÿµÿØÿ±ŸÉ <span class="kw1c-term-nl">(borstkas)</span>.</p>

        <p><strong>ÿ£ÿ¨ÿ≤ÿßÿ° ÿßŸÑŸÇŸÑÿ® ÿßŸÑÿ£ÿ±ÿ®ÿπÿ© <span class="kw1c-term-nl">(De 4 delen van het hart)</span>:</strong></p>
        <p>ŸÑŸÑŸÇŸÑÿ® ÿ£ÿ±ÿ®ÿπ ÿ∫ÿ±ŸÅ:</p>
        <ul style="margin: 1rem 0; padding-right: 1.5rem; padding-left: 0;">
          <li><strong>ÿ£ÿ∞ŸäŸÜÿßŸÜ</strong> <span class="kw1c-term-nl">(2 boezems)</span> - ŸÅŸä ÿßŸÑÿ£ÿπŸÑŸâ. ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ.</li>
          <li><strong>ÿ®ÿ∑ŸäŸÜÿßŸÜ</strong> <span class="kw1c-term-nl">(2 kamers)</span> - ŸÅŸä ÿßŸÑÿ£ÿ≥ŸÅŸÑ. Ÿáÿ∞Ÿá ÿ™ÿ∂ÿÆ ÿßŸÑÿØŸÖ.</li>
        </ul>
        
        <p>üí° <em>ŸÖÿ´ÿßŸÑ: ŸäŸÖŸÉŸÜŸÉ ÿ™ÿÆŸäŸÑ ŸÇŸÑÿ®ŸÉ ŸÉŸÖŸÜÿ≤ŸÑ ÿ®ÿ£ÿ±ÿ®ÿπ ÿ∫ÿ±ŸÅ.</em></p>

        <p><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£ŸäŸÖŸÜ ŸàÿßŸÑÿ£Ÿäÿ≥ÿ± <span class="kw1c-term-nl">(Rechter- en linkerkant)</span>:</strong></p>
        <ul style="margin: 1rem 0; padding-right: 1.5rem; padding-left: 0;">
          <li><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£ŸäŸÖŸÜ <span class="kw1c-term-nl">(rechterkant)</span>:</strong> ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ ÿßŸÑŸÅŸÇŸäÿ± ÿ®ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ <span class="kw1c-term-nl">(zuurstofarm bloed)</span>. Ÿäÿ∞Ÿáÿ® ÿ•ŸÑŸâ ÿßŸÑÿ±ÿ¶ÿ™ŸäŸÜ <span class="kw1c-term-nl">(longen)</span>.</li>
          <li><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£Ÿäÿ≥ÿ± <span class="kw1c-term-nl">(linkerkant)</span>:</strong> ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ ÿßŸÑÿ∫ŸÜŸä ÿ®ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ <span class="kw1c-term-nl">(zuurstofrijk bloed)</span>. Ÿäÿ∞Ÿáÿ® ÿ•ŸÑŸâ ÿ¨ÿ≥ŸÖŸÉ.</li>
        </ul>

        <p><strong>ŸÉŸÖ ŸÖÿ±ÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉÿü <span class="kw1c-term-nl">(Hoe snel klopt je hart?)</span></strong></p>
        <p>ÿπÿßÿØÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉ 60 ÿ•ŸÑŸâ 100 ŸÖÿ±ÿ© ŸÅŸä ÿßŸÑÿØŸÇŸäŸÇÿ©. Ÿáÿ∞ÿß ŸÜÿ≥ŸÖŸäŸá ŸÜÿ®ÿ∂ ÿßŸÑŸÇŸÑÿ® <span class="kw1c-term-nl">(hartslag)</span>.</p>

        <!-- Placeholder for image -->
        <div style="background: #1e293b; border: 2px dashed var(--border); border-radius: 8px; padding: 3rem; text-align: center; margin: 1.5rem 0; direction: ltr;">
          <div style="font-size: 3rem; margin-bottom: 0.5rem;">ü´Ä</div>
          <div style="color: var(--text-muted); font-size: 0.875rem;">ÿµŸàÿ±ÿ©: ÿßŸÑŸÇŸÑÿ® - Afbeelding: Het hart</div>
        </div>

        <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid var(--ec-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; direction: ltr; text-align: left;">
          <p style="margin: 0 0 0.5rem 0;"><strong>üá≥üá± Nederlandse kernwoorden om te onthouden:</strong></p>
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">het hart</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">bloed</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">boezem</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">kamer</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">zuurstof</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">longen</span>
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">hartslag</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Student Level Settings -->
    <div class="kw1c-card" style="margin-top: 1rem;">
      <div class="kw1c-card-header">
        <h2 class="kw1c-card-title">üë• Taalniveau per student</h2>
        <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" data-cta-id="cta-kw1c-taal-manage-levels" data-action="action">
          Beheren ‚Üí
        </button>
      </div>
      <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
        Studenten zien automatisch de tekst op hun ingestelde taalniveau. Dit is instelbaar per student of per klas.
      </p>
      <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 150px;">
          <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">VIG-3A</div>
          <div style="display: flex; gap: 0.25rem;">
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.15); color: var(--ec-blue);">18√ó B2</span>
            <span class="kw1c-badge" style="background: rgba(249, 115, 22, 0.15); color: var(--ec-orange);">4√ó B1</span>
            <span class="kw1c-badge" style="background: rgba(34, 197, 94, 0.15); color: var(--ec-green);">2√ó A2</span>
          </div>
        </div>
        <div style="flex: 1; min-width: 150px;">
          <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">VP-4B</div>
          <div style="display: flex; gap: 0.25rem;">
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.15); color: var(--ec-blue);">16√ó B2</span>
            <span class="kw1c-badge" style="background: rgba(249, 115, 22, 0.15); color: var(--ec-orange);">2√ó B1</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== PANEL: TEACHERGPT ===== -->
  <section id="panel-teachergpt" class="kw1c-panel">
    <div class="kw1c-two-col">
      <!-- Left: Chat -->
      <div class="kw1c-chat-container" style="height: 600px;">
        <div class="kw1c-chat-header">
          <div>
            <strong style="display: flex; align-items: center; gap: 0.5rem;">
              ü§ñ e-Xpert SAM
              <span class="kw1c-badge" style="background: rgba(34, 197, 94, 0.15); color: var(--kd-covered);">Online</span>
            </strong>
            <div style="font-size: 0.75rem; color: var(--text-muted);">Slimme assistent voor docenten</div>
          </div>
          <select class="kw1c-select" style="width: auto; padding: 0.5rem;" data-cta-id="cta-kw1c-chat-scope-select" data-action="select">
            <option value="all" selected>Alle bronnen</option>
            <option value="materials">Mijn materialen</option>
            <option value="expertcollege">ExpertCollege corpus</option>
          </select>
        </div>

        <div class="kw1c-chat-messages">
          <!-- User message -->
          <div class="kw1c-chat-message user">
            <div class="kw1c-chat-avatar">MV</div>
            <div class="kw1c-chat-bubble">
              Hoe kan ik klinisch redeneren het beste uitleggen aan niveau 3 studenten?
            </div>
          </div>

          <!-- AI response -->
          <div class="kw1c-chat-message ai">
            <div class="kw1c-chat-avatar">ü§ñ</div>
            <div class="kw1c-chat-bubble">
              <p>Voor niveau 3 studenten is het belangrijk om klinisch redeneren stapsgewijs en praktijkgericht te benaderen. Hier zijn enkele effectieve strategie√´n:</p>
              
              <p><strong>1. Gebruik het ABCDE-model</strong><br>
              Begin met een eenvoudig stappenplan dat studenten kunnen onthouden. Het ABCDE-model (Airway, Breathing, Circulation, Disability, Exposure) geeft structuur aan hun observaties.</p>
              
              <p><strong>2. Werk met herkenbare casussen</strong><br>
              Gebruik situaties die studenten kunnen tegenkomen in de praktijk, zoals een bewoner die klaagt over pijn of vermoeidheid.</p>
              
              <p><strong>3. Visualiseer het denkproces</strong><br>
              Maak gebruik van denkschema's of mindmaps om te laten zien hoe observaties leiden tot conclusies.</p>
              
              <div class="kw1c-chat-citation" data-cta-id="cta-kw1c-chat-citation-0" data-action="action">
                üìö Bron: Verpleegkunde Basis, H3.2 - Klinisch Redeneren
              </div>
              <div class="kw1c-chat-citation" data-cta-id="cta-kw1c-chat-citation-1" data-action="action">
                üìö Bron: Didactiek in de Zorg, p. 45-52
              </div>
            </div>
          </div>

          <!-- User follow-up -->
          <div class="kw1c-chat-message user">
            <div class="kw1c-chat-avatar">MV</div>
            <div class="kw1c-chat-bubble">
              Kun je een voorbeeldcasus maken die ik morgen kan gebruiken?
            </div>
          </div>

          <!-- AI response with casus -->
          <div class="kw1c-chat-message ai">
            <div class="kw1c-chat-avatar">ü§ñ</div>
            <div class="kw1c-chat-bubble">
              <p><strong>Casus: Mevrouw De Groot</strong></p>
              
              <p>Mevrouw De Groot (82 jaar) woont in verzorgingshuis De Zonnehoek. Tijdens de ochtendzorg merk je dat ze anders reageert dan normaal. Ze is wat verward en weet niet welke dag het is. Haar huid voelt warm aan.</p>
              
              <p><strong>Vraag aan studenten:</strong></p>
              <ol>
                <li>Welke observaties doe je nog meer?</li>
                <li>Welke vitale functies ga je meten?</li>
                <li>Wat zou er aan de hand kunnen zijn?</li>
                <li>Welke actie onderneem je als eerste?</li>
              </ol>
              
              <p><em>Tip: Laat studenten eerst individueel nadenken, daarna in tweetallen bespreken.</em></p>
            </div>
          </div>
        </div>

        <div class="kw1c-chat-input-area">
          <input type="text" class="kw1c-chat-input" placeholder="Stel een vraag aan e-Xpert SAM..." data-cta-id="cta-kw1c-chat-input" data-action="edit">
          <button class="kw1c-btn kw1c-btn-primary" data-cta-id="cta-kw1c-chat-send" data-action="action">
            Verstuur
          </button>
        </div>
      </div>

      <!-- Right: Quick Actions & Tips -->
      <div>
        <div class="kw1c-card">
          <h2 class="kw1c-card-title">‚ö° Snelle vragen</h2>
          <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <button class="kw1c-btn kw1c-btn-secondary" style="text-align: left; justify-content: flex-start;" data-cta-id="cta-kw1c-chat-quick-0" data-action="action">
              üí° Hoe motiveer ik studenten voor BPV?
            </button>
            <button class="kw1c-btn kw1c-btn-secondary" style="text-align: left; justify-content: flex-start;" data-cta-id="cta-kw1c-chat-quick-1" data-action="action">
              üìù Maak een formatieve toets over...
            </button>
            <button class="kw1c-btn kw1c-btn-secondary" style="text-align: left; justify-content: flex-start;" data-cta-id="cta-kw1c-chat-quick-2" data-action="action">
              üéØ Welke KD-werkprocessen dekken...
            </button>
            <button class="kw1c-btn kw1c-btn-secondary" style="text-align: left; justify-content: flex-start;" data-cta-id="cta-kw1c-chat-quick-3" data-action="action">
              üìö Leg uit hoe EBP werkt voor...
            </button>
          </div>
        </div>

        <div class="kw1c-card">
          <h2 class="kw1c-card-title">üìñ Geraadpleegde bronnen</h2>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
            e-Xpert SAM doorzoekt automatisch:
          </p>
          <ul style="list-style: none; font-size: 0.875rem;">
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
              ‚úì Jouw ge√ºploade lesplannen en materialen
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
              ‚úì ExpertCollege e-learning modules
            </li>
            <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border);">
              ‚úì KD 2026 documentatie
            </li>
            <li style="padding: 0.5rem 0;">
              ‚úì Vakdidactische literatuur
            </li>
          </ul>
        </div>

        <div class="kw1c-card">
          <h2 class="kw1c-card-title">üîí Privacy</h2>
          <p style="font-size: 0.875rem; color: var(--text-secondary);">
            Gesprekken worden niet gedeeld met studenten of andere docenten. Data wordt verwerkt conform AVG.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== TOAST NOTIFICATION ===== -->
  <div id="toast" class="kw1c-toast">
    <span style="color: var(--kd-covered);">‚úì</span>
    <span id="toast-message">Actie voltooid</span>
  </div>

  <!-- ===== DRAWER OVERLAY + PANEL ===== -->
  <div id="drawer-overlay" class="kw1c-drawer-overlay" onclick="closeDrawer()"></div>
  <aside id="drawer" class="kw1c-drawer">
    <div class="kw1c-drawer-header">
      <div>
        <div id="drawer-title" class="kw1c-drawer-title">Drawer Title</div>
        <div id="drawer-subtitle" class="kw1c-drawer-subtitle"></div>
      </div>
      <button class="kw1c-drawer-close" onclick="closeDrawer()">√ó</button>
    </div>
    <div id="drawer-body" class="kw1c-drawer-body">
      <!-- Dynamic content -->
    </div>
    <div id="drawer-footer" class="kw1c-drawer-footer">
      <!-- Dynamic actions -->
    </div>
  </aside>

  <!-- ===== JAVASCRIPT FOR INTERACTIVITY ===== -->
  <script>
    // ========================================
    // SAMPLE DATA (Realistic KW1C-themed)
    // ========================================
    const SAMPLE_CLASSES = [
      { id: 'vig-3a', name: 'VIG-3A', program: 'Verzorgende IG', students: 24, progress: 82, levelDistribution: { B2: 18, B1: 4, A2: 2 } },
      { id: 'vp-4b', name: 'VP-4B', program: 'Verpleegkunde', students: 18, progress: 68, levelDistribution: { B2: 16, B1: 2, A2: 0 } },
      { id: 'combi-1', name: 'Combi-1', program: 'Basisjaar', students: 45, progress: 91, levelDistribution: { B2: 30, B1: 10, A2: 5 } }
    ];

    const SAMPLE_FILES = [
      { name: 'Lessenreeks_Klinisch_Redeneren_Week1-4.docx', size: '245 KB', date: '12 jan 2026' },
      { name: 'Lesplan_Vitale_Functies_Blok2.pdf', size: '1.2 MB', date: '10 jan 2026' },
      { name: 'Werkopdrachten_EBP_Module3.docx', size: '890 KB', date: '8 jan 2026' },
      { name: 'Toetsvragen_Anatomie_Hart.docx', size: '156 KB', date: '5 jan 2026' },
      { name: 'BPV_Opdrachten_Periode2.pdf', size: '2.1 MB', date: '3 jan 2026' }
    ];

    // WP-specific templates - used when a specific WP is manually selected
    const WP_TEMPLATES = {
      'WP1.1': {
        title: 'Werkopdracht: Systematische Gegevensverzameling',
        leerdoel: 'De student kan methodisch gegevens verzamelen over de gezondheidssituatie van een zorgvrager.',
        content: `<p><strong>Context:</strong></p>
          <p>Je krijgt een nieuwe zorgvrager toegewezen. Je moet een complete intake uitvoeren.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Voer een anamnesegesprek met de zorgvrager (gesimuleerd door medestudent)</li>
            <li>Observeer en documenteer relevante signalen</li>
            <li>Raadpleeg bestaande dossiergegevens</li>
            <li>Stel een volledig intakeformulier op</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì Alle relevante aandachtsgebieden zijn uitgevraagd</li>
            <li>‚úì Open vragen worden gebruikt</li>
            <li>‚úì Observaties zijn objectief geformuleerd</li>
            <li>‚úì Documentatie is volledig en leesbaar</li>
          </ul>`,
        duration: '60 minuten'
      },
      'WP1.2': {
        title: 'Werkopdracht: Communicatie met Zorgvrager en Familie',
        leerdoel: 'De student kan effectief en empathisch communiceren met zorgvragers en hun naasten.',
        content: `<p><strong>Context:</strong></p>
          <p>Meneer Bakker (74 jaar) is net opgenomen. Zijn dochter heeft veel vragen en zorgen.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Voer een kennismakingsgesprek met de zorgvrager</li>
            <li>Beantwoord vragen van de familie op begrijpelijke wijze</li>
            <li>Pas je communicatiestijl aan op de situatie</li>
            <li>Reflecteer op je eigen communicatie</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì Actief luisteren is zichtbaar</li>
            <li>‚úì Empathie wordt getoond</li>
            <li>‚úì Informatie is afgestemd op niveau ontvanger</li>
            <li>‚úì Non-verbale communicatie is professioneel</li>
          </ul>`,
        duration: '45 minuten'
      },
      'WP2.1': {
        title: 'Werkopdracht: Zorgplan Opstellen',
        leerdoel: 'De student kan een onderbouwd zorgplan opstellen met SMART-doelen.',
        content: `<p><strong>Context:</strong></p>
          <p>Mevrouw De Vries (68 jaar) heeft diabetes type 2 en moeite met mobiliteit na een heupoperatie.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Analyseer de verzamelde gegevens</li>
            <li>Formuleer minimaal 3 verpleegproblemen (PES)</li>
            <li>Stel SMART-doelen op voor elk probleem</li>
            <li>Beschrijf passende interventies</li>
            <li>Plan evaluatiemomenten</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì PES-structuur correct toegepast</li>
            <li>‚úì Doelen zijn SMART geformuleerd</li>
            <li>‚úì Interventies zijn onderbouwd</li>
            <li>‚úì Evaluatiecriteria zijn concreet</li>
          </ul>`,
        duration: '50 minuten'
      },
      'WP2.3': {
        title: 'Werkopdracht: Klinisch Redeneren bij Veranderende Situatie',
        leerdoel: 'De student kan klinisch redeneren bij een veranderende gezondheidssituatie.',
        content: `<p><strong>Context:</strong></p>
          <p>Meneer Jansen (81 jaar) met hartfalen wordt plotseling onrustig en kortademig.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Voer een snelle beoordeling uit (ABCDE)</li>
            <li>Analyseer de situatie: wat is er aan de hand?</li>
            <li>Bepaal de urgentie</li>
            <li>Onderneem passende actie</li>
            <li>Documenteer volgens SBAR</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì Systematische beoordeling uitgevoerd</li>
            <li>‚úì Juiste conclusies getrokken</li>
            <li>‚úì Urgentie correct ingeschat</li>
            <li>‚úì SBAR-overdracht volledig</li>
          </ul>`,
        duration: '30 minuten'
      },
      'WP3.1': {
        title: 'Werkopdracht: Verpleegtechnische Handeling',
        leerdoel: 'De student voert een verpleegtechnische handeling veilig en hygi√´nisch uit.',
        content: `<p><strong>Context:</strong></p>
          <p>Je moet een blaaskatheter verzorgen bij een zorgvrager op de afdeling.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Bereid de handeling voor (materiaal, omgeving, zorgvrager)</li>
            <li>Pas handhygi√´ne en aseptische techniek toe</li>
            <li>Voer de katheterverzorging uit volgens protocol</li>
            <li>Observeer en documenteer bevindingen</li>
            <li>Evalueer met de zorgvrager</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì Handhygi√´ne correct uitgevoerd</li>
            <li>‚úì Protocol wordt gevolgd</li>
            <li>‚úì Zorgvrager is ge√Ønformeerd en comfortabel</li>
            <li>‚úì Complicaties worden herkend</li>
          </ul>`,
        duration: '40 minuten'
      },
      'WP3.2': {
        title: 'Werkopdracht: Medicatietoediening',
        leerdoel: 'De student past de 5-juistheden toe bij medicatietoediening.',
        content: `<p><strong>Context:</strong></p>
          <p>Je deelt de avondmedicatie uit aan 3 bewoners met verschillende medicatieschema's.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Controleer de medicatielijsten op volledigheid</li>
            <li>Pas de 5-juistheden toe bij elke toediening</li>
            <li>Herken minimaal 1 mogelijke interactie of contra-indicatie</li>
            <li>Documenteer de toediening correct</li>
            <li>Leg uit wat je doet bij een afwijking</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì 5-juistheden consequent toegepast</li>
            <li>‚úì Interacties/contra-indicaties herkend</li>
            <li>‚úì Bij twijfel wordt overlegd</li>
            <li>‚úì Documentatie is direct en volledig</li>
          </ul>`,
        duration: '35 minuten'
      },
      'WP4.1': {
        title: 'Werkopdracht: Evaluatie van Zorg',
        leerdoel: 'De student evalueert systematisch of de zorgdoelen zijn behaald.',
        content: `<p><strong>Context:</strong></p>
          <p>Mevrouw Smit heeft 2 weken geleden een zorgplan gekregen. Het is tijd voor evaluatie.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Beoordeel per doel of het is behaald</li>
            <li>Verzamel evaluatiegegevens (observatie, meting, gesprek)</li>
            <li>Analyseer wat wel/niet werkte en waarom</li>
            <li>Stel het zorgplan bij waar nodig</li>
            <li>Bespreek de evaluatie met de zorgvrager</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì Doelen zijn meetbaar ge√´valueerd</li>
            <li>‚úì Analyse is onderbouwd</li>
            <li>‚úì Bijstellingen zijn logisch</li>
            <li>‚úì Zorgvrager is betrokken bij evaluatie</li>
          </ul>`,
        duration: '45 minuten'
      },
      'WP5.2': {
        title: 'Werkopdracht: Reflectie op Professioneel Handelen',
        leerdoel: 'De student reflecteert systematisch op eigen handelen en formuleert leerpunten.',
        content: `<p><strong>Context:</strong></p>
          <p>Je hebt een lastige situatie meegemaakt: een zorgvrager werd boos tijdens de zorg.</p>
          <p><strong>Opdracht:</strong></p>
          <ul>
            <li>Beschrijf de situatie objectief (STARR)</li>
            <li>Analyseer je eigen handelen en emoties</li>
            <li>Koppel aan relevante theorie/richtlijnen</li>
            <li>Formuleer concrete leerpunten</li>
            <li>Maak een actieplan voor de toekomst</li>
          </ul>
          <p><strong>Beoordelingscriteria:</strong></p>
          <ul>
            <li>‚úì STARR volledig ingevuld</li>
            <li>‚úì Zelfinzicht is zichtbaar</li>
            <li>‚úì Theorie wordt gekoppeld aan praktijk</li>
            <li>‚úì Leerpunten zijn concreet en haalbaar</li>
          </ul>`,
        duration: '30 minuten'
      }
    };

    const MODULE_TEMPLATES = {
      'klinisch-redeneren': {
        name: 'Klinisch Redeneren bij Pijn',
        werkopdracht: {
          title: 'Werkopdracht: Klinisch Redeneren bij Pijn',
          leerdoel: 'De student kan een gestructureerde pijnanamnese afnemen volgens de ALTIS-methode.',
          wp: 'WP2.3',
          context: 'Mevrouw Jansen (78 jaar) is opgenomen met buikklachten en geeft aan pijn te hebben.',
          keywords: ['ALTIS', 'pijnanamnese', 'verpleegkundige diagnose'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Je werkt vandaag op de afdeling Interne Geneeskunde. Mevrouw Jansen (78 jaar) is opgenomen met buikklachten. Ze geeft aan pijn te hebben, maar kan dit moeilijk onder woorden brengen.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Neem een volledige pijnanamnese af bij een medestudent (die de rol van mevrouw Jansen speelt)</li>
              <li>Gebruik hierbij de ALTIS-methode (Aard, Lokalisatie, Tijdsduur, Intensiteit, Samenhang)</li>
              <li>Leg je bevindingen vast in het digitale zorgleefplan</li>
              <li>Formuleer minimaal 2 verpleegkundige diagnoses op basis van je bevindingen</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Alle ALTIS-componenten worden systematisch uitgevraagd</li>
              <li>‚úì Open vragen worden gebruikt om de zorgvrager te laten vertellen</li>
              <li>‚úì Non-verbale pijnsignalen worden herkend en benoemd</li>
              <li>‚úì Bevindingen worden correct en volledig genoteerd</li>
              <li>‚úì Verpleegkundige diagnoses zijn onderbouwd</li>
            </ul>`,
          duration: '45 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Klinisch Redeneren bij Pijn',
          questions: [
            { q: 'Waar staat ALTIS voor?', a: 'Aard, Lokalisatie, Tijdsduur, Intensiteit, Samenhang' },
            { q: 'Wat is het doel van klinisch redeneren?', a: 'Systematisch analyseren van gezondheidsproblemen om tot een diagnose te komen' },
            { q: 'Noem 3 observaties bij pijn.', a: 'Gezichtsuitdrukking, houding, verbale uitingen' },
            { q: 'Wat is een VAS-score?', a: 'Visueel Analoge Schaal voor pijnintensiteit (0-10)' },
            { q: 'Wanneer is pijn chronisch?', a: 'Als pijn langer dan 3 maanden aanhoudt' },
            { q: 'Wat is het verschil tussen acute en chronische pijn?', a: 'Acute pijn is een waarschuwingssignaal, chronische pijn heeft geen beschermende functie meer' },
            { q: 'Welke pijnschaal gebruik je bij niet-communicatieve zorgvragers?', a: 'PAINAD of REPOS schaal' },
            { q: 'Wat zijn de 4 dimensies van pijn?', a: 'Sensorisch, affectief, cognitief, gedragsmatig' },
            { q: 'Noem 2 niet-medicamenteuze pijninterventies.', a: 'Warmte/koude, afleiding, massage, ontspanningsoefeningen' },
            { q: 'Wanneer schakel je een pijnteam in?', a: 'Bij complexe, moeilijk behandelbare pijn of bij onvoldoende effect van standaardbehandeling' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Klinisch Redeneren bij Pijn',
          casus: 'Meneer Bakker (72 jaar) komt op de SEH met ernstige buikpijn. Hij is bleek, zweterig en kan moeilijk stil liggen.',
          questions: [
            { q: 'Welke observatie heeft de hoogste prioriteit?', options: ['A. Temperatuur meten', 'B. Pols en bloeddruk meten', 'C. ALTIS-anamnese afnemen', 'D. Pijnmedicatie geven'], correct: 'B' },
            { q: 'Welke ALTIS-component geeft informatie over ernst van de pijn?', options: ['A. Aard', 'B. Lokalisatie', 'C. Tijdsduur', 'D. Intensiteit'], correct: 'D' }
          ]
        }
      },
      'ebp': {
        name: 'Evidence Based Practice (EBP)',
        werkopdracht: {
          title: 'Werkopdracht: Evidence Based Practice',
          leerdoel: 'De student kan een klinische vraag formuleren en relevante literatuur zoeken.',
          wp: 'WP1.1',
          context: 'Je wilt weten of muziektherapie effectief is bij dementie.',
          keywords: ['PICO', 'literatuur', 'betrouwbaarheid', 'niveau van bewijs'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Je werkt op een verpleegafdeling waar veel zorgvragers met dementie verblijven. Een collega vraagt je: "Is muziektherapie eigenlijk wel effectief?"</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Formuleer een PICO-vraag over muziektherapie bij dementie</li>
              <li>Zoek minimaal 2 wetenschappelijke bronnen (PubMed, Cochrane)</li>
              <li>Beoordeel de betrouwbaarheid van de gevonden bronnen</li>
              <li>Formuleer een advies voor je team gebaseerd op het bewijs</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì PICO-vraag is volledig en correct geformuleerd</li>
              <li>‚úì Bronnen zijn wetenschappelijk en actueel</li>
              <li>‚úì Critical appraisal is uitgevoerd</li>
              <li>‚úì Advies is onderbouwd met bewijs</li>
            </ul>`,
          duration: '60 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Evidence Based Practice',
          questions: [
            { q: 'Waar staat PICO voor?', a: 'Patient, Intervention, Comparison, Outcome' },
            { q: 'Wat is een systematic review?', a: 'Samenvatting van alle beschikbare onderzoek over een onderwerp' },
            { q: 'Noem 2 betrouwbare bronnen.', a: 'PubMed, Cochrane Library, V&VN kennisbanken' },
            { q: 'Wat is level 1 evidence?', a: 'Bewijs uit systematic reviews van RCTs' },
            { q: 'Wat betekent "critical appraisal"?', a: 'Kritisch beoordelen van onderzoekskwaliteit' },
            { q: 'Wat is het verschil tussen RCT en observationeel onderzoek?', a: 'RCT heeft willekeurige toewijzing aan groepen, observationeel niet' },
            { q: 'Waarom is EBP belangrijk in de zorg?', a: 'Voor effectieve, veilige en pati√´ntgerichte zorg gebaseerd op beste beschikbare bewijs' },
            { q: 'Wat is de piramide van bewijskracht?', a: 'Hi√´rarchie van onderzoekstypen van case reports tot systematic reviews' },
            { q: 'Noem de 3 pijlers van EBP.', a: 'Wetenschappelijk bewijs, klinische expertise, pati√´ntvoorkeuren' },
            { q: 'Wat is een meta-analyse?', a: 'Statistische samenvatting van resultaten uit meerdere studies' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Evidence Based Practice',
          casus: 'Je leest een artikel over wondzorg. Het betreft een RCT met 120 pati√´nten die de effectiviteit van honingverbanden vergelijkt met standaardverbanden.',
          questions: [
            { q: 'Welk niveau van bewijs is dit onderzoek?', options: ['A. Level 1', 'B. Level 2', 'C. Level 3', 'D. Level 4'], correct: 'B' },
            { q: 'Wat is het belangrijkste kenmerk van een RCT?', options: ['A. Veel deelnemers', 'B. Lange follow-up', 'C. Random toewijzing', 'D. Dubbele blindering'], correct: 'C' }
          ]
        }
      },
      'digitale-vaardigheden': {
        name: 'Digitale Vaardigheden in de Zorg',
        werkopdracht: {
          title: 'Werkopdracht: Digitale Vaardigheden',
          leerdoel: 'De student kan veilig omgaan met digitale zorgsystemen en pati√´ntgegevens.',
          wp: 'WP1.2',
          context: 'Je werkt met een elektronisch pati√´ntendossier (EPD) op de afdeling.',
          keywords: ['EPD', 'privacy', 'AVG', 'authenticatie'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Je werkt op een verpleegafdeling met een nieuw EPD-systeem. Je moet een nieuwe zorgvrager registreren en gegevens invoeren.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Log veilig in op het EPD-systeem met two-factor authenticatie</li>
              <li>Registreer een fictieve zorgvrager met alle verplichte velden</li>
              <li>Voer de anamnese in volgens de AVG-richtlijnen</li>
              <li>Leg uit aan een collega hoe je veilig uitlogt</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Correct gebruik van inlogprocedure</li>
              <li>‚úì Alle verplichte velden zijn ingevuld</li>
              <li>‚úì Geen privacygevoelige informatie op scherm achtergelaten</li>
              <li>‚úì Correct uitloggen wordt gedemonstreerd</li>
            </ul>`,
          duration: '30 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Digitale Vaardigheden in de Zorg',
          questions: [
            { q: 'Wat is een EPD?', a: 'Elektronisch Pati√´nten Dossier' },
            { q: 'Wat betekent AVG?', a: 'Algemene Verordening Gegevensbescherming' },
            { q: 'Waarom is two-factor authenticatie belangrijk?', a: 'Extra beveiligingslaag voor toegang tot gevoelige data' },
            { q: 'Mag je pati√´ntgegevens via WhatsApp delen?', a: 'Nee, dit is niet AVG-compliant' },
            { q: 'Wat doe je bij een datalek?', a: 'Direct melden bij leidinggevende en FG' },
            { q: 'Wat is een clean desk policy?', a: 'Geen vertrouwelijke documenten zichtbaar achterlaten op bureau' },
            { q: 'Hoe lang mogen medische gegevens bewaard worden?', a: 'Minimaal 20 jaar na laatste behandeling (WGBO)' },
            { q: 'Wat is phishing?', a: 'Frauduleuze e-mails om inloggegevens te stelen' },
            { q: 'Wie is de FG?', a: 'Functionaris Gegevensbescherming - verantwoordelijke voor privacy' },
            { q: 'Mag een zorgvrager zijn eigen dossier inzien?', a: 'Ja, dit is een recht onder de AVG' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Digitale Vaardigheden',
          casus: 'Je collega vraagt of je even snel haar inloggegevens wilt gebruiken om iets in het EPD te checken. Haar computer staat nog open.',
          questions: [
            { q: 'Wat is de juiste reactie?', options: ['A. Even snel kijken, scheelt tijd', 'B. Nee zeggen en uitleggen waarom', 'C. Alleen als het dringend is', 'D. Ja, als zij erbij blijft'], correct: 'B' },
            { q: 'Welke wet schrijft voor hoe je met medische gegevens omgaat?', options: ['A. WGBO', 'B. AVG', 'C. Beide', 'D. Geen van beide'], correct: 'C' }
          ]
        }
      },
      'medicatieveiligheid': {
        name: 'Medicatieveiligheid',
        werkopdracht: {
          title: 'Werkopdracht: Medicatieveiligheid',
          leerdoel: 'De student past de 5-juistheden toe bij medicatietoediening.',
          wp: 'WP3.2',
          context: 'Je moet medicatie uitdelen aan 4 bewoners op de afdeling.',
          keywords: ['5-juistheden', 'contra-indicaties', 'bijwerkingen'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Je bent verantwoordelijk voor de medicatieronde op afdeling. Je hebt 4 bewoners die hun ochtendmedicatie moeten krijgen.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Controleer de medicatielijsten op de 5 juistheden</li>
              <li>Identificeer mogelijke interacties of contra-indicaties</li>
              <li>Bereid de medicatie voor in een schone omgeving</li>
              <li>Deel de medicatie uit en observeer inname</li>
              <li>Documenteer direct na toediening</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì 5 juistheden worden consequent toegepast</li>
              <li>‚úì Medicatie wordt hygi√´nisch voorbereid</li>
              <li>‚úì Bewoner wordt ge√Ødentificeerd voor toediening</li>
              <li>‚úì Documentatie is volledig en tijdig</li>
            </ul>`,
          duration: '45 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Medicatieveiligheid',
          questions: [
            { q: 'Noem de 5 juistheden.', a: 'Juiste pati√´nt, medicijn, dosering, toedieningsweg, tijdstip' },
            { q: 'Wat is een contra-indicatie?', a: 'Reden om een medicijn NIET te geven' },
            { q: 'Wat doe je bij twijfel over medicatie?', a: 'Altijd overleggen met zorgprofessional of arts' },
            { q: 'Wat is high-risk medicatie?', a: 'Medicatie met verhoogd risico op ernstige bijwerkingen (bv. insuline)' },
            { q: 'Hoe documenteer je medicatietoediening?', a: 'Direct na toediening in het medicatiesysteem' },
            { q: 'Wat is een bijwerking?', a: 'Ongewenst effect van een medicijn naast het beoogde effect' },
            { q: 'Wat betekent p.o.?', a: 'Per os - via de mond innemen' },
            { q: 'Wat is een interactie?', a: 'Wisselwerking tussen medicijnen onderling of met voedsel' },
            { q: 'Wanneer mag je medicatie weigeren te geven?', a: 'Bij twijfel over juistheid of bij duidelijke contra-indicatie' },
            { q: 'Wat is een MIP-melding?', a: 'Melding Incidenten Pati√´ntenzorg - melding van (bijna)fouten' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Medicatieveiligheid',
          casus: 'Mevrouw Smit (85 jaar) heeft insuline voorgeschreven. Je ziet dat haar bloedsuiker 3.2 mmol/L is. Zij geeft aan zich duizelig te voelen.',
          questions: [
            { q: 'Wat is je eerste actie?', options: ['A. Insuline toedienen zoals voorgeschreven', 'B. Eerst snelle suikers geven', 'C. Afwachten en opnieuw meten', 'D. Direct arts bellen'], correct: 'B' },
            { q: 'Wat is een normaal nuchter bloedsuiker?', options: ['A. 2-4 mmol/L', 'B. 4-6 mmol/L', 'C. 6-8 mmol/L', 'D. 8-10 mmol/L'], correct: 'B' }
          ]
        }
      },
      'vitale-functies': {
        name: 'Vitale Functies',
        werkopdracht: {
          title: 'Werkopdracht: Vitale Functies Meten',
          leerdoel: 'De student kan vitale functies correct meten, interpreteren en rapporteren.',
          wp: 'WP1.1',
          context: 'Je moet de vitale functies controleren bij een zorgvrager met koorts.',
          keywords: ['bloeddruk', 'pols', 'temperatuur', 'saturatie', 'NEWS-score'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Mevrouw De Groot (67 jaar) is opgenomen met vermoeidheid en koorts. Je moet haar vitale functies controleren en de NEWS-score berekenen.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Meet bloeddruk, pols, temperatuur, ademfrequentie en saturatie</li>
              <li>Bereken de NEWS-score</li>
              <li>Interpreteer de waarden en bepaal afwijkingen</li>
              <li>Rapporteer je bevindingen volgens SBAR</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Alle metingen worden correct uitgevoerd</li>
              <li>‚úì NEWS-score is juist berekend</li>
              <li>‚úì Afwijkende waarden worden herkend</li>
              <li>‚úì Rapportage is volledig en volgens SBAR</li>
            </ul>`,
          duration: '30 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Vitale Functies',
          questions: [
            { q: 'Wat zijn de 5 vitale functies?', a: 'Bloeddruk, pols, temperatuur, ademfrequentie, saturatie' },
            { q: 'Wat is een normale hartslag bij volwassenen?', a: '60-100 slagen per minuut' },
            { q: 'Wanneer is bloeddruk te hoog?', a: 'Systolisch >140 of diastolisch >90 mmHg' },
            { q: 'Wat betekent NEWS?', a: 'National Early Warning Score' },
            { q: 'Bij welke saturatie is zuurstof nodig?', a: 'Meestal onder 92-94%' },
            { q: 'Wat is een normale lichaamstemperatuur?', a: '36.5-37.5¬∞C' },
            { q: 'Wat is bradycardie?', a: 'Hartslag lager dan 60 slagen per minuut' },
            { q: 'Wat is een normale ademfrequentie?', a: '12-20 ademhalingen per minuut' },
            { q: 'Waar staat SBAR voor?', a: 'Situation, Background, Assessment, Recommendation' },
            { q: 'Wat betekent een NEWS-score van 5 of hoger?', a: 'Urgente beoordeling door arts nodig' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Vitale Functies',
          casus: 'Je meet de vitale functies: bloeddruk 90/50 mmHg, pols 110/min, temperatuur 38.5¬∞C, ademfrequentie 24/min, saturatie 91%.',
          questions: [
            { q: 'Welke waarde wijst op tachycardie?', options: ['A. Bloeddruk 90/50', 'B. Pols 110/min', 'C. Ademfrequentie 24', 'D. Saturatie 91%'], correct: 'B' },
            { q: 'Wat is je eerste actie bij deze combinatie van waarden?', options: ['A. Afwachten en na 1 uur opnieuw meten', 'B. Direct arts informeren', 'C. Zorgvrager meer laten drinken', 'D. Zuurstof geven op eigen initiatief'], correct: 'B' }
          ]
        }
      },
      'verpleegplan': {
        name: 'Verpleegplan Opstellen',
        werkopdracht: {
          title: 'Werkopdracht: Verpleegplan Opstellen',
          leerdoel: 'De student kan een verpleegplan opstellen met PES-structuur.',
          wp: 'WP2.1',
          context: 'Je moet een verpleegplan schrijven voor een zorgvrager met mobiliteitsbeperking.',
          keywords: ['PES', 'verpleegkundige diagnose', 'doelen', 'interventies'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Meneer Jansen (75 jaar) is opgenomen na een heupoperatie. Hij heeft moeite met mobiliteit en is bang om te vallen.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Verzamel relevante gegevens over de zorgvrager</li>
              <li>Formuleer minimaal 2 verpleegkundige diagnoses in PES-structuur</li>
              <li>Stel SMART-doelen op voor elk probleem</li>
              <li>Beschrijf passende interventies</li>
              <li>Bepaal evaluatiemomenten</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì PES-structuur is correct toegepast</li>
              <li>‚úì Doelen zijn SMART geformuleerd</li>
              <li>‚úì Interventies zijn onderbouwd en uitvoerbaar</li>
              <li>‚úì Evaluatiemomenten zijn gepland</li>
            </ul>`,
          duration: '50 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Verpleegplan',
          questions: [
            { q: 'Waar staat PES voor?', a: 'Probleem, Etiologie, Symptomen' },
            { q: 'Wat zijn SMART-doelen?', a: 'Specifiek, Meetbaar, Acceptabel, Realistisch, Tijdgebonden' },
            { q: 'Wat is een verpleegkundige interventie?', a: 'Handeling om verpleegdoel te bereiken' },
            { q: 'Hoe vaak evalueer je een verpleegplan?', a: 'Minimaal wekelijks of bij verandering' },
            { q: 'Wat is het verschil tussen zorgplan en verpleegplan?', a: 'Verpleegplan is specifieker en probleemgericht' },
            { q: 'Wat is de E in PES?', a: 'Etiologie - de oorzaak of gerelateerde factor' },
            { q: 'Noem een voorbeeld van een verpleegkundige diagnose.', a: 'Verstoorde mobiliteit gerelateerd aan pijn, zich uitend in moeite met lopen' },
            { q: 'Wat betekent de A in SMART?', a: 'Acceptabel - het doel moet voor de zorgvrager acceptabel zijn' },
            { q: 'Wie is betrokken bij het opstellen van een verpleegplan?', a: 'Zorgprofessional, zorgvrager en indien gewenst familie' },
            { q: 'Wat is een outcome-indicator?', a: 'Meetbare uitkomst om te bepalen of het doel is bereikt' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Verpleegplan',
          casus: 'Mevrouw De Wit (68 jaar) heeft diabetes en een voetulcus. Je formuleert de diagnose: "Verstoorde huidintegriteit gerelateerd aan verminderde circulatie, zich uitend in open wond aan voet."',
          questions: [
            { q: 'Welk element is de "P" in deze PES?', options: ['A. Diabetes', 'B. Verstoorde huidintegriteit', 'C. Verminderde circulatie', 'D. Open wond aan voet'], correct: 'B' },
            { q: 'Welk doel is SMART?', options: ['A. Wond geneest snel', 'B. Zorgvrager voelt zich beter', 'C. Wond is 50% kleiner binnen 2 weken', 'D. Zorgvrager krijgt goede zorg'], correct: 'C' }
          ]
        }
      },
      'anatomie-hart': {
        name: 'Anatomie - Het Hart',
        werkopdracht: {
          title: 'Werkopdracht: Anatomie van het Hart',
          leerdoel: 'De student kan de anatomie van het hart beschrijven en relateren aan functie.',
          wp: 'WP2.3',
          context: 'Leg aan een zorgvrager uit hoe zijn hart werkt.',
          keywords: ['hartkamers', 'kleppen', 'bloedcirculatie', 'coronairarteri√´n'],
          fullContent: `<p><strong>Opdracht:</strong></p>
            <p>Een zorgvrager met hartklachten vraagt je uit te leggen hoe het hart werkt. Hij is bezorgd na zijn diagnose.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Teken een eenvoudige schets van het hart met de 4 compartimenten</li>
              <li>Leg de bloedstroom door het hart uit in begrijpelijke taal</li>
              <li>Benoem de functie van de hartkleppen</li>
              <li>Leg uit wat de coronairarteri√´n doen</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Anatomie wordt correct beschreven</li>
              <li>‚úì Uitleg is begrijpelijk voor een leek</li>
              <li>‚úì Relatie tussen structuur en functie wordt gelegd</li>
              <li>‚úì Zorgvrager voelt zich gerustgesteld</li>
            </ul>`,
          duration: '30 minuten'
        },
        kennischeck: {
          title: 'Kennischeck: Anatomie van het Hart',
          questions: [
            { q: 'Hoeveel hartkamers heeft het hart?', a: '4: 2 boezems (atria) en 2 kamers (ventrikels)' },
            { q: 'Wat is de functie van de mitralisklep?', a: 'Voorkomt terugstroom van linker ventrikel naar linker atrium' },
            { q: 'Waar liggen de coronairarteri√´n?', a: 'Op het hartoppervlak, voorzien de hartspier van zuurstofrijk bloed' },
            { q: 'Wat doet de sinusknoop?', a: 'Start de elektrische impuls voor de hartslag (pacemaker van het hart)' },
            { q: 'Wat is het verschil tussen arteri√´n en venen?', a: 'Arteri√´n voeren bloed van hart af, venen voeren bloed naar hart toe' },
            { q: 'Welke harthelft pompt naar de longen?', a: 'De rechter harthelft' },
            { q: 'Wat is de aorta?', a: 'De grootste slagader, voert zuurstofrijk bloed van linker ventrikel naar het lichaam' },
            { q: 'Wat is de functie van het hartzakje (pericard)?', a: 'Beschermt het hart en vermindert wrijving bij hartslag' },
            { q: 'Hoeveel kleppen heeft het hart?', a: '4 kleppen: mitralis, tricuspidalis, aorta, pulmonalis' },
            { q: 'Wat is een hartinfarct?', a: 'Afsterven van hartspierweefsel door afgesloten coronairarterie' }
          ]
        },
        toetsvraag: {
          title: 'Toetsvraag: Anatomie van het Hart',
          casus: 'Een zorgvrager vraagt: "De dokter zei dat mijn mitralisklep lekt. Wat betekent dat?"',
          questions: [
            { q: 'Waar zit de mitralisklep?', options: ['A. Tussen rechter boezem en kamer', 'B. Tussen linker boezem en kamer', 'C. Tussen hart en longen', 'D. Tussen hart en aorta'], correct: 'B' },
            { q: 'Wat is het gevolg van een lekkende mitralisklep?', options: ['A. Bloed stroomt terug naar de boezem', 'B. Bloed stroomt naar de longen', 'C. Hart stopt met kloppen', 'D. Bloeddruk stijgt direct'], correct: 'A' }
          ]
        }
      }
    };

    const KD_MAPPINGS = {
      'vig-2026': {
        title: 'Verzorgende IG (2026)',
        rows: [
          { les: 'Les 1: Vitale functies meten', desc: 'Informatie verzamelen over een zorgvrager', wp: 'WP1.1', status: 'full' },
          { les: 'Les 2: Klinisch redeneren basis', desc: 'Inschatten wat er met een zorgvrager aan de hand is', wp: 'WP2.3', status: 'full' },
          { les: 'Les 3: Medicatieveiligheid', desc: 'Veilig omgaan met medicijnen', wp: 'WP3.2', status: 'full' },
          { les: 'Les 4: Verpleegplan opstellen', desc: 'Een zorgplan schrijven', wp: 'WP2.1', status: 'full' },
          { les: 'Les 5: Zorgvrager communicatie', desc: 'Goed communiceren met zorgvragers', wp: 'WP1.3', status: 'full' },
          { les: 'Les 6: Hygi√´ne protocollen', desc: 'Verpleegtechnische handelingen uitvoeren', wp: 'WP3.1', status: 'full' },
          { les: '-', desc: 'Kijken of de zorg goed werkt', wp: 'WP4.1', status: 'gap' },
          { les: '-', desc: 'Nadenken over je eigen handelen', wp: 'WP5.2', status: 'gap' }
        ],
        coverage: '12/14'
      },
      'verpleegkunde-2026': {
        title: 'MBO Verpleegkundige (2026)',
        rows: [
          { les: 'Les 1: Anamnese afnemen', desc: 'Systematisch gegevens verzamelen en analyseren', wp: 'WP1.1', status: 'full' },
          { les: 'Les 2: Verpleegkundige diagnose', desc: 'Verpleegkundige diagnoses stellen (PES)', wp: 'WP1.2', status: 'full' },
          { les: 'Les 3: Evidence Based Practice', desc: 'Wetenschappelijk onderbouwd werken', wp: 'WP1.3', status: 'partial' },
          { les: 'Les 4: Complexe zorg co√∂rdineren', desc: 'Zorg organiseren bij meerdere aandoeningen', wp: 'WP2.1', status: 'full' },
          { les: 'Les 5: Klinisch redeneren gevorderd', desc: 'Klinisch redeneren bij complexe casu√Østiek', wp: 'WP2.2', status: 'full' },
          { les: '-', desc: 'Regievoeren over het zorgproces', wp: 'WP2.3', status: 'gap' },
          { les: 'Les 6: Verpleegtechniek niveau 4', desc: 'Complexe verpleegtechnische handelingen', wp: 'WP3.1', status: 'full' },
          { les: '-', desc: 'Begeleiden van collega\'s en studenten', wp: 'WP4.1', status: 'gap' }
        ],
        coverage: '10/16'
      },
      'niveau3-2026': {
        title: 'Verpleegkunde Niveau 3 (2026)',
        rows: [
          { les: 'Les 1: Observeren en rapporteren', desc: 'Signalen bij zorgvragers herkennen', wp: 'WP1.1', status: 'full' },
          { les: 'Les 2: Basis ADL-ondersteuning', desc: 'Ondersteunen bij dagelijkse activiteiten', wp: 'WP2.1', status: 'full' },
          { les: 'Les 3: Communicatie basistechnieken', desc: 'Effectief communiceren met zorgvrager en familie', wp: 'WP1.2', status: 'full' },
          { les: '-', desc: 'Werken volgens zorgplan', wp: 'WP2.2', status: 'partial' },
          { les: 'Les 4: Basis verpleegtechniek', desc: 'Eenvoudige verpleegtechnische handelingen', wp: 'WP3.1', status: 'full' },
          { les: '-', desc: 'Samenwerken in het team', wp: 'WP4.1', status: 'gap' }
        ],
        coverage: '8/12'
      }
    };

    const SAMPLE_STUDENTS = [
      { id: 's0', name: 'Sophie M.', initials: 'SM', class: 'VIG-3A', level: 'B1', progress: 54, issue: 'Achterstand bij Klinisch Redeneren', missedAssignments: 2, kdGaps: ['WP2.3', 'WP4.1'], risk: 'high' },
      { id: 's1', name: 'Ahmed K.', initials: 'AK', class: 'VP-4B', level: 'B2', progress: 71, issue: '3 gemiste opdrachten', missedAssignments: 3, kdGaps: ['WP5.2'], risk: 'medium' },
      { id: 's2', name: 'Lisa v.D.', initials: 'LV', class: 'VIG-3A', level: 'A2', progress: 45, issue: 'Taalniveau ondersteuning nodig', missedAssignments: 1, kdGaps: ['WP1.1', 'WP2.3', 'WP3.2'], risk: 'high' },
      { id: 's3', name: 'Mohammed B.', initials: 'MB', class: 'Combi-1', level: 'B2', progress: 88, issue: null, missedAssignments: 0, kdGaps: [], risk: 'low' },
      { id: 's4', name: 'Emma J.', initials: 'EJ', class: 'VIG-3A', level: 'B2', progress: 92, issue: null, missedAssignments: 0, kdGaps: [], risk: 'low' },
      { id: 's5', name: 'Fatima A.', initials: 'FA', class: 'VP-4B', level: 'B1', progress: 67, issue: 'BPV-beoordeling pending', missedAssignments: 1, kdGaps: ['WP4.1'], risk: 'medium' }
    ];

    const SAMPLE_KD_GAPS = [
      { 
        code: 'WP1.1', 
        title: 'Informatie verzamelen over de zorgvrager',
        originalTitle: 'Verzamelt gegevens over de gezondheidssituatie',
        reason: 'Deze student mist oefening in het systematisch verzamelen van informatie over zorgvragers.',
        whyImportant: 'Goede gegevensverzameling is de basis van alle zorg. Zonder complete informatie kun je geen goede zorg plannen.',
        suggestedModule: 'Module: Anamnese & Gegevensverzameling', 
        suggestedActivity: 'Oefen een intake-gesprek met een medestudent als simulatiezorgvrager',
        actionForStudent: 'Oefen met het afnemen van een anamnese. Gebruik het SAMPLE-formulier en oefen met een medestudent.'
      },
      { 
        code: 'WP2.3', 
        title: 'Klinisch redeneren en conclusies trekken',
        originalTitle: 'Stelt verpleegkundige diagnoses',
        reason: 'Deze student heeft moeite met het verbinden van signalen tot een conclusie.',
        whyImportant: 'Klinisch redeneren is essentieel om te bepalen welke zorg een zorgvrager nodig heeft.',
        suggestedModule: 'Module: Klinisch Redeneren bij Pijn', 
        suggestedActivity: 'Werk aan casussen waarbij je observaties moet koppelen aan mogelijke oorzaken',
        actionForStudent: 'Maak de extra oefencasussen in de e-learning module Klinisch Redeneren. Focus op het "waarom" achter je observaties.'
      },
      { 
        code: 'WP3.2', 
        title: 'Verpleegtechnische handelingen uitvoeren',
        originalTitle: 'Voert verpleegtechnische handelingen uit',
        reason: 'Deze student heeft extra oefening nodig met verpleegtechnische vaardigheden.',
        whyImportant: 'Veilig en correct uitvoeren van handelingen is cruciaal voor de zorgvrager.',
        suggestedModule: 'Module: Verpleegtechniek & Veiligheid', 
        suggestedActivity: 'Plan extra oefenmomenten in het skillslab voor verpleegtechnische handelingen',
        actionForStudent: 'Meld je aan voor extra skillslab-uren. Oefen de handelingen stap voor stap met de checklist erbij.'
      },
      { 
        code: 'WP4.1', 
        title: 'Kijken of de zorg goed werkt',
        originalTitle: 'Evalueert de zorg',
        reason: 'Je lessenreeks bevat nog geen opdracht waarbij studenten leren evalueren of hun zorg effectief is.',
        whyImportant: 'Studenten moeten in hun stage kunnen evalueren of de zorg die ze geven ook echt helpt. Dit is een kernvaardigheid voor het diploma.',
        suggestedModule: 'Module: Kwaliteitszorg & Evalueren', 
        suggestedActivity: 'Reflectie-opdracht: Evalueer een zorgmoment uit je BPV',
        actionForStudent: 'Kies een zorgmoment uit je BPV en evalueer: Wat was het doel? Is het doel bereikt? Wat zou je anders doen?'
      },
      { 
        code: 'WP5.2', 
        title: 'Nadenken over je eigen handelen',
        originalTitle: 'Reflecteert op eigen handelen',
        reason: 'Je lessenreeks bevat nog geen expliciete reflectie-opdracht.',
        whyImportant: 'Reflecteren helpt studenten om van hun ervaringen te leren en zich professioneel te ontwikkelen.',
        suggestedModule: 'Module: Reflecteren & Professionele Identiteit', 
        suggestedActivity: 'Portfolio-opdracht: STARR-reflectie op kritisch moment',
        actionForStudent: 'Schrijf een STARR-reflectie over een moment waarop je twijfelde. Wat heb je geleerd?'
      }
    ];

    const SAMPLE_TAAL_SECTIONS = [
      { id: 0, title: 'Het Hart', chapter: '2.1', module: 'Basis Anatomie en Fysiologie' },
      { id: 1, title: 'Bloedvaten', chapter: '2.2', module: 'Basis Anatomie en Fysiologie' },
      { id: 2, title: 'Bloeddruk Meten', chapter: '2.3', module: 'Basis Anatomie en Fysiologie' },
      { id: 3, title: 'Pols Meten', chapter: '2.4', module: 'Basis Anatomie en Fysiologie' }
    ];

    // ========================================
    // GENERATED TEMPLATES (3 variants x 3 types)
    // ========================================
    const GENERATED_TEMPLATES = {
      werkopdracht: [
        {
          title: 'Werkopdracht: Klinisch Redeneren bij Pijn',
          leerdoel: 'De student kan een gestructureerde pijnanamnese afnemen volgens de ALTIS-methode en de bevindingen correct vastleggen in het zorgleefplan.',
          wp: 'WP2.3',
          content: `<p><strong>Opdracht:</strong></p>
            <p>Je werkt vandaag op de afdeling Interne Geneeskunde. Mevrouw Jansen (78 jaar) is opgenomen met buikklachten. Ze geeft aan pijn te hebben, maar kan dit moeilijk onder woorden brengen.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Neem een volledige pijnanamnese af bij een medestudent (die de rol van mevrouw Jansen speelt)</li>
              <li>Gebruik hierbij de ALTIS-methode (Aard, Lokalisatie, Tijdsduur, Intensiteit, Samenhang)</li>
              <li>Leg je bevindingen vast in het digitale zorgleefplan</li>
              <li>Formuleer minimaal 2 verpleegkundige diagnoses op basis van je bevindingen</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Alle ALTIS-componenten worden systematisch uitgevraagd</li>
              <li>‚úì Open vragen worden gebruikt om de zorgvrager te laten vertellen</li>
              <li>‚úì Non-verbale pijnsignalen worden herkend en benoemd</li>
              <li>‚úì Rapportage is SOEP-conform</li>
            </ul>`,
          duration: '45 minuten'
        },
        {
          title: 'Werkopdracht: ADL-ondersteuning bij Dementie',
          leerdoel: 'De student past persoonsgerichte zorg toe bij ADL-ondersteuning aan een zorgvrager met dementie.',
          wp: 'WP3.1',
          content: `<p><strong>Opdracht:</strong></p>
            <p>Meneer Van der Berg (84 jaar) heeft gevorderde dementie en woont op de PG-afdeling. Hij heeft ondersteuning nodig bij de ochtendzorg, maar verzet zich vaak tegen hulp.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Bestudeer het levensboek van meneer Van der Berg</li>
              <li>Stel een persoonsgerichte benadering op voor de ochtendzorg</li>
              <li>Voer de ochtendzorg uit met aandacht voor autonomie en eigenwaarde</li>
              <li>Reflecteer op wat wel en niet werkte</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Biografische informatie wordt actief gebruikt</li>
              <li>‚úì Tempo wordt aangepast aan de zorgvrager</li>
              <li>‚úì Keuzemogelijkheden worden aangeboden</li>
              <li>‚úì Verbale en non-verbale communicatie zijn afgestemd</li>
            </ul>`,
          duration: '60 minuten'
        },
        {
          title: 'Werkopdracht: Medicatieveiligheid',
          leerdoel: 'De student past de 5-juistheden toe bij medicatietoediening en signaleert risico\'s.',
          wp: 'WP3.2',
          content: `<p><strong>Opdracht:</strong></p>
            <p>Op je afdeling worden de medicijnen voor de avond klaargezet. Je collega vraagt of jij de medicatie wilt uitdelen aan 4 bewoners.</p>
            <p><strong>Voer de volgende stappen uit:</strong></p>
            <ul>
              <li>Controleer de medicatielijsten van alle 4 bewoners</li>
              <li>Identificeer minimaal 2 mogelijke risico's of interacties</li>
              <li>Pas de 5-juistheden toe bij elke toediening</li>
              <li>Documenteer de toediening volgens protocol</li>
            </ul>
            <p><strong>Beoordelingscriteria:</strong></p>
            <ul>
              <li>‚úì Alle 5-juistheden worden consequent toegepast</li>
              <li>‚úì Contra-indicaties worden herkend</li>
              <li>‚úì Bij twijfel wordt overlegd met zorgprofessional</li>
              <li>‚úì Afwijkingen worden correct gemeld</li>
            </ul>`,
          duration: '30 minuten'
        }
      ],
      toetsvraag: [
        {
          title: 'Toetsvraag: Vitale Functies',
          leerdoel: 'De student kan afwijkende vitale functies herkennen en juist interpreteren.',
          wp: 'WP1.1',
          content: `<p><strong>Casus:</strong></p>
            <p>Mevrouw Bakker (72 jaar) heeft COPD Gold III. Bij de ochtendronde meet je de volgende waarden: bloeddruk 95/60 mmHg, pols 112/min, temperatuur 38.4¬∞C, saturatie 88%.</p>
            <p><strong>Vraag 1:</strong> Welke waarde(n) zijn afwijkend? (meerdere antwoorden mogelijk)</p>
            <ul>
              <li>A. Bloeddruk</li>
              <li>B. Pols</li>
              <li>C. Temperatuur</li>
              <li>D. Saturatie</li>
            </ul>
            <p><strong>Vraag 2:</strong> Wat is je eerste actie?</p>
            <ul>
              <li>A. Afwachten en over 30 minuten opnieuw meten</li>
              <li>B. Direct de arts bellen</li>
              <li>C. Zuurstof toedienen en zorgprofessional informeren</li>
              <li>D. Mevrouw rechtop laten zitten</li>
            </ul>
            <p><strong>Antwoorden:</strong> Vraag 1: A, B, C, D (allen afwijkend). Vraag 2: C</p>`,
          duration: '10 minuten'
        },
        {
          title: 'Toetsvraag: Hygi√´ne en Infectiepreventie',
          leerdoel: 'De student kan de juiste hygi√´nemaatregelen toepassen bij verschillende isolatievormen.',
          wp: 'WP3.1',
          content: `<p><strong>Casus:</strong></p>
            <p>Meneer De Wit (65 jaar) is opgenomen met een MRSA-infectie. Hij ligt in strikte contactisolatie.</p>
            <p><strong>Vraag 1:</strong> Welke persoonlijke beschermingsmiddelen zijn verplicht bij verzorging?</p>
            <ul>
              <li>A. Alleen handschoenen</li>
              <li>B. Handschoenen en schort</li>
              <li>C. Handschoenen, schort en mondneusmasker</li>
              <li>D. Volledig beschermend pak</li>
            </ul>
            <p><strong>Vraag 2:</strong> In welke volgorde trek je de PBM uit?</p>
            <ul>
              <li>A. Schort ‚Üí Handschoenen ‚Üí Masker</li>
              <li>B. Handschoenen ‚Üí Schort ‚Üí Masker</li>
              <li>C. Masker ‚Üí Schort ‚Üí Handschoenen</li>
              <li>D. Handschoenen ‚Üí Masker ‚Üí Schort</li>
            </ul>
            <p><strong>Antwoorden:</strong> Vraag 1: C. Vraag 2: B</p>`,
          duration: '8 minuten'
        },
        {
          title: 'Toetsvraag: Communicatie met Zorgvragers',
          leerdoel: 'De student past motiverende gespreksvoering toe bij gedragsverandering.',
          wp: 'WP1.3',
          content: `<p><strong>Casus:</strong></p>
            <p>Jan (52 jaar) heeft diabetes type 2. Ondanks adviezen blijft hij ongezond eten. Hij zegt: "Ik weet dat het slecht is, maar ik kan het gewoon niet laten."</p>
            <p><strong>Vraag 1:</strong> Welke reactie past bij motiverende gespreksvoering?</p>
            <ul>
              <li>A. "U moet echt beter uw best doen, anders krijgt u complicaties"</li>
              <li>B. "Ik hoor dat u het moeilijk vindt. Wat zou u helpen om een kleine stap te zetten?"</li>
              <li>C. "Zal ik een di√´tist voor u regelen?"</li>
              <li>D. "Andere zorgvragers lukt het wel, waarom u niet?"</li>
            </ul>
            <p><strong>Vraag 2:</strong> Welke fase van gedragsverandering bevindt Jan zich?</p>
            <ul>
              <li>A. Pre-contemplatie</li>
              <li>B. Contemplatie</li>
              <li>C. Preparatie</li>
              <li>D. Actie</li>
            </ul>
            <p><strong>Antwoorden:</strong> Vraag 1: B. Vraag 2: B</p>`,
          duration: '8 minuten'
        }
      ],
      kennischeck: [
        {
          title: 'Kennischeck: Anatomie Hart en Bloedvaten',
          leerdoel: 'De student kent de anatomie van het cardiovasculaire systeem.',
          wp: 'WP2.3',
          content: `<p><strong>Beantwoord de volgende vragen:</strong></p>
            <p><strong>1.</strong> Hoeveel hartkamers heeft het menselijk hart?</p>
            <p>‚Üí <em>4 kamers: 2 boezems (atria) en 2 kamers (ventrikels)</em></p>
            <p><strong>2.</strong> Wat is de functie van de mitralisklep?</p>
            <p>‚Üí <em>Voorkomt terugstroom van bloed van linker ventrikel naar linker atrium</em></p>
            <p><strong>3.</strong> Wat is het verschil tussen arteri√´n en venen?</p>
            <p>‚Üí <em>Arteri√´n voeren bloed van hart af (zuurstofrijk), venen voeren bloed naar hart toe (zuurstofarm)</em></p>
            <p><strong>4.</strong> Waar wordt de pols meestal gemeten?</p>
            <p>‚Üí <em>Arteria radialis (pols), arteria carotis (hals), arteria femoralis (lies)</em></p>
            <p><strong>5.</strong> Wat is een normale hartfrequentie bij volwassenen?</p>
            <p>‚Üí <em>60-100 slagen per minuut in rust</em></p>`,
          duration: '5 minuten'
        },
        {
          title: 'Kennischeck: Wondverzorging Basis',
          leerdoel: 'De student kent de principes van wondgenezing en -verzorging.',
          wp: 'WP3.1',
          content: `<p><strong>Beantwoord de volgende vragen:</strong></p>
            <p><strong>1.</strong> Noem de 4 fasen van wondgenezing.</p>
            <p>‚Üí <em>Hemostase, Inflammatie, Proliferatie, Remodellering</em></p>
            <p><strong>2.</strong> Wanneer gebruik je een hydrocollo√Ød verband?</p>
            <p>‚Üí <em>Bij licht tot matig exsuderende wonden, bevordert vochtig wondmilieu</em></p>
            <p><strong>3.</strong> Wat zijn tekenen van wondinfectie?</p>
            <p>‚Üí <em>Roodheid, zwelling, warmte, pijn, pus, koorts</em></p>
            <p><strong>4.</strong> Hoe vaak moet een droog verband minimaal worden verwisseld?</p>
            <p>‚Üí <em>Elke 24-48 uur of bij doorlekken</em></p>
            <p><strong>5.</strong> Wat is necrose?</p>
            <p>‚Üí <em>Afgestorven weefsel, zwart/bruin van kleur</em></p>`,
          duration: '5 minuten'
        },
        {
          title: 'Kennischeck: Voeding en Vocht',
          leerdoel: 'De student kent de basisprincipes van voeding en vochtbalans.',
          wp: 'WP1.1',
          content: `<p><strong>Beantwoord de volgende vragen:</strong></p>
            <p><strong>1.</strong> Hoeveel vocht heeft een volwassene gemiddeld per dag nodig?</p>
            <p>‚Üí <em>1,5 tot 2 liter per dag</em></p>
            <p><strong>2.</strong> Wat zijn tekenen van dehydratie?</p>
            <p>‚Üí <em>Droge mond, weinig plassen, donkere urine, duizeligheid, verwardheid</em></p>
            <p><strong>3.</strong> Wat is de functie van eiwitten in de voeding?</p>
            <p>‚Üí <em>Opbouw en herstel van weefsels, aanmaak antistoffen</em></p>
            <p><strong>4.</strong> Bij welke aandoening is natriumbeperking belangrijk?</p>
            <p>‚Üí <em>Hartfalen, hoge bloeddruk, nierproblemen</em></p>
            <p><strong>5.</strong> Wat is MUST en waarvoor wordt het gebruikt?</p>
            <p>‚Üí <em>Malnutrition Universal Screening Tool - screening op ondervoeding</em></p>`,
          duration: '5 minuten'
        }
      ],
      reflectie: [
        {
          title: 'Reflectieopdracht: STARR-Reflectie op Zorgmoment',
          leerdoel: 'De student reflecteert systematisch op een praktijksituatie met behulp van de STARR-methode en formuleert verbeterpunten.',
          wp: 'WP5.2',
          content: `<p><strong>STARR-Reflectie Opdracht</strong></p>
            <p>Kies een zorgmoment uit je BPV of simulatie waarbij je iets hebt geleerd of waarbij iets niet ging zoals verwacht.</p>
            
            <p><strong>S - Situatie</strong></p>
            <p>Beschrijf de situatie. Waar was je? Wie waren erbij? Wat was de aanleiding?</p>
            <div style="background: var(--bg-input); padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; min-height: 60px; border: 1px dashed var(--border);">
              <em style="color: var(--text-muted);">Vul hier je antwoord in...</em>
            </div>
            
            <p><strong>T - Taak</strong></p>
            <p>Wat was jouw rol? Wat werd er van je verwacht?</p>
            <div style="background: var(--bg-input); padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; min-height: 60px; border: 1px dashed var(--border);">
              <em style="color: var(--text-muted);">Vul hier je antwoord in...</em>
            </div>
            
            <p><strong>A - Actie</strong></p>
            <p>Wat heb je gedaan? Welke keuzes maakte je? Wat zei of deed je precies?</p>
            <div style="background: var(--bg-input); padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; min-height: 60px; border: 1px dashed var(--border);">
              <em style="color: var(--text-muted);">Vul hier je antwoord in...</em>
            </div>
            
            <p><strong>R - Resultaat</strong></p>
            <p>Wat was het resultaat? Hoe reageerde de zorgvrager/collega? Was het doel bereikt?</p>
            <div style="background: var(--bg-input); padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; min-height: 60px; border: 1px dashed var(--border);">
              <em style="color: var(--text-muted);">Vul hier je antwoord in...</em>
            </div>
            
            <p><strong>R - Reflectie</strong></p>
            <p>Wat heb je geleerd? Wat zou je een volgende keer anders doen? Welke theorie is hierop van toepassing?</p>
            <div style="background: var(--bg-input); padding: 0.75rem; border-radius: 6px; margin: 0.5rem 0; min-height: 60px; border: 1px dashed var(--border);">
              <em style="color: var(--text-muted);">Vul hier je antwoord in...</em>
            </div>`,
          duration: '20 minuten'
        }
      ],
      praktijkcasus: [
        {
          title: 'Praktijkcasus: Mevrouw De Boer - Longontsteking',
          leerdoel: 'De student analyseert een complexe zorgsituatie, stelt prioriteiten en formuleert een verpleegkundig plan.',
          wp: 'WP2.3',
          content: `<p><strong>Casusinformatie</strong></p>
            <div style="background: rgba(8, 145, 178, 0.08); padding: 1rem; border-radius: 8px; border-left: 3px solid var(--accent-cyan); margin-bottom: 1rem;">
              <p style="margin: 0;"><strong>Mevrouw De Boer</strong>, 76 jaar, is vanmorgen opgenomen op de afdeling Interne Geneeskunde met een <strong>community acquired pneumonie</strong> (longontsteking).</p>
            </div>
            
            <p><strong>Voorgeschiedenis:</strong></p>
            <ul>
              <li>COPD Gold II</li>
              <li>Diabetes Mellitus type 2</li>
              <li>Licht overgewicht (BMI 28)</li>
            </ul>
            
            <p><strong>Huidige situatie bij opname:</strong></p>
            <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
              <tr style="background: var(--bg-input);">
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Temperatuur</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border); color: var(--kd-gap);">38.9¬∞C ‚Üë</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Saturatie</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border); color: var(--kd-gap);">91% met 2L O‚ÇÇ ‚Üì</td>
              </tr>
              <tr style="background: var(--bg-input);">
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Ademfrequentie</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border); color: var(--kd-gap);">24/min ‚Üë</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Bloeddruk</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border);">128/78 mmHg</td>
              </tr>
              <tr style="background: var(--bg-input);">
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Pols</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border); color: var(--kd-partial);">98/min ‚Üë</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>Glucose</strong></td>
                <td style="padding: 0.5rem; border: 1px solid var(--border); color: var(--kd-partial);">11.2 mmol/L ‚Üë</td>
              </tr>
            </table>
            
            <p>Mevrouw is kortademig, hoest productief (groenig sputum) en voelt zich "doodziek". Ze is gedesori√´nteerd in tijd.</p>
            
            <p><strong>Opdrachten:</strong></p>
            <ol>
              <li><strong>Prioriteiten:</strong> Welke observaties/interventies hebben de hoogste prioriteit? Leg uit waarom.</li>
              <li><strong>Verpleegproblemen:</strong> Formuleer minimaal 3 verpleegkundige diagnoses (PES-structuur).</li>
              <li><strong>Complicaties:</strong> Welke complicaties kunnen bij deze zorgvrager optreden? Hoe signaleer je deze vroegtijdig?</li>
              <li><strong>Zorgplan:</strong> Stel een kort verpleegplan op voor de eerste 24 uur.</li>
            </ol>`,
          duration: '30 minuten'
        }
      ]
    };

    // ========================================
    // TAAL CONTENT PER SECTION (B2/B1/A2)
    // ========================================
    // PEDAGOGISCH PRINCIPE: Makkelijkere niveaus hebben MEER tekst, MEER uitleg, MEER voorbeelden
    // Alle niveaus bevatten dezelfde feitelijke kennis, maar anders gepresenteerd
    const TAAL_CONTENT = {
      0: { // Het Hart
        title: 'Het Hart',
        B2: `<h3>Het Hart</h3>
          <p>Het hart is een holle spier die fungeert als de centrale pomp van het cardiovasculaire systeem. Het is gelegen in de thoraxholte, in het mediastinum, enigszins links van het midden. Het hart bestaat uit vier compartimenten: twee atria (boezems) en twee ventrikels (kamers).</p>
          <p>De rechter harthelft ontvangt zuurstofarm bloed uit het lichaam via de venae cavae en pompt dit naar de longen. De linker harthelft ontvangt zuurstofrijk bloed uit de longen en pompt dit via de aorta naar het lichaam.</p>
          <p>Het hartritme wordt gereguleerd door het geleidingssysteem, beginnend bij de sinusknoop (SA-knoop) in het rechter atrium. Een normaal hartritme in rust ligt tussen 60-100 slagen per minuut.</p>`,
        B1: `<h3>Het Hart</h3>
          <p>Het hart is een spier die werkt als een pomp. Je hart zit in je borstkas, achter je borstbeen en tussen je longen, een beetje aan de linkerkant.</p>
          <p><strong>De 4 delen van je hart:</strong></p>
          <p>Je hart heeft 4 ruimtes: 2 boezems bovenin en 2 kamers onderin. De boezems zijn de ontvangstruimtes, de kamers zijn de pompkamers. Je kunt het vergelijken met een huis met 4 kamers.</p>
          <p><strong>Hoe stroomt het bloed?</strong></p>
          <p>De rechterkant van je hart krijgt bloed binnen dat weinig zuurstof heeft (dit bloed komt uit je lichaam). Dit bloed wordt naar de longen gepompt om nieuwe zuurstof te halen. De linkerkant krijgt bloed met veel zuurstof uit de longen en pompt dit naar je hele lichaam.</p>
          <p><strong>Je hartslag:</strong></p>
          <p>Je hart klopt normaal 60 tot 100 keer per minuut als je rust neemt. Als je sport of je schrikt, klopt je hart sneller. Dat is normaal.</p>`,
        A2: `<h3>Het Hart</h3>
          <p>Je hart is een spier. Het hart pompt bloed door je lichaam. We gaan stap voor stap uitleggen hoe je hart werkt.</p>
          
          <p><strong>Waar zit je hart?</strong></p>
          <p>Je hart zit in je borst. Het zit achter je borstbeen. Je hart zit een beetje aan de linkerkant. Als je je hand op je borst legt, voel je je hart kloppen.</p>
          
          <p><strong>De 4 delen van je hart</strong></p>
          <p>Je hart heeft 4 ruimtes. We noemen dit de 4 "kamers" van je hart:</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>2 boezems</strong> - deze zitten bovenin je hart. Hier komt het bloed binnen.</li>
            <li><strong>2 kamers</strong> - deze zitten onderin je hart. Deze pompen het bloed weg.</li>
          </ul>
          <p>üí° <em>Voorbeeld: Je kunt je hart vergelijken met een huis met 4 kamers. In 2 kamers komt bezoek binnen, uit 2 kamers gaat bezoek weg.</em></p>
          
          <p><strong>De rechter- en linkerkant</strong></p>
          <p>Je hart heeft een rechterkant en een linkerkant:</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Rechterkant:</strong> Hier komt bloed binnen dat weinig zuurstof heeft. Dit bloed gaat naar je longen om zuurstof te halen.</li>
            <li><strong>Linkerkant:</strong> Hier komt bloed binnen dat veel zuurstof heeft. Dit bloed gaat naar je hele lichaam.</li>
          </ul>
          
          <p><strong>Hoe snel klopt je hart?</strong></p>
          <p>Normaal klopt je hart 60 tot 100 keer per minuut. Dit noemen we je hartslag. Als je rent of schrikt, klopt je hart sneller. Dat is normaal.</p>
          
          <p>üí° <em>Test: Leg je hand op je borst. Tel hoe vaak je hart klopt in 1 minuut. Is het tussen 60 en 100? Dan is het goed!</em></p>`,
        AR: `<h3>ŸÖÿß ŸáŸà ÿßŸÑŸÇŸÑÿ®ÿü <span class="kw1c-term-nl">(Het hart)</span></h3>
          <p>ÿßŸÑŸÇŸÑÿ® <span class="kw1c-term-nl">(het hart)</span> ŸáŸà ÿπÿ∂ŸÑÿ© <span class="kw1c-term-nl">(spier)</span>. ÿßŸÑŸÇŸÑÿ® Ÿäÿ∂ÿÆ ÿßŸÑÿØŸÖ <span class="kw1c-term-nl">(bloed)</span> ŸÅŸä ÿ¨ÿ≥ŸÖŸÉ <span class="kw1c-term-nl">(lichaam)</span>. ŸÜÿ¥ÿ±ÿ≠ ŸÑŸÉ ÿÆÿ∑Ÿàÿ© ÿ®ÿÆÿ∑Ÿàÿ© ŸÉŸäŸÅ ŸäÿπŸÖŸÑ ŸÇŸÑÿ®ŸÉ.</p>
          
          <p><strong>ÿ£ŸäŸÜ ŸäŸÇÿπ ŸÇŸÑÿ®ŸÉÿü <span class="kw1c-term-nl">(Waar zit je hart?)</span></strong></p>
          <p>ŸÇŸÑÿ®ŸÉ ŸäŸÇÿπ ŸÅŸä ÿµÿØÿ±ŸÉ <span class="kw1c-term-nl">(borst)</span>. ŸäŸÇÿπ ÿÆŸÑŸÅ ÿπÿ∏ŸÖ ÿßŸÑÿµÿØÿ± <span class="kw1c-term-nl">(borstbeen)</span>. ŸÇŸÑÿ®ŸÉ ŸäŸÇÿπ ŸÇŸÑŸäŸÑÿßŸã ÿπŸÑŸâ ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£Ÿäÿ≥ÿ±. ÿ•ÿ∞ÿß Ÿàÿ∂ÿπÿ™ ŸäÿØŸÉ ÿπŸÑŸâ ÿµÿØÿ±ŸÉÿå ÿ≥ÿ™ÿ¥ÿπÿ± ÿ®ŸÇŸÑÿ®ŸÉ ŸäŸÜÿ®ÿ∂.</p>
          
          <p><strong>ÿßŸÑÿ£ÿ¨ÿ≤ÿßÿ° ÿßŸÑÿ£ÿ±ÿ®ÿπÿ© ŸÑŸÇŸÑÿ®ŸÉ <span class="kw1c-term-nl">(De 4 delen van je hart)</span></strong></p>
          <p>ŸÇŸÑÿ®ŸÉ ŸÑŸá 4 ÿ∫ÿ±ŸÅ:</p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li><strong>2 ÿ£ÿ∞ŸäŸÜÿßŸÜ</strong> <span class="kw1c-term-nl">(boezems)</span> - ŸÅŸä ÿßŸÑÿ£ÿπŸÑŸâ. ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ.</li>
            <li><strong>2 ÿ®ÿ∑ŸäŸÜÿßŸÜ</strong> <span class="kw1c-term-nl">(kamers)</span> - ŸÅŸä ÿßŸÑÿ£ÿ≥ŸÅŸÑ. Ÿáÿ∞Ÿá ÿ™ÿ∂ÿÆ ÿßŸÑÿØŸÖ.</li>
          </ul>
          <p>üí° <em>ŸÖÿ´ÿßŸÑ: ŸäŸÖŸÉŸÜŸÉ ÿ™ÿ¥ÿ®ŸäŸá ŸÇŸÑÿ®ŸÉ ÿ®ŸÖŸÜÿ≤ŸÑ ŸÑŸá 4 ÿ∫ÿ±ŸÅ.</em></p>
          
          <p><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£ŸäŸÖŸÜ ŸàÿßŸÑÿ£Ÿäÿ≥ÿ± <span class="kw1c-term-nl">(Rechter- en linkerkant)</span></strong></p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£ŸäŸÖŸÜ <span class="kw1c-term-nl">(rechterkant)</span>:</strong> ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ ÿßŸÑŸÅŸÇŸäÿ± ÿ®ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ <span class="kw1c-term-nl">(zuurstofarm bloed)</span>. Ÿäÿ∞Ÿáÿ® ÿ•ŸÑŸâ ÿßŸÑÿ±ÿ¶ÿ™ŸäŸÜ <span class="kw1c-term-nl">(longen)</span>.</li>
            <li><strong>ÿßŸÑÿ¨ÿßŸÜÿ® ÿßŸÑÿ£Ÿäÿ≥ÿ± <span class="kw1c-term-nl">(linkerkant)</span>:</strong> ŸáŸÜÿß ŸäÿØÿÆŸÑ ÿßŸÑÿØŸÖ ÿßŸÑÿ∫ŸÜŸä ÿ®ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ <span class="kw1c-term-nl">(zuurstofrijk bloed)</span>. Ÿäÿ∞Ÿáÿ® ÿ•ŸÑŸâ ÿ¨ÿ≥ŸÖŸÉ.</li>
          </ul>
          
          <p><strong>ŸÉŸÖ ŸÖÿ±ÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉÿü <span class="kw1c-term-nl">(Hoe snel klopt je hart?)</span></strong></p>
          <p>ÿπÿßÿØÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉ 60 ÿ•ŸÑŸâ 100 ŸÖÿ±ÿ© ŸÅŸä ÿßŸÑÿØŸÇŸäŸÇÿ©. ŸÜÿ≥ŸÖŸä Ÿáÿ∞ÿß ŸÜÿ®ÿ∂ ÿßŸÑŸÇŸÑÿ® <span class="kw1c-term-nl">(hartslag)</span>. ÿ•ÿ∞ÿß ÿ±ŸÉÿ∂ÿ™ ÿ£Ÿà ÿÆŸÅÿ™ÿå ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉ ÿ£ÿ≥ÿ±ÿπ. Ÿáÿ∞ÿß ÿ∑ÿ®ŸäÿπŸä.</p>
          
          <p>üí° <em>ÿßÿÆÿ™ÿ®ÿßÿ±: ÿ∂ÿπ ŸäÿØŸÉ ÿπŸÑŸâ ÿµÿØÿ±ŸÉ. ÿπÿØ ŸÉŸÖ ŸÖÿ±ÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉ ŸÅŸä ÿØŸÇŸäŸÇÿ©. ŸáŸÑ ŸáŸà ÿ®ŸäŸÜ 60 Ÿà 100ÿü ÿ•ÿ∞ÿßŸã Ÿáÿ∞ÿß ÿ¨ŸäÿØ!</em></p>
          
          <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid var(--ec-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; direction: ltr; text-align: left;">
            <p style="margin: 0 0 0.5rem 0;"><strong>üá≥üá± Kernwoorden:</strong></p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">het hart</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">bloed</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">boezem</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">kamer</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">zuurstof</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">longen</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">hartslag</span>
            </div>
          </div>`
      },
      1: { // Bloedvaten
        title: 'Bloedvaten',
        B2: `<h3>Bloedvaten</h3>
          <p>Het vaatstelsel bestaat uit drie typen bloedvaten: arteri√´n, venen en capillairen. Arteri√´n transporteren bloed van het hart naar de weefsels. Ze hebben dikke, elastische wanden om de druk van het pompende hart te weerstaan.</p>
          <p>Venen voeren bloed terug naar het hart. Ze hebben dunnere wanden en bevatten kleppen die terugstroom voorkomen. Capillairen zijn de kleinste bloedvaten waar de uitwisseling van zuurstof, voedingsstoffen en afvalstoffen plaatsvindt.</p>
          <p>De totale lengte van alle bloedvaten in het menselijk lichaam bedraagt ongeveer 100.000 kilometer.</p>`,
        B1: `<h3>Bloedvaten</h3>
          <p>Bloedvaten zijn buizen die bloed door je lichaam brengen. Er zijn 3 soorten bloedvaten. Elke soort heeft een eigen taak.</p>
          <p><strong>De 3 soorten bloedvaten:</strong></p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Slagaders:</strong> Brengen bloed van je hart naar je lichaam. Ze hebben dikke wanden omdat het bloed met kracht wordt gepompt.</li>
            <li><strong>Aders:</strong> Brengen bloed terug naar je hart. Ze hebben kleppen zodat bloed niet terugstroomt.</li>
            <li><strong>Haarvaten:</strong> Heel kleine bloedvaten. Hier geeft het bloed zuurstof af aan je lichaam en neemt afvalstoffen mee.</li>
          </ul>
          <p>Alle bloedvaten samen zijn heel lang: ongeveer 100.000 kilometer! Dat is 2,5 keer rond de aarde.</p>`,
        A2: `<h3>Bloedvaten</h3>
          <p>Bloedvaten zijn buizen in je lichaam. Door deze buizen stroomt je bloed. We leggen uit welke soorten er zijn.</p>
          
          <p><strong>Er zijn 3 soorten bloedvaten:</strong></p>
          
          <p><strong>1. Slagaders</strong></p>
          <p>Slagaders brengen bloed van je hart NAAR je lichaam. Het bloed gaat er met kracht doorheen. Daarom hebben slagaders dikke wanden.</p>
          <p>üí° <em>Onthoud: Slagaders gaan WEG van je hart. Denk aan "slag" = je hart slaat het bloed weg.</em></p>
          
          <p><strong>2. Aders</strong></p>
          <p>Aders brengen bloed TERUG naar je hart. Aders hebben kleppen. Die kleppen zorgen dat het bloed niet terugstroomt.</p>
          <p>üí° <em>Onthoud: Aders gaan NAAR je hart toe.</em></p>
          
          <p><strong>3. Haarvaten</strong></p>
          <p>Haarvaten zijn heel kleine bloedvaten. Ze zijn zo dun als een haar. In de haarvaten gebeurt iets belangrijks:</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li>Je bloed geeft zuurstof af aan je lichaam</li>
            <li>Je bloed neemt afvalstoffen mee terug</li>
          </ul>
          
          <p><strong>Hoe lang zijn alle bloedvaten samen?</strong></p>
          <p>Alle bloedvaten in je lichaam samen zijn 100.000 kilometer lang. Dat is heel veel! Je kunt er 2,5 keer de aarde mee rondgaan.</p>`,
        AR: `<h3>ÿßŸÑÿ£ŸàÿπŸäÿ© ÿßŸÑÿØŸÖŸàŸäÿ© <span class="kw1c-term-nl">(Bloedvaten)</span></h3>
          <p>ÿßŸÑÿ£ŸàÿπŸäÿ© ÿßŸÑÿØŸÖŸàŸäÿ© <span class="kw1c-term-nl">(bloedvaten)</span> ŸáŸä ÿ£ŸÜÿßÿ®Ÿäÿ® ŸÅŸä ÿ¨ÿ≥ŸÖŸÉ. ŸÖŸÜ ÿÆŸÑÿßŸÑŸáÿß Ÿäÿ™ÿØŸÅŸÇ ÿØŸÖŸÉ <span class="kw1c-term-nl">(bloed)</span>. ŸÜÿ¥ÿ±ÿ≠ ŸÑŸÉ ÿ£ŸÜŸàÿßÿπŸáÿß.</p>
          
          <p><strong>ŸáŸÜÿßŸÉ 3 ÿ£ŸÜŸàÿßÿπ ŸÖŸÜ ÿßŸÑÿ£ŸàÿπŸäÿ© ÿßŸÑÿØŸÖŸàŸäÿ©:</strong></p>
          
          <p><strong>1. ÿßŸÑÿ¥ÿ±ÿßŸäŸäŸÜ <span class="kw1c-term-nl">(Slagaders)</span></strong></p>
          <p>ÿßŸÑÿ¥ÿ±ÿßŸäŸäŸÜ ÿ™ŸÜŸÇŸÑ ÿßŸÑÿØŸÖ ŸÖŸÜ ŸÇŸÑÿ®ŸÉ <span class="kw1c-term-nl">(hart)</span> ÿ•ŸÑŸâ ÿ¨ÿ≥ŸÖŸÉ. ÿßŸÑÿØŸÖ ŸäŸÖÿ± ÿ®ŸÇŸàÿ©. ŸÑÿ∞ŸÑŸÉ ÿßŸÑÿ¥ÿ±ÿßŸäŸäŸÜ ŸÑŸáÿß ÿ¨ÿØÿ±ÿßŸÜ ÿ≥ŸÖŸäŸÉÿ©.</p>
          <p>üí° <em>ÿ™ÿ∞ŸÉÿ±: ÿßŸÑÿ¥ÿ±ÿßŸäŸäŸÜ ÿ™ÿ∞Ÿáÿ® ÿ®ÿπŸäÿØÿßŸã ÿπŸÜ ŸÇŸÑÿ®ŸÉ.</em></p>
          
          <p><strong>2. ÿßŸÑÿ£Ÿàÿ±ÿØÿ© <span class="kw1c-term-nl">(Aders)</span></strong></p>
          <p>ÿßŸÑÿ£Ÿàÿ±ÿØÿ© ÿ™ŸÜŸÇŸÑ ÿßŸÑÿØŸÖ ÿπÿßÿ¶ÿØÿßŸã ÿ•ŸÑŸâ ŸÇŸÑÿ®ŸÉ. ÿßŸÑÿ£Ÿàÿ±ÿØÿ© ŸÑŸáÿß ÿµŸÖÿßŸÖÿßÿ™ <span class="kw1c-term-nl">(kleppen)</span>. Ÿáÿ∞Ÿá ÿßŸÑÿµŸÖÿßŸÖÿßÿ™ ÿ™ŸÖŸÜÿπ ÿßŸÑÿØŸÖ ŸÖŸÜ ÿßŸÑÿ±ÿ¨Ÿàÿπ.</p>
          <p>üí° <em>ÿ™ÿ∞ŸÉÿ±: ÿßŸÑÿ£Ÿàÿ±ÿØÿ© ÿ™ÿ∞Ÿáÿ® ŸÜÿ≠Ÿà ŸÇŸÑÿ®ŸÉ.</em></p>
          
          <p><strong>3. ÿßŸÑÿ¥ÿπŸäÿ±ÿßÿ™ ÿßŸÑÿØŸÖŸàŸäÿ© <span class="kw1c-term-nl">(Haarvaten)</span></strong></p>
          <p>ÿßŸÑÿ¥ÿπŸäÿ±ÿßÿ™ ÿßŸÑÿØŸÖŸàŸäÿ© ŸáŸä ÿ£ŸàÿπŸäÿ© ÿØŸÖŸàŸäÿ© ÿµÿ∫Ÿäÿ±ÿ© ÿ¨ÿØÿßŸã. ÿ±ŸÇŸäŸÇÿ© ŸÖÿ´ŸÑ ÿßŸÑÿ¥ÿπÿ±ÿ©. ŸÅŸä ÿßŸÑÿ¥ÿπŸäÿ±ÿßÿ™ Ÿäÿ≠ÿØÿ´ ÿ¥Ÿäÿ° ŸÖŸáŸÖ:</p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li>ÿØŸÖŸÉ Ÿäÿπÿ∑Ÿä ÿßŸÑÿ£ŸÉÿ≥ÿ¨ŸäŸÜ <span class="kw1c-term-nl">(zuurstof)</span> ŸÑÿ¨ÿ≥ŸÖŸÉ</li>
            <li>ÿØŸÖŸÉ Ÿäÿ£ÿÆÿ∞ ÿßŸÑŸÅÿ∂ŸÑÿßÿ™ <span class="kw1c-term-nl">(afvalstoffen)</span> ŸÖÿπŸá</li>
          </ul>
          
          <p><strong>ŸÉŸÖ ÿ∑ŸàŸÑ ŸÉŸÑ ÿßŸÑÿ£ŸàÿπŸäÿ© ÿßŸÑÿØŸÖŸàŸäÿ© ŸÖÿπÿßŸãÿü</strong></p>
          <p>ŸÉŸÑ ÿßŸÑÿ£ŸàÿπŸäÿ© ÿßŸÑÿØŸÖŸàŸäÿ© ŸÅŸä ÿ¨ÿ≥ŸÖŸÉ ŸÖÿπÿßŸã ÿ∑ŸàŸÑŸáÿß 100,000 ŸÉŸäŸÑŸàŸÖÿ™ÿ±. Ÿáÿ∞ÿß ŸÉÿ´Ÿäÿ± ÿ¨ÿØÿßŸã! ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿØŸàÿ±ÿßŸÜ ÿ≠ŸàŸÑ ÿßŸÑÿ£ÿ±ÿ∂ 2.5 ŸÖÿ±ÿ©.</p>
          
          <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid var(--ec-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; direction: ltr; text-align: left;">
            <p style="margin: 0 0 0.5rem 0;"><strong>üá≥üá± Kernwoorden:</strong></p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">bloedvaten</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">slagader</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">ader</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">haarvat</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">kleppen</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">zuurstof</span>
            </div>
          </div>`
      },
      2: { // Bloeddruk Meten
        title: 'Bloeddruk Meten',
        B2: `<h3>Bloeddruk Meten</h3>
          <p>De bloeddruk is de druk die het bloed uitoefent op de wanden van de arteri√´n. De bloeddruk wordt uitgedrukt in twee waarden: de systolische druk (bovendruk) en de diastolische druk (onderdruk).</p>
          <p>De systolische druk wordt gemeten wanneer het hart samentrekt en bloed in de arteri√´n pompt. De diastolische druk wordt gemeten wanneer het hart ontspant tussen twee hartslagen in.</p>
          <p>Een normale bloeddruk voor volwassenen is ongeveer 120/80 mmHg. Hypertensie (hoge bloeddruk) wordt gediagnosticeerd bij waarden boven 140/90 mmHg.</p>`,
        B1: `<h3>Bloeddruk Meten</h3>
          <p>Bloeddruk is hoe hard je bloed tegen de wanden van je bloedvaten duwt. Als je bloeddruk meet, krijg je 2 getallen.</p>
          <p><strong>De 2 getallen:</strong></p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Bovendruk (systolisch):</strong> Dit meet je als je hart pompt en het bloed wegduwt.</li>
            <li><strong>Onderdruk (diastolisch):</strong> Dit meet je als je hart even rust, tussen twee pompen in.</li>
          </ul>
          <p><strong>Wat is een goede bloeddruk?</strong></p>
          <p>Een normale bloeddruk is 120/80. We schrijven dit als "120 over 80".</p>
          <p>Als de bloeddruk hoger is dan 140/90, noemen we dit hoge bloeddruk. Dat is niet goed voor je lichaam.</p>`,
        A2: `<h3>Bloeddruk Meten</h3>
          <p>Bloeddruk is de druk van je bloed. Je bloed duwt tegen je bloedvaten. We gaan uitleggen hoe je bloeddruk meet en wat de getallen betekenen.</p>
          
          <p><strong>Hoe meet je bloeddruk?</strong></p>
          <p>Je meet bloeddruk met een manchet om je arm. De manchet wordt strak om je bovenarm gedaan. Dan pompt de machine de manchet op. Je voelt druk op je arm. Daarna laat de machine de lucht langzaam ontsnappen. De machine meet nu je bloeddruk.</p>
          
          <p><strong>Je krijgt 2 getallen</strong></p>
          <p>Als je bloeddruk is gemeten, krijg je 2 getallen. Bijvoorbeeld: 120/80. We zeggen: "120 over 80".</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Het eerste getal (120):</strong> Dit is de bovendruk. Dit meet je als je hart pompt.</li>
            <li><strong>Het tweede getal (80):</strong> Dit is de onderdruk. Dit meet je als je hart even rust.</li>
          </ul>
          
          <p><strong>Wat is goed en wat is te hoog?</strong></p>
          <table style="width: 100%; margin: 0.5rem 0; border-collapse: collapse;">
            <tr style="background: rgba(34,197,94,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚úÖ Goed</td><td style="padding: 0.5rem; border: 1px solid var(--border);">120/80 of lager</td></tr>
            <tr style="background: rgba(249,115,22,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚ö†Ô∏è Let op</td><td style="padding: 0.5rem; border: 1px solid var(--border);">Tussen 120/80 en 140/90</td></tr>
            <tr style="background: rgba(239,68,68,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚ùå Te hoog</td><td style="padding: 0.5rem; border: 1px solid var(--border);">Hoger dan 140/90</td></tr>
          </table>
          <p>üí° <em>Te hoge bloeddruk is niet goed. Je hart moet dan te hard werken. Vertel het altijd aan de zorgprofessional als de bloeddruk te hoog is.</em></p>`,
        AR: `<h3>ŸÇŸäÿßÿ≥ ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ <span class="kw1c-term-nl">(Bloeddruk meten)</span></h3>
          <p>ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ <span class="kw1c-term-nl">(bloeddruk)</span> ŸáŸà ÿ∂ÿ∫ÿ∑ ÿØŸÖŸÉ. ÿØŸÖŸÉ Ÿäÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ£ŸàÿπŸäÿ™ŸÉ ÿßŸÑÿØŸÖŸàŸäÿ© <span class="kw1c-term-nl">(bloedvaten)</span>. ŸÜÿ¥ÿ±ÿ≠ ŸÑŸÉ ŸÉŸäŸÅ ÿ™ŸÇŸäÿ≥ ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ ŸàŸÖÿßÿ∞ÿß ÿ™ÿπŸÜŸä ÿßŸÑÿ£ÿ±ŸÇÿßŸÖ.</p>
          
          <p><strong>ŸÉŸäŸÅ ÿ™ŸÇŸäÿ≥ ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖÿü <span class="kw1c-term-nl">(Hoe meet je bloeddruk?)</span></strong></p>
          <p>ÿ™ŸÇŸäÿ≥ ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ ÿ®ŸÉŸÅÿ© <span class="kw1c-term-nl">(manchet)</span> ÿ≠ŸàŸÑ ÿ∞ÿ±ÿßÿπŸÉ. ÿßŸÑŸÉŸÅÿ© ÿ™Ÿàÿ∂ÿπ ÿ®ÿ•ÿ≠ŸÉÿßŸÖ ÿ≠ŸàŸÑ ÿ£ÿπŸÑŸâ ÿ∞ÿ±ÿßÿπŸÉ <span class="kw1c-term-nl">(bovenarm)</span>. ÿ´ŸÖ ÿ™ŸÜŸÅÿÆ ÿßŸÑÿ¢ŸÑÿ© ÿßŸÑŸÉŸÅÿ©. ÿ™ÿ¥ÿπÿ± ÿ®ÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ∞ÿ±ÿßÿπŸÉ. ÿ®ÿπÿØ ÿ∞ŸÑŸÉ ÿ™ÿ™ÿ±ŸÉ ÿßŸÑÿ¢ŸÑÿ© ÿßŸÑŸáŸàÿßÿ° ŸäÿÆÿ±ÿ¨ ÿ®ÿ®ÿ∑ÿ°. ÿßŸÑÿ¢ŸÜ ÿßŸÑÿ¢ŸÑÿ© ÿ™ŸÇŸäÿ≥ ÿ∂ÿ∫ÿ∑ ÿØŸÖŸÉ.</p>
          
          <p><strong>ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ŸÇŸÖŸäŸÜ <span class="kw1c-term-nl">(2 getallen)</span></strong></p>
          <p>ÿπŸÜÿØŸÖÿß ŸäŸèŸÇÿßÿ≥ ÿ∂ÿ∫ÿ∑ ÿØŸÖŸÉÿå ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ±ŸÇŸÖŸäŸÜ. ŸÖÿ´ŸÑÿßŸã: 120/80. ŸÜŸÇŸàŸÑ: "120 ÿπŸÑŸâ 80".</p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li><strong>ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ£ŸàŸÑ (120):</strong> Ÿáÿ∞ÿß ÿßŸÑÿ∂ÿ∫ÿ∑ ÿßŸÑÿπŸÑŸàŸä <span class="kw1c-term-nl">(bovendruk)</span>. ÿ™ŸÇŸäÿ≥Ÿá ÿπŸÜÿØŸÖÿß Ÿäÿ∂ÿÆ ŸÇŸÑÿ®ŸÉ.</li>
            <li><strong>ÿßŸÑÿ±ŸÇŸÖ ÿßŸÑÿ´ÿßŸÜŸä (80):</strong> Ÿáÿ∞ÿß ÿßŸÑÿ∂ÿ∫ÿ∑ ÿßŸÑÿ≥ŸÅŸÑŸä <span class="kw1c-term-nl">(onderdruk)</span>. ÿ™ŸÇŸäÿ≥Ÿá ÿπŸÜÿØŸÖÿß Ÿäÿ±ÿ™ÿßÿ≠ ŸÇŸÑÿ®ŸÉ.</li>
          </ul>
          
          <p><strong>ŸÖÿß ŸáŸà ÿßŸÑÿ¨ŸäÿØ ŸàŸÖÿß ŸáŸà ÿßŸÑŸÖÿ±ÿ™ŸÅÿπ ÿ¨ÿØÿßŸãÿü</strong></p>
          <table style="width: 100%; margin: 0.5rem 0; border-collapse: collapse; direction: ltr;">
            <tr style="background: rgba(34,197,94,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚úÖ ÿ¨ŸäÿØ <span class="kw1c-term-nl">(Goed)</span></td><td style="padding: 0.5rem; border: 1px solid var(--border);">120/80 ÿ£Ÿà ÿ£ŸÇŸÑ</td></tr>
            <tr style="background: rgba(249,115,22,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚ö†Ô∏è ÿßŸÜÿ™ÿ®Ÿá <span class="kw1c-term-nl">(Let op)</span></td><td style="padding: 0.5rem; border: 1px solid var(--border);">ÿ®ŸäŸÜ 120/80 Ÿà 140/90</td></tr>
            <tr style="background: rgba(239,68,68,0.1);"><td style="padding: 0.5rem; border: 1px solid var(--border);">‚ùå ŸÖÿ±ÿ™ŸÅÿπ ÿ¨ÿØÿßŸã <span class="kw1c-term-nl">(Te hoog)</span></td><td style="padding: 0.5rem; border: 1px solid var(--border);">ÿ£ÿπŸÑŸâ ŸÖŸÜ 140/90</td></tr>
          </table>
          <p>üí° <em>ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ ÿßŸÑŸÖÿ±ÿ™ŸÅÿπ ŸÑŸäÿ≥ ÿ¨ŸäÿØÿßŸã. ŸÇŸÑÿ®ŸÉ ŸäÿπŸÖŸÑ ÿ®ÿ¨ŸáÿØ ŸÉÿ®Ÿäÿ±. ÿ£ÿÆÿ®ÿ± ÿØÿßÿ¶ŸÖÿßŸã ŸÖÿ™ÿÆÿµÿµ ÿßŸÑÿ±ÿπÿßŸäÿ© <span class="kw1c-term-nl">(zorgprofessional)</span> ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿ∂ÿ∫ÿ∑ ÿßŸÑÿØŸÖ ŸÖÿ±ÿ™ŸÅÿπÿßŸã.</em></p>
          
          <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid var(--ec-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; direction: ltr; text-align: left;">
            <p style="margin: 0 0 0.5rem 0;"><strong>üá≥üá± Kernwoorden:</strong></p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">bloeddruk</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">manchet</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">bovendruk</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">onderdruk</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">te hoog</span>
            </div>
          </div>`
      },
      3: { // Pols Meten
        title: 'Pols Meten',
        B2: `<h3>Pols Meten</h3>
          <p>De pols is de voelbare drukgolf die ontstaat wanneer het hart bloed in de arteri√´n pompt. De pols kan op verschillende locaties worden gevoeld, waarvan de arteria radialis (pols) en de arteria carotis (hals) het meest worden gebruikt.</p>
          <p>Bij het meten van de pols beoordeel je drie aspecten: frequentie (aantal slagen per minuut), ritme (regelmatig of onregelmatig) en volume (kracht van de polsslag).</p>
          <p>Een normale polsfrequentie voor volwassenen in rust ligt tussen 60-100 slagen per minuut. Bradycardie (<60/min) en tachycardie (>100/min) kunnen wijzen op onderliggende aandoeningen.</p>`,
        B1: `<h3>Pols Meten</h3>
          <p>De pols is het kloppen dat je voelt als je hart pompt. Elke keer als je hart pompt, voel je een "tikje" in je pols. Je kunt de pols voelen op je pols (bij je hand) of in je hals.</p>
          <p><strong>Waar let je op bij pols meten?</strong></p>
          <p>Als je de pols meet, let je op 3 dingen:</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Hoe snel:</strong> Tel het aantal kloppen per minuut</li>
            <li><strong>Regelmatig of niet:</strong> Klopt het steeds even snel? Of soms sneller en soms langzamer?</li>
            <li><strong>Hoe sterk:</strong> Voel je de pols goed of nauwelijks?</li>
          </ul>
          <p><strong>Wat is normaal?</strong></p>
          <p>Normaal is 60 tot 100 keer per minuut. Te langzaam (minder dan 60) of te snel (meer dan 100) kan een probleem zijn. Meld dit altijd.</p>`,
        A2: `<h3>Pols Meten</h3>
          <p>De pols is het kloppen van je hart. Je kunt het voelen! We leggen uit hoe je de pols meet en waar je op let.</p>
          
          <p><strong>Wat is de pols?</strong></p>
          <p>Elke keer als je hart klopt, duwt het bloed door je lichaam. Dit voel je als een "tikje". Dat tikje noemen we de pols.</p>
          
          <p><strong>Waar voel je de pols?</strong></p>
          <p>Je kunt de pols op 2 plekken voelen:</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Op je pols:</strong> Leg 2 vingers aan de binnenkant van je pols, onder je duim.</li>
            <li><strong>In je hals:</strong> Leg 2 vingers naast je luchtpijp, in de zachte plek.</li>
          </ul>
          <p>üí° <em>Tip: Gebruik nooit je duim om de pols te voelen. Je duim heeft zelf een pols!</em></p>
          
          <p><strong>Hoe meet je de pols?</strong></p>
          <ol style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li>Leg 2 vingers op de pols of in de hals</li>
            <li>Kijk op de klok</li>
            <li>Tel het aantal kloppen in 1 minuut</li>
            <li>Schrijf het getal op</li>
          </ol>
          
          <p><strong>Waar let je op? (3 dingen)</strong></p>
          <table style="width: 100%; margin: 0.5rem 0; border-collapse: collapse;">
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>1. Hoe snel?</strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">Tel het aantal kloppen per minuut</td></tr>
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>2. Regelmatig?</strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">Klopt het steeds hetzelfde? Of soms snel, soms langzaam?</td></tr>
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>3. Hoe sterk?</strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">Voel je het goed? Of heel zacht?</td></tr>
          </table>
          
          <p><strong>Wat is normaal?</strong></p>
          <p>Normaal klopt je hart 60 tot 100 keer per minuut.</p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li>‚úÖ <strong>60 tot 100:</strong> Dit is goed</li>
            <li>‚ö†Ô∏è <strong>Minder dan 60:</strong> Te langzaam - vertel dit aan de zorgprofessional</li>
            <li>‚ö†Ô∏è <strong>Meer dan 100:</strong> Te snel - vertel dit aan de zorgprofessional</li>
          </ul>
          <p>üí° <em>Onthoud: Als iemand heeft gerend of geschrokken is, klopt het hart sneller. Dat is normaal. Wacht even en meet dan opnieuw.</em></p>`,
        AR: `<h3>ŸÇŸäÿßÿ≥ ÿßŸÑŸÜÿ®ÿ∂ <span class="kw1c-term-nl">(Pols meten)</span></h3>
          <p>ÿßŸÑŸÜÿ®ÿ∂ <span class="kw1c-term-nl">(pols)</span> ŸáŸà ŸÜÿ®ÿ∂ÿßÿ™ ŸÇŸÑÿ®ŸÉ. ŸäŸÖŸÉŸÜŸÉ ÿ£ŸÜ ÿ™ÿ¥ÿπÿ± ÿ®Ÿá! ŸÜÿ¥ÿ±ÿ≠ ŸÑŸÉ ŸÉŸäŸÅ ÿ™ŸÇŸäÿ≥ ÿßŸÑŸÜÿ®ÿ∂ ŸàŸÖÿß ÿßŸÑÿ∞Ÿä ÿ™ŸÜÿ™ÿ®Ÿá ÿ•ŸÑŸäŸá.</p>
          
          <p><strong>ŸÖÿß ŸáŸà ÿßŸÑŸÜÿ®ÿ∂ÿü <span class="kw1c-term-nl">(Wat is de pols?)</span></strong></p>
          <p>ŸÉŸÑ ŸÖÿ±ÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉÿå ŸäÿØŸÅÿπ ÿßŸÑÿØŸÖ ÿπÿ®ÿ± ÿ¨ÿ≥ŸÖŸÉ. ÿ™ÿ¥ÿπÿ± ÿ®Ÿáÿ∞ÿß ŸÉŸÄ "ŸÜŸÇÿ±ÿ©". ŸÜÿ≥ŸÖŸä Ÿáÿ∞Ÿá ÿßŸÑŸÜŸÇÿ±ÿ© ÿßŸÑŸÜÿ®ÿ∂.</p>
          
          <p><strong>ÿ£ŸäŸÜ ÿ™ÿ¥ÿπÿ± ÿ®ÿßŸÑŸÜÿ®ÿ∂ÿü <span class="kw1c-term-nl">(Waar voel je de pols?)</span></strong></p>
          <p>ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ¥ÿπŸàÿ± ÿ®ÿßŸÑŸÜÿ®ÿ∂ ŸÅŸä ŸÖŸÉÿßŸÜŸäŸÜ:</p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li><strong>ÿπŸÑŸâ ŸÖÿπÿµŸÖŸÉ <span class="kw1c-term-nl">(pols)</span>:</strong> ÿ∂ÿπ ÿ•ÿµÿ®ÿπŸäŸÜ ÿπŸÑŸâ ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿØÿßÿÆŸÑŸä ŸÖŸÜ ŸÖÿπÿµŸÖŸÉÿå ÿ™ÿ≠ÿ™ ÿ•ÿ®ŸáÿßŸÖŸÉ.</li>
            <li><strong>ŸÅŸä ÿ±ŸÇÿ®ÿ™ŸÉ <span class="kw1c-term-nl">(hals)</span>:</strong> ÿ∂ÿπ ÿ•ÿµÿ®ÿπŸäŸÜ ÿ®ÿ¨ÿßŸÜÿ® ÿßŸÑŸÇÿµÿ®ÿ© ÿßŸÑŸáŸàÿßÿ¶Ÿäÿ©ÿå ŸÅŸä ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÜÿßÿπŸÖÿ©.</li>
          </ul>
          <p>üí° <em>ŸÜÿµŸäÿ≠ÿ©: ŸÑÿß ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿ•ÿ®ŸáÿßŸÖŸÉ ÿ£ÿ®ÿØÿßŸã ŸÑŸÑÿ¥ÿπŸàÿ± ÿ®ÿßŸÑŸÜÿ®ÿ∂. ÿ•ÿ®ŸáÿßŸÖŸÉ ŸÑŸá ŸÜÿ®ÿ∂ ÿÆÿßÿµ ÿ®Ÿá!</em></p>
          
          <p><strong>ŸÉŸäŸÅ ÿ™ŸÇŸäÿ≥ ÿßŸÑŸÜÿ®ÿ∂ÿü <span class="kw1c-term-nl">(Hoe meet je de pols?)</span></strong></p>
          <ol style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li>ÿ∂ÿπ ÿ•ÿµÿ®ÿπŸäŸÜ ÿπŸÑŸâ ÿßŸÑŸÖÿπÿµŸÖ ÿ£Ÿà ÿßŸÑÿ±ŸÇÿ®ÿ©</li>
            <li>ÿßŸÜÿ∏ÿ± ÿ•ŸÑŸâ ÿßŸÑÿ≥ÿßÿπÿ©</li>
            <li>ÿπÿØ ÿπÿØÿØ ÿßŸÑŸÜÿ®ÿ∂ÿßÿ™ ŸÅŸä ÿØŸÇŸäŸÇÿ© Ÿàÿßÿ≠ÿØÿ©</li>
            <li>ÿßŸÉÿ™ÿ® ÿßŸÑÿ±ŸÇŸÖ</li>
          </ol>
          
          <p><strong>ŸÖÿß ÿßŸÑÿ∞Ÿä ÿ™ŸÜÿ™ÿ®Ÿá ÿ•ŸÑŸäŸáÿü (3 ÿ£ÿ¥Ÿäÿßÿ°) <span class="kw1c-term-nl">(Waar let je op?)</span></strong></p>
          <table style="width: 100%; margin: 0.5rem 0; border-collapse: collapse; direction: ltr;">
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>1. ŸÉŸÖ ÿßŸÑÿ≥ÿ±ÿπÿ©ÿü <span class="kw1c-term-nl">(Hoe snel?)</span></strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">ÿπÿØ ÿßŸÑŸÜÿ®ÿ∂ÿßÿ™ ŸÅŸä ÿßŸÑÿØŸÇŸäŸÇÿ©</td></tr>
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>2. ŸÖŸÜÿ™ÿ∏ŸÖÿü <span class="kw1c-term-nl">(Regelmatig?)</span></strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">ŸáŸÑ ŸäŸÜÿ®ÿ∂ ÿØÿßÿ¶ŸÖÿßŸã ÿ®ŸÜŸÅÿ≥ ÿßŸÑÿ≥ÿ±ÿπÿ©ÿü</td></tr>
            <tr><td style="padding: 0.5rem; border: 1px solid var(--border);"><strong>3. ŸÉŸÖ ÿßŸÑŸÇŸàÿ©ÿü <span class="kw1c-term-nl">(Hoe sterk?)</span></strong></td><td style="padding: 0.5rem; border: 1px solid var(--border);">ŸáŸÑ ÿ™ÿ¥ÿπÿ± ÿ®Ÿá ÿ¨ŸäÿØÿßŸãÿü ÿ£ŸÖ ÿ∂ÿπŸäŸÅ ÿ¨ÿØÿßŸãÿü</td></tr>
          </table>
          
          <p><strong>ŸÖÿß ŸáŸà ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿü <span class="kw1c-term-nl">(Wat is normaal?)</span></strong></p>
          <p>ÿπÿßÿØÿ© ŸäŸÜÿ®ÿ∂ ŸÇŸÑÿ®ŸÉ 60 ÿ•ŸÑŸâ 100 ŸÖÿ±ÿ© ŸÅŸä ÿßŸÑÿØŸÇŸäŸÇÿ©.</p>
          <ul style="margin: 0.5rem 0; padding-right: 1.5rem; padding-left: 0;">
            <li>‚úÖ <strong>60 ÿ•ŸÑŸâ 100:</strong> Ÿáÿ∞ÿß ÿ¨ŸäÿØ</li>
            <li>‚ö†Ô∏è <strong>ÿ£ŸÇŸÑ ŸÖŸÜ 60:</strong> ÿ®ÿ∑Ÿäÿ° ÿ¨ÿØÿßŸã - ÿ£ÿÆÿ®ÿ± ŸÖÿ™ÿÆÿµÿµ ÿßŸÑÿ±ÿπÿßŸäÿ© <span class="kw1c-term-nl">(zorgprofessional)</span></li>
            <li>‚ö†Ô∏è <strong>ÿ£ŸÉÿ´ÿ± ŸÖŸÜ 100:</strong> ÿ≥ÿ±Ÿäÿπ ÿ¨ÿØÿßŸã - ÿ£ÿÆÿ®ÿ± ŸÖÿ™ÿÆÿµÿµ ÿßŸÑÿ±ÿπÿßŸäÿ©</li>
          </ul>
          <p>üí° <em>ÿ™ÿ∞ŸÉÿ±: ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿ¥ÿÆÿµ ŸÇÿØ ÿ±ŸÉÿ∂ ÿ£Ÿà ÿÆÿßŸÅÿå ŸäŸÜÿ®ÿ∂ ÿßŸÑŸÇŸÑÿ® ÿ£ÿ≥ÿ±ÿπ. Ÿáÿ∞ÿß ÿ∑ÿ®ŸäÿπŸä. ÿßŸÜÿ™ÿ∏ÿ± ŸÇŸÑŸäŸÑÿßŸã ÿ´ŸÖ ŸÇÿ≥ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.</em></p>
          
          <div style="background: rgba(14, 165, 233, 0.1); border: 1px solid var(--ec-blue); border-radius: 8px; padding: 1rem; margin-top: 1rem; direction: ltr; text-align: left;">
            <p style="margin: 0 0 0.5rem 0;"><strong>üá≥üá± Kernwoorden:</strong></p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">pols</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">hartslag</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">hals</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">regelmatig</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">te snel</span>
              <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.2); color: var(--ec-blue);">te langzaam</span>
            </div>
          </div>`
      }
    };

    // ========================================
    // CHAT RESPONSES (pre-canned)
    // ========================================
    const CHAT_RESPONSES = [
      {
        keywords: ['formatieve', 'toets', 'toetsvragen'],
        text: `<p>Ik help je graag met het maken van een <strong>formatieve toets</strong>! Formatieve toetsen zijn ideaal om het leerproces te monitoren zonder cijfers.</p>
          <p><strong>Effectieve formats voor MBO Zorg:</strong></p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Kennisquiz</strong> - 5-10 meerkeuzevragen over theorie</li>
            <li><strong>Casusanalyse</strong> - Korte casus met open vragen</li>
            <li><strong>Begrippen koppelen</strong> - Match begrippen met definities</li>
            <li><strong>Stellingenspel</strong> - Waar/onwaar met onderbouwing</li>
          </ul>
          <p><strong>Tip:</strong> Koppel de toets aan een specifiek Werkproces (WP) uit het KD voor optimale afstemming.</p>
          <p>Wil je dat ik een formatieve toets genereer? Ga naar <strong>‚ú® Werkopdrachten</strong> en kies "Kennischeck" of "Toetsvraag".</p>`,
        citations: {
          all: ['ExpertCollege Toetsing & Beoordeling', 'KD 2026 - Formatief Toetsen'],
          materials: ['Jouw bestaande toetsen', 'Jouw lesplannen'],
          expertcollege: ['ExpertCollege Formatief Toetsen', 'ExpertCollege Vraagconstructie']
        }
      },
      {
        keywords: ['kd-werkprocessen', 'werkprocessen', 'dekken', 'afdekken', 'welke wp'],
        text: `<p>Goede vraag! Ik kan je helpen analyseren welke <strong>KD-werkprocessen</strong> je lessen afdekken.</p>
          <p><strong>Zo werkt de analyse:</strong></p>
          <ol style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li>Upload je lesplan bij <strong>üéØ Vaardigheden Check</strong></li>
            <li>e-Xpert SAM analyseert de inhoud automatisch</li>
            <li>Je ziet direct welke WP's gedekt zijn (‚úì) en welke ontbreken (üí°)</li>
          </ol>
          <p><strong>De belangrijkste werkprocessen voor MBO Zorg:</strong></p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>WP1</strong> - Gegevensverzameling & communicatie</li>
            <li><strong>WP2</strong> - Zorgplan & klinisch redeneren</li>
            <li><strong>WP3</strong> - Verpleegtechniek & medicatie</li>
            <li><strong>WP4</strong> - Evaluatie & kwaliteit</li>
            <li><strong>WP5</strong> - Samenwerking & reflectie</li>
          </ul>`,
        citations: {
          all: ['KD 2026 - Werkprocessen Overzicht', 'MBO Raad Kwalificatiestructuur'],
          materials: ['Jouw lesplannen', 'Jouw curriculum overzicht'],
          expertcollege: ['ExpertCollege KD Navigator', 'ExpertCollege Curriculum Mapping']
        }
      },
      {
        keywords: ['ebp', 'evidence', 'based', 'practice', 'wetenschappelijk'],
        text: `<p><strong>Evidence Based Practice (EBP)</strong> is het combineren van drie bronnen voor de beste zorgbeslissingen:</p>
          <p><strong>De 3 pijlers van EBP:</strong></p>
          <ol style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>Wetenschappelijk bewijs</strong> - Wat zegt de literatuur?</li>
            <li><strong>Klinische expertise</strong> - Wat is jouw professionele oordeel?</li>
            <li><strong>Pati√´ntvoorkeuren</strong> - Wat wil de zorgvrager zelf?</li>
          </ol>
          <p><strong>PICO-methode voor zoeken:</strong></p>
          <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
            <li><strong>P</strong>atient - Welke pati√´ntgroep?</li>
            <li><strong>I</strong>ntervention - Welke interventie?</li>
            <li><strong>C</strong>omparison - Vergeleken met wat?</li>
            <li><strong>O</strong>utcome - Welke uitkomst?</li>
          </ul>
          <p><strong>Tip:</strong> Laat studenten een PICO-vraag formuleren bij een praktijkcasus voor hands-on EBP ervaring.</p>`,
        citations: {
          all: ['ExpertCollege EBP Module', 'KD 2026 - Evidence Based Werken'],
          materials: ['Jouw EBP opdrachten', 'Jouw artikelenlijst'],
          expertcollege: ['ExpertCollege EBP Basis', 'ExpertCollege Literatuur Zoeken']
        }
      },
      {
        keywords: ['motiveer', 'motiveren', 'motivatie', 'bpv', 'stage'],
        text: `<p>Studenten motiveren voor BPV vraagt om een persoonlijke aanpak. Hier zijn bewezen strategie√´n:</p>
          <p><strong>1. Maak het relevant</strong> - Koppel theorie aan echte praktijksituaties die ze gaan meemaken.</p>
          <p><strong>2. Succeservaringen</strong> - Start met haalbare taken zodat ze succeservaringen opdoen.</p>
          <p><strong>3. Autonomie geven</strong> - Laat studenten zelf leerdoelen formuleren binnen kaders.</p>
          <p><strong>4. Rolmodellen</strong> - Nodig oud-studenten uit om te vertellen over hun BPV.</p>
          <p><strong>5. Reflectie-momenten</strong> - Plan wekelijkse korte check-ins om voortgang te bespreken.</p>
          <p><strong>Tip:</strong> Gebruik STARR-reflecties om studenten bewust te maken van hun groei!</p>`,
        citations: {
          all: ['Praktijkwijzer BPV MBO Zorg', 'KD 2026 WP5.2 - Reflecteert op eigen handelen'],
          materials: ['Jouw BPV-beoordelingsformulier', 'Jouw reflectieformat'],
          expertcollege: ['ExpertCollege BPV Begeleiding', 'ExpertCollege Motivatietechnieken']
        }
      },
      {
        keywords: ['vitale', 'functies', 'meten'],
        text: `<p>Voor het meten van vitale functies bij zorgsituaties raad ik de volgende systematische aanpak aan:</p>
          <p><strong>1. Bewustzijn</strong> - Beoordeel eerst of de persoon alert en geori√´nteerd is.</p>
          <p><strong>2. Ademhaling</strong> - Tel de ademfrequentie (normaal 12-20/min) en let op adempatroon.</p>
          <p><strong>3. Circulatie</strong> - Meet pols en bloeddruk, beoordeel huidskleur en temperatuur.</p>
          <p><strong>4. Temperatuur</strong> - Meet de lichaamstemperatuur (normaal 36.1-37.2¬∞C).</p>
          <p>Documenteer alle waarden met tijdstip in het zorgleefplan.</p>`,
        citations: {
          all: ['ExpertCollege Module 2.1 - Vitale Functies', 'KD 2026 WP1.1 - Verzamelt gegevens'],
          materials: ['Jouw lesmateriaal: Week 2 Practicum', 'Jouw toets: Vitale Functies Quiz'],
          expertcollege: ['ExpertCollege Module 2.1 - Vitale Functies', 'ExpertCollege Practicum - Meten en Wegen']
        }
      },
      {
        keywords: ['medicatie', 'veiligheid', 'toediening'],
        text: `<p>Medicatieveiligheid is cruciaal in de zorg. De 5-juistheden vormen de basis:</p>
          <p><strong>1. Juiste medicijn</strong> - Controleer naam en dosering op medicatielijst.</p>
          <p><strong>2. Juiste dosis</strong> - Controleer hoeveelheid en sterkte.</p>
          <p><strong>3. Juiste zorgvrager</strong> - Verifieer identiteit (naam + geboortedatum).</p>
          <p><strong>4. Juiste tijdstip</strong> - Volg voorgeschreven schema.</p>
          <p><strong>5. Juiste toedieningsweg</strong> - Oraal, rectaal, injectie, etc.</p>
          <p>Bij twijfel: ALTIJD overleggen met zorgprofessional of arts!</p>`,
        citations: {
          all: ['Protocol Medicatieveiligheid', 'KD 2026 WP3.2 - Bereidt medicatie voor'],
          materials: ['Jouw protocol: Medicatietoediening', 'Jouw checklist: 5-juistheden'],
          expertcollege: ['ExpertCollege Farmacologie Basis', 'ExpertCollege Medicatieveiligheid']
        }
      },
      {
        keywords: ['klinisch', 'redeneren', 'uitleggen'],
        text: `<p>Klinisch redeneren is het systematisch verzamelen en analyseren van gegevens om tot een verpleegkundige diagnose te komen. Voor niveau 3 studenten werkt een stapsgewijze aanpak het beste:</p>
          <p><strong>1. Observeren</strong> - Wat zie, hoor, voel en ruik je?</p>
          <p><strong>2. Signaleren</strong> - Wat is anders dan normaal?</p>
          <p><strong>3. Analyseren</strong> - Wat zou de oorzaak kunnen zijn?</p>
          <p><strong>4. Handelen</strong> - Welke actie is nu nodig?</p>
          <p>Gebruik altijd herkenbare casussen uit de praktijk!</p>`,
        citations: {
          all: ['ExpertCollege Module Klinisch Redeneren', 'KD 2026 WP2.3 - Analyseert gezondheidssituatie'],
          materials: ['Jouw casus: Mw. Jansen', 'Jouw lesbrief: Klinisch Redeneren Intro'],
          expertcollege: ['ExpertCollege Klinisch Redeneren Basis', 'ExpertCollege Casusanalyse']
        }
      }
    ];

    // ========================================
    // DEMO STATE (Central state management)
    // ========================================
    const DemoState = {
      selectedModule: 'klinisch-redeneren',
      selectedType: 'werkopdracht',
      questionCount: 5,
      selectedWp: 'WP2.3',
      currentVariant: 0,
      savedArtifacts: [],
      taalSection: 0,
      chatHistory: [],
      currentTemplate: null // Stores the currently displayed template for edit/save
    };

    let currentTaalSection = 0;

    // State for KD mapping
    let kdMappingState = {
      covered: 12,
      gaps: 2,
      total: 14
    };

    // ========================================
    // DRAWER SYSTEM
    // ========================================
    function openDrawer(title, subtitle, bodyHtml, footerHtml = '') {
      document.getElementById('drawer-title').textContent = title;
      document.getElementById('drawer-subtitle').textContent = subtitle || '';
      document.getElementById('drawer-body').innerHTML = bodyHtml;
      document.getElementById('drawer-footer').innerHTML = footerHtml;
      document.getElementById('drawer-overlay').classList.add('open');
      document.getElementById('drawer').classList.add('open');
    }

    function closeDrawer() {
      document.getElementById('drawer-overlay').classList.remove('open');
      document.getElementById('drawer').classList.remove('open');
    }

    // Close drawer on escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeDrawer();
    });

    // ========================================
    // BASIC UI FUNCTIONS
    // ========================================
    function showPanel(panelId) {
      document.querySelectorAll('.kw1c-panel').forEach(p => p.classList.remove('active'));
      document.getElementById('panel-' + panelId).classList.add('active');
      document.querySelectorAll('.kw1c-tab').forEach(t => t.classList.remove('active'));
      document.querySelector('[data-cta-id="cta-kw1c-tab-' + panelId + '"]').classList.add('active');
    }

    function showLevel(level) {
      document.querySelectorAll('[id^="content-"]').forEach(c => c.style.display = 'none');
      document.getElementById('content-' + level).style.display = 'block';
      document.querySelectorAll('.kw1c-level-tab').forEach(t => t.classList.remove('active'));
      const levelMap = { 'normal': 'normal', 'easy': 'easy', 'veryeasy': 'veryeasy', 'arabic': 'arabic' };
      document.querySelector('[data-cta-id="cta-kw1c-taal-level-' + levelMap[level] + '"]').classList.add('active');
    }

    // Helper: Get WP label from code
    function getWpLabel(wpCode) {
      const labels = {
        'WP1.1': 'Verzamelt gegevens',
        'WP1.2': 'Communiceert met zorgvrager',
        'WP1.3': 'Informeert en adviseert',
        'WP2.1': 'Stelt zorgplan op',
        'WP2.2': 'Co√∂rdineert de zorg',
        'WP2.3': 'Analyseert gezondheidssituatie',
        'WP3.1': 'Voert verpleegtechniek uit',
        'WP3.2': 'Bereidt medicatie voor',
        'WP4.1': 'Evalueert de zorg',
        'WP5.1': 'Werkt samen in team',
        'WP5.2': 'Reflecteert op handelen'
      };
      return labels[wpCode] || wpCode;
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toast-message').textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ========================================
    // DASHBOARD: ALL CLASSES DRAWER
    // ========================================
    function openAllClassesDrawer() {
      const body = SAMPLE_CLASSES.map(cls => `
        <div class="kw1c-drawer-card" style="cursor: pointer; transition: background 0.2s;" 
             onmouseover="this.style.background='rgba(8,145,178,0.08)'" 
             onmouseout="this.style.background='var(--bg-card)'"
             onclick="closeDrawer(); setTimeout(() => openClassDrawer('${cls.id}'), 200);">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <strong style="font-size: 1.1rem;">${cls.name}</strong>
              <div style="color: var(--text-muted); margin-top: 0.25rem;">${cls.students} studenten ‚Ä¢ ${cls.program}</div>
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
              <div class="kw1c-mini-donut" style="--progress: ${cls.progress};">
                <span>${cls.progress}%</span>
              </div>
              <span style="color: var(--text-muted);">‚Üí</span>
            </div>
          </div>
        </div>
      `).join('');
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
      `;
      
      openDrawer('Alle Klassen', `${SAMPLE_CLASSES.length} klassen actief dit semester`, body, footer);
    }

    // ========================================
    // DASHBOARD: NAKIJKEN DRAWER
    // ========================================
    function openNakijkenDrawer() {
      const assignments = [
        { student: 'Sophie M.', klas: 'VIG-3A', opdracht: 'Pijnanamnese ALTIS', type: 'Werkopdracht', deadline: 'Vandaag', urgent: true },
        { student: 'Ahmed K.', klas: 'VP-4B', opdracht: 'Medicatie 5-juistheden', type: 'Kennischeck', deadline: 'Vandaag', urgent: true },
        { student: 'Lisa v.D.', klas: 'VIG-3A', opdracht: 'Reflectie BPV Week 3', type: 'Reflectie', deadline: 'Morgen', urgent: false },
        { student: 'Tim B.', klas: 'Combi-1', opdracht: 'Vitale Functies Quiz', type: 'Toets', deadline: 'Morgen', urgent: false }
      ];
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title" style="color: var(--kd-partial);">‚ö° Urgent (deadline vandaag)</div>
          ${assignments.filter(a => a.urgent).map(a => `
            <div class="kw1c-drawer-card" style="border-left: 3px solid var(--kd-partial); cursor: pointer;" onclick="showToast('Nakijken: ${a.opdracht}'); closeDrawer();">
              <div style="display: flex; justify-content: space-between; align-items: start;">
                <div>
                  <strong>${a.student}</strong> <span style="color: var(--text-muted);">‚Ä¢ ${a.klas}</span>
                  <div style="margin-top: 0.25rem;">${a.opdracht}</div>
                  <span class="kw1c-badge" style="margin-top: 0.5rem;">${a.type}</span>
                </div>
                <span style="color: var(--kd-partial); font-weight: 600;">${a.deadline}</span>
              </div>
            </div>
          `).join('')}
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">üìã Deze week</div>
          ${assignments.filter(a => !a.urgent).map(a => `
            <div class="kw1c-drawer-card" style="cursor: pointer;" onclick="showToast('Nakijken: ${a.opdracht}'); closeDrawer();">
              <div style="display: flex; justify-content: space-between; align-items: start;">
                <div>
                  <strong>${a.student}</strong> <span style="color: var(--text-muted);">‚Ä¢ ${a.klas}</span>
                  <div style="margin-top: 0.25rem;">${a.opdracht}</div>
                  <span class="kw1c-badge" style="margin-top: 0.5rem;">${a.type}</span>
                </div>
                <span style="color: var(--text-muted);">${a.deadline}</span>
              </div>
            </div>
          `).join('')}
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="showToast('Alle opdrachten openen...'); closeDrawer();">Alle nakijken ‚Üí</button>
      `;
      
      openDrawer('Opdrachten Nakijken', '4 opdrachten wachten op beoordeling', body, footer);
    }

    // ========================================
    // DASHBOARD: VOORTGANG DRAWER
    // ========================================
    function openVoortgangDrawer() {
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">üìä Voortgang per klas</div>
          ${SAMPLE_CLASSES.map(cls => `
            <div class="kw1c-drawer-card">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                <strong>${cls.name}</strong>
                <span style="color: ${cls.progress >= 80 ? 'var(--kd-covered)' : cls.progress >= 60 ? 'var(--kd-partial)' : 'var(--kd-gap)'}; font-weight: 600;">
                  ${cls.progress >= 80 ? '‚úì Op schema' : cls.progress >= 60 ? '‚ö†Ô∏è Let op' : '‚ùå Achter'}
                </span>
              </div>
              <div class="kw1c-mini-progress">
                <div class="kw1c-mini-progress-fill" style="width: ${cls.progress}%; background: ${cls.progress >= 80 ? 'var(--kd-covered)' : cls.progress >= 60 ? 'var(--kd-partial)' : 'var(--kd-gap)'};"></div>
              </div>
              <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">
                ${cls.progress}% van leerdoelen dit blok behaald
              </div>
            </div>
          `).join('')}
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">üéØ Dit blok</div>
          <div class="kw1c-drawer-card">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
              <div style="text-align: center; padding: 1rem; background: rgba(34,197,94,0.1); border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--kd-covered);">76%</div>
                <div style="font-size: 0.75rem; color: var(--text-muted);">Gemiddelde voortgang</div>
              </div>
              <div style="text-align: center; padding: 1rem; background: rgba(8,145,178,0.1); border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--ec-teal);">Week 6/8</div>
                <div style="font-size: 0.75rem; color: var(--text-muted);">Huidige week</div>
              </div>
            </div>
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="showPanel('kdmapping'); closeDrawer();">Naar Vaardigheden Check ‚Üí</button>
      `;
      
      openDrawer('Voortgang Dit Blok', 'Overzicht alle klassen', body, footer);
    }

    // ========================================
    // DASHBOARD: KD GAPS DRAWER
    // ========================================
    function openKDGapsDrawer() {
      const gaps = [
        { wp: 'WP4.1', title: 'Evalueert de zorg', suggestion: 'Voeg een evaluatieopdracht toe aan les 7', action: 'Genereer evaluatieopdracht' },
        { wp: 'WP5.2', title: 'Reflecteert op handelen', suggestion: 'STARR-reflectie toevoegen aan BPV-begeleiding', action: 'Genereer reflectieopdracht' }
      ];
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title" style="color: var(--kd-partial);">‚ö†Ô∏è Ontbrekende werkprocessen</div>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
            Je huidige lessenreeks dekt nog niet alle KD-werkprocessen. Hier zijn suggesties om de ontbrekende vaardigheden te dekken:
          </p>
          ${gaps.map(gap => `
            <div class="kw1c-drawer-card" style="border-left: 3px solid var(--kd-partial);">
              <div style="display: flex; justify-content: space-between; align-items: start;">
                <div>
                  <div style="display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                    <span class="kw1c-badge kw1c-badge-wp">${gap.wp}</span>
                    <strong>${gap.title}</strong>
                  </div>
                  <p style="font-size: 0.875rem; color: var(--text-secondary); margin: 0.5rem 0;">
                    üí° ${gap.suggestion}
                  </p>
                </div>
              </div>
              <button class="kw1c-btn kw1c-btn-primary kw1c-btn-small" style="margin-top: 0.75rem;" 
                      onclick="showPanel('werkopdrachten'); closeDrawer(); showToast('${gap.action}...');">
                ‚ú® ${gap.action}
              </button>
            </div>
          `).join('')}
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title" style="color: var(--kd-covered);">‚úì Gedekte werkprocessen (12/14)</div>
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            ${['WP1.1', 'WP1.2', 'WP1.3', 'WP2.1', 'WP2.2', 'WP2.3', 'WP3.1', 'WP3.2', 'WP4.2', 'WP5.1', 'WP5.3', 'WP6.1'].map(wp => `
              <span class="kw1c-badge" style="background: rgba(34,197,94,0.15); color: var(--kd-covered);">‚úì ${wp}</span>
            `).join('')}
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="showPanel('kdmapping'); closeDrawer();">Naar Vaardigheden Check ‚Üí</button>
      `;
      
      openDrawer('KD Dekking', '12 van 14 werkprocessen gedekt', body, footer);
    }

    // ========================================
    // DASHBOARD: CLASS DRAWER
    // ========================================
    function openClassDrawer(classId) {
      const cls = SAMPLE_CLASSES.find(c => c.id === classId);
      if (!cls) return;
      
      const classStudents = SAMPLE_STUDENTS.filter(s => s.class === cls.name);
      const riskStudents = classStudents.filter(s => s.risk !== 'low');
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Overzicht</div>
          <div class="kw1c-drawer-card">
            <div class="kw1c-drawer-stat-row">
              <span class="kw1c-drawer-stat-label">Studenten</span>
              <span class="kw1c-drawer-stat-value">${cls.students}</span>
            </div>
            <div class="kw1c-drawer-stat-row">
              <span class="kw1c-drawer-stat-label">Gemiddelde voortgang</span>
              <span class="kw1c-drawer-stat-value">${cls.progress}%</span>
            </div>
            <div class="kw1c-drawer-stat-row">
              <span class="kw1c-drawer-stat-label">Aandacht nodig</span>
              <span class="kw1c-drawer-stat-value" style="color: var(--kd-partial);">${riskStudents.length}</span>
            </div>
            <div class="kw1c-mini-progress">
              <div class="kw1c-mini-progress-fill" style="width: ${cls.progress}%;"></div>
            </div>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Taalniveau Verdeling</div>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.15); color: var(--ec-blue);">${cls.levelDistribution.B2}√ó B2</span>
            <span class="kw1c-badge" style="background: rgba(249, 115, 22, 0.15); color: var(--ec-orange);">${cls.levelDistribution.B1}√ó B1</span>
            <span class="kw1c-badge" style="background: rgba(34, 197, 94, 0.15); color: var(--ec-green);">${cls.levelDistribution.A2}√ó A2</span>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Studenten (${classStudents.length} getoond)</div>
          <ul class="kw1c-drawer-list">
            ${classStudents.map(s => `
              <li class="kw1c-drawer-list-item" onclick="openStudentDrawer('${s.id}')" style="cursor: pointer;">
                <div class="kw1c-drawer-avatar" style="background: ${s.risk === 'high' ? 'var(--kd-gap)' : s.risk === 'medium' ? 'var(--kd-partial)' : 'var(--ec-purple)'};">${s.initials}</div>
                <div class="kw1c-drawer-list-content">
                  <div class="kw1c-drawer-list-name">${s.name}</div>
                  <div class="kw1c-drawer-list-meta">${s.progress}% ‚Ä¢ ${s.level} ${s.issue ? '‚Ä¢ ‚ö†Ô∏è' : ''}</div>
                </div>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="showToast('Klasoverzicht geopend'); closeDrawer();">Volledig Overzicht</button>
      `;
      
      openDrawer(cls.name, cls.program, body, footer);
    }

    // ========================================
    // DASHBOARD: STUDENT DRAWER
    // ========================================
    function openStudentDrawer(studentId) {
      const student = SAMPLE_STUDENTS.find(s => s.id === studentId);
      if (!student) return;
      
      const body = `
        <div class="kw1c-drawer-tabs">
          <button class="kw1c-drawer-tab active" onclick="showStudentTab(this, 'overview')">Overzicht</button>
          <button class="kw1c-drawer-tab" onclick="showStudentTab(this, 'taalniveau')">Taalniveau</button>
          <button class="kw1c-drawer-tab" onclick="showStudentTab(this, 'kd')">KD Signalen</button>
        </div>
        
        <div id="student-tab-overview">
          <div class="kw1c-drawer-section">
            <div class="kw1c-drawer-card">
              <div class="kw1c-drawer-stat-row">
                <span class="kw1c-drawer-stat-label">Voortgang</span>
                <span class="kw1c-drawer-stat-value">${student.progress}%</span>
              </div>
              <div class="kw1c-mini-progress">
                <div class="kw1c-mini-progress-fill" style="width: ${student.progress}%; background: ${student.progress < 60 ? 'var(--kd-gap)' : 'var(--ec-orange)'};"></div>
              </div>
            </div>
            <div class="kw1c-drawer-card">
              <div class="kw1c-drawer-stat-row">
                <span class="kw1c-drawer-stat-label">Klas</span>
                <span class="kw1c-drawer-stat-value">${student.class}</span>
              </div>
              <div class="kw1c-drawer-stat-row">
                <span class="kw1c-drawer-stat-label">Taalniveau</span>
                <span class="kw1c-drawer-stat-value">${student.level}</span>
              </div>
              <div class="kw1c-drawer-stat-row">
                <span class="kw1c-drawer-stat-label">Gemiste opdrachten</span>
                <span class="kw1c-drawer-stat-value" style="color: ${student.missedAssignments > 0 ? 'var(--kd-partial)' : 'inherit'};">${student.missedAssignments}</span>
              </div>
            </div>
            ${student.issue ? `<div class="kw1c-drawer-card" style="border-left: 3px solid var(--kd-partial);">
              <strong style="color: var(--kd-partial);">‚ö†Ô∏è Aandachtspunt</strong>
              <p style="font-size: 0.875rem; margin-top: 0.5rem;">${student.issue}</p>
            </div>` : ''}
          </div>
        </div>
        
        <div id="student-tab-taalniveau" style="display: none;">
          <div class="kw1c-drawer-section">
            <div class="kw1c-drawer-card">
              <div class="kw1c-drawer-stat-row">
                <span class="kw1c-drawer-stat-label">Huidig niveau</span>
                <span class="kw1c-drawer-stat-value">
                  <span class="kw1c-badge" style="background: ${student.level === 'B2' ? 'rgba(14, 165, 233, 0.15)' : student.level === 'B1' ? 'rgba(249, 115, 22, 0.15)' : 'rgba(34, 197, 94, 0.15)'}; color: ${student.level === 'B2' ? 'var(--ec-blue)' : student.level === 'B1' ? 'var(--ec-orange)' : 'var(--ec-green)'};">${student.level}</span>
                </span>
              </div>
            </div>
            <div class="kw1c-drawer-section-title">Voorbeeldtekst op ${student.level}</div>
            <div class="kw1c-drawer-card" style="font-size: 0.875rem; line-height: 1.6;">
              ${student.level === 'A2' ? 
                '<p>Het hart is een spier. Het hart pompt bloed door je lichaam. Het hart zit in je borst.</p>' :
                student.level === 'B1' ?
                '<p>Het hart is een spier die werkt als een pomp. Het hart zit in je borstkas, achter je borstbeen en tussen je longen.</p>' :
                '<p>Het hart is een holle spier die fungeert als de centrale pomp van het cardiovasculaire systeem. Het is gelegen in de thoraxholte.</p>'
              }
            </div>
          </div>
          <div class="kw1c-drawer-actions">
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" onclick="showToast('Niveau aangepast naar B1'); closeDrawer();">‚Üë Verhoog naar B1</button>
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" onclick="showToast('Niveau aangepast naar A2'); closeDrawer();">‚Üì Verlaag naar A2</button>
          </div>
        </div>
        
        <div id="student-tab-kd" style="display: none;">
          <div class="kw1c-drawer-section">
            <p style="font-size: 0.8125rem; color: var(--text-secondary); margin-bottom: 1rem; padding: 0.75rem; background: rgba(139,92,246,0.08); border-radius: 8px;">
              üí° <strong>KD Signalen</strong> tonen waar ${student.name.split(' ')[0]} extra aandacht nodig heeft om alle beroepsvaardigheden te ontwikkelen.
            </p>
            <div class="kw1c-drawer-section-title">Aandachtspunten (${student.kdGaps.length})</div>
            ${student.kdGaps.length > 0 ? student.kdGaps.map(code => {
              const gap = SAMPLE_KD_GAPS.find(g => g.code === code);
              return `<div class="kw1c-drawer-card" style="border-left: 3px solid var(--accent-purple);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                  <span class="kw1c-badge kw1c-badge-wp">${code}</span>
                  <span class="kw1c-badge kw1c-badge-tip">üí° Aandacht</span>
                </div>
                <p style="font-size: 0.9375rem; font-weight: 600; margin: 0.5rem 0;">${gap ? gap.title : 'Werkproces'}</p>
                ${gap ? `
                  <p style="font-size: 0.8125rem; color: var(--text-secondary); margin: 0.5rem 0;">
                    <strong>Waarom:</strong> ${gap.reason}
                  </p>
                  <p style="font-size: 0.8125rem; color: var(--text-secondary); margin: 0.5rem 0;">
                    <strong>Belangrijk omdat:</strong> ${gap.whyImportant}
                  </p>
                  <div style="background: rgba(34,197,94,0.1); padding: 0.5rem 0.75rem; border-radius: 6px; margin-top: 0.75rem;">
                    <p style="font-size: 0.8125rem; color: var(--kd-covered); margin: 0;">
                      <strong>‚úÖ Actie voor ${student.name.split(' ')[0]}:</strong> ${gap.actionForStudent || gap.suggestedActivity}
                    </p>
                  </div>
                  <div style="margin-top: 0.75rem;">
                    <span class="kw1c-badge" style="background: rgba(139,92,246,0.15); color: var(--ec-purple);">üìö ${gap.suggestedModule}</span>
                  </div>
                ` : ''}
              </div>`;
            }).join('') : '<div class="kw1c-drawer-card" style="border-left: 3px solid var(--kd-covered);"><p style="color: var(--kd-covered); margin: 0;">‚úì <strong>Uitstekend!</strong> Alle KD-vaardigheden zijn op schema. Geen extra aandachtspunten.</p></div>'}
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="openInterventionPlanDrawer('${student.id}');">Plan Interventie</button>
      `;
      
      openDrawer(student.name, `${student.class} ‚Ä¢ ${student.level}`, body, footer);
    }

    // ========================================
    // STUDENT: INTERVENTION PLAN DRAWER
    // ========================================
    function openInterventionPlanDrawer(studentId) {
      const student = SAMPLE_STUDENTS.find(s => s.id === studentId);
      if (!student) return;
      
      // Generate personalized recommendations based on student issues
      const recommendations = generateInterventionRecommendations(student);
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title" style="color: var(--ec-purple);">‚ú® Aanbevolen Interventieplan</div>
          <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">
            Dit plan is gegenereerd door e-Xpert SAM op basis van ${student.name}'s voortgang en aandachtspunten.
          </p>
          
          ${recommendations.map((rec, i) => `
            <div class="kw1c-drawer-card" style="border-left: 3px solid ${rec.color};">
              <div style="display: flex; gap: 0.75rem; align-items: start;">
                <span style="font-size: 1.25rem;">${rec.icon}</span>
                <div style="flex: 1;">
                  <strong style="display: block; margin-bottom: 0.25rem;">${rec.title}</strong>
                  <p style="font-size: 0.875rem; color: var(--text-secondary); margin: 0;">${rec.description}</p>
                  ${rec.module ? `<div style="margin-top: 0.5rem;"><span class="kw1c-badge" style="background: rgba(139,92,246,0.15); color: var(--ec-purple);">üìö ${rec.module}</span></div>` : ''}
                </div>
                <input type="checkbox" checked style="width: 18px; height: 18px; accent-color: var(--ec-purple);">
              </div>
            </div>
          `).join('')}
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">üí¨ Bespreek met e-Xpert SAM</div>
          <p style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.75rem;">
            Voeg eigen aanbevelingen toe of vraag e-Xpert SAM om alternatieven.
          </p>
          <div id="intervention-chat" style="background: var(--bg-secondary); border-radius: 8px; padding: 0.75rem; margin-bottom: 0.75rem; max-height: 150px; overflow-y: auto;">
            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
              <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--ec-purple), var(--ec-teal)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.625rem; color: white; flex-shrink: 0;">ü§ñ</div>
              <div style="background: var(--bg-card); padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.8125rem;">
                <p style="margin: 0;">Ik heb dit plan opgesteld voor ${student.name}. Wil je iets aanpassen of toevoegen? Bijvoorbeeld extra oefeningen, een gesprek inplannen, of een andere aanpak?</p>
              </div>
            </div>
          </div>
          <div style="display: flex; gap: 0.5rem;">
            <input type="text" id="intervention-chat-input" placeholder="Typ je vraag of aanvulling..." 
                   style="flex: 1; padding: 0.5rem 0.75rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.875rem;"
                   onkeypress="if(event.key==='Enter')sendInterventionChat('${student.id}')">
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" onclick="sendInterventionChat('${student.id}')">Verzend</button>
          </div>
          <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap;">
            <button class="kw1c-badge" style="cursor: pointer; border: none;" onclick="addInterventionSuggestion('Voeg extra praktijkoefening toe')">+ Praktijkoefening</button>
            <button class="kw1c-badge" style="cursor: pointer; border: none;" onclick="addInterventionSuggestion('Plan een 1-op-1 gesprek in')">+ 1-op-1 gesprek</button>
            <button class="kw1c-badge" style="cursor: pointer; border: none;" onclick="addInterventionSuggestion('Koppel aan buddy voor samenwerking')">+ Buddy koppelen</button>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">üìß E-mail Concept</div>
          <div class="kw1c-drawer-card" style="background: var(--bg-secondary);">
            <p style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem;">Onderwerp: Interventieplan - ${student.name}</p>
            <textarea id="intervention-email-body" style="width: 100%; min-height: 80px; padding: 0.5rem; border: 1px solid var(--border); border-radius: 6px; font-size: 0.8125rem; resize: vertical;">Beste ${student.name.split(' ')[0]},

Naar aanleiding van je voortgang heb ik een plan opgesteld om je te helpen met ${student.issue || 'je leerdoelen'}.

Actiepunten:
${recommendations.map(r => `‚Ä¢ ${r.title}`).join('\n')}

Laat me weten als je vragen hebt of als je een afspraak wilt maken.

Met vriendelijke groet,
Mw. de Vries</textarea>
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="openStudentDrawer('${student.id}');">‚Üê Terug</button>
        <button class="kw1c-btn kw1c-btn-secondary" onclick="sendInterventionEmail('${student.id}'); showToast('üìß E-mail verstuurd naar ${student.name}');">
          üìß E-mail Student
        </button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="saveInterventionPlan('${student.id}'); showToast('‚úÖ Interventieplan opgeslagen'); closeDrawer();">
          ‚úÖ Plan Opslaan
        </button>
      `;
      
      openDrawer(`Interventieplan: ${student.name}`, `${student.class} ‚Ä¢ Voortgang ${student.progress}%`, body, footer);
    }
    
    function generateInterventionRecommendations(student) {
      const recommendations = [];
      
      // Based on issue type
      if (student.issue && student.issue.includes('Klinisch Redeneren')) {
        recommendations.push({
          icon: 'üìñ',
          title: 'Herhaal e-learningmodule "Klinisch Redeneren bij Pijn"',
          description: 'Doorloop de module opnieuw, focus op de ALTIS-methode en pijnanamnese.',
          module: 'E-learning: Klinisch Redeneren',
          color: 'var(--ec-purple)'
        });
        recommendations.push({
          icon: 'üéØ',
          title: 'Let extra op het stellen van open vragen',
          description: 'Bij het oefenen van anamnese, oefen met het stellen van open vragen in plaats van gesloten vragen.',
          color: 'var(--ec-teal)'
        });
      }
      
      if (student.issue && student.issue.includes('gemiste opdrachten')) {
        recommendations.push({
          icon: 'üìã',
          title: 'Maak gemiste opdrachten alsnog af',
          description: `Er staan nog ${student.missedAssignments} opdrachten open. Maak deze uiterlijk volgende week af.`,
          color: 'var(--kd-partial)'
        });
        recommendations.push({
          icon: 'üìÖ',
          title: 'Stel een studieplan op met deadlines',
          description: 'Plan vaste momenten in voor het maken van opdrachten om achterstand te voorkomen.',
          color: 'var(--ec-blue)'
        });
      }
      
      if (student.issue && student.issue.includes('Taalniveau')) {
        recommendations.push({
          icon: 'üìö',
          title: 'Gebruik lesmateriaal op taalniveau ${student.level}',
          description: 'Alle opdrachten worden automatisch aangepast naar jouw taalniveau.',
          module: 'Aangepast lesmateriaal',
          color: 'var(--ec-green)'
        });
        recommendations.push({
          icon: 'üó£Ô∏è',
          title: 'Extra taalondersteuning inplannen',
          description: 'Neem contact op met de taalcoach voor extra begeleiding.',
          color: 'var(--ec-orange)'
        });
      }
      
      if (student.issue && student.issue.includes('BPV')) {
        recommendations.push({
          icon: 'üìù',
          title: 'Rond BPV-beoordeling af',
          description: 'Vul de BPV-reflectie in en plan een beoordelingsgesprek met je werkbegeleider.',
          module: 'BPV Reflectieformulier',
          color: 'var(--kd-partial)'
        });
      }
      
      // KD gaps recommendations
      student.kdGaps.forEach(code => {
        const gap = SAMPLE_KD_GAPS.find(g => g.code === code);
        if (gap) {
          recommendations.push({
            icon: 'üí°',
            title: `Oefen ${gap.title.toLowerCase()}`,
            description: gap.suggestedActivity,
            module: gap.suggestedModule,
            color: 'var(--accent-purple)'
          });
        }
      });
      
      // Add generic recommendation if needed
      if (recommendations.length === 0) {
        recommendations.push({
          icon: '‚ú®',
          title: 'Houd de goede voortgang vast',
          description: 'Je bent goed op weg! Blijf consistent werken aan je opdrachten.',
          color: 'var(--kd-covered)'
        });
      }
      
      // Always add reflection
      recommendations.push({
        icon: 'üîÑ',
        title: 'Onthoud: Reflecteer wekelijks op je voortgang',
        description: 'Neem elke week 10 minuten om te reflecteren op wat goed ging en wat beter kan.',
        color: 'var(--ec-teal)'
      });
      
      return recommendations;
    }
    
    function sendInterventionChat(studentId) {
      const input = document.getElementById('intervention-chat-input');
      const chat = document.getElementById('intervention-chat');
      const message = input.value.trim();
      
      if (!message) return;
      
      // Add user message
      chat.innerHTML += `
        <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem; justify-content: flex-end;">
          <div style="background: var(--ec-purple); color: white; padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.8125rem; max-width: 80%;">
            <p style="margin: 0;">${message}</p>
          </div>
        </div>
      `;
      input.value = '';
      chat.scrollTop = chat.scrollHeight;
      
      // Simulate AI response after delay
      setTimeout(() => {
        const responses = [
          'Goed idee! Ik heb dit toegevoegd aan het interventieplan. Wil je ook een deadline instellen?',
          'Ik begrijp het. Een persoonlijk gesprek kan inderdaad helpen. Zal ik een e-mail concept maken om een afspraak voor te stellen?',
          'Dat is een effectieve aanpak. Onderzoek toont aan dat peer-learning de motivatie verhoogt. Ik voeg dit toe aan de aanbevelingen.',
          'Prima! Ik pas het plan aan. Is er nog iets anders dat je wilt toevoegen voordat je het plan deelt met de student?'
        ];
        const response = responses[Math.floor(Math.random() * responses.length)];
        
        chat.innerHTML += `
          <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
            <div style="width: 24px; height: 24px; background: linear-gradient(135deg, var(--ec-purple), var(--ec-teal)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.625rem; color: white; flex-shrink: 0;">ü§ñ</div>
            <div style="background: var(--bg-card); padding: 0.5rem 0.75rem; border-radius: 8px; font-size: 0.8125rem;">
              <p style="margin: 0;">${response}</p>
            </div>
          </div>
        `;
        chat.scrollTop = chat.scrollHeight;
      }, 800);
    }
    
    function addInterventionSuggestion(suggestion) {
      const input = document.getElementById('intervention-chat-input');
      input.value = suggestion;
      input.focus();
    }
    
    function sendInterventionEmail(studentId) {
      const student = SAMPLE_STUDENTS.find(s => s.id === studentId);
      const emailBody = document.getElementById('intervention-email-body').value;
      console.log('Sending email to', student?.name, ':', emailBody);
      // In real app, this would send the email
    }
    
    function saveInterventionPlan(studentId) {
      const student = SAMPLE_STUDENTS.find(s => s.id === studentId);
      console.log('Saving intervention plan for', student?.name);
      // In real app, this would save the plan
    }

    function showStudentTab(btn, tabId) {
      btn.parentElement.querySelectorAll('.kw1c-drawer-tab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      document.querySelectorAll('[id^="student-tab-"]').forEach(t => t.style.display = 'none');
      document.getElementById('student-tab-' + tabId).style.display = 'block';
    }

    // ========================================
    // KD MAPPING: FILE UPLOAD SIMULATION
    // ========================================
    function simulateFileUpload() {
      const dropzone = document.querySelector('[data-cta-id="cta-kw1c-kd-upload-lesplan"]');
      const fileDisplay = dropzone.querySelector('.kw1c-dropzone-file');
      const iconEl = dropzone.querySelector('.kw1c-dropzone-icon');
      const textEl = dropzone.querySelector('.kw1c-dropzone-text');
      
      // Pick a random file
      const randomFile = SAMPLE_FILES[Math.floor(Math.random() * SAMPLE_FILES.length)];
      
      // Show uploading state
      iconEl.textContent = '‚è≥';
      textEl.textContent = 'Uploading...';
      fileDisplay.innerHTML = `<span style="color: var(--text-muted);">Bezig met uploaden...</span>`;
      dropzone.style.borderColor = 'var(--accent-cyan)';
      dropzone.style.background = 'rgba(8, 145, 178, 0.08)';
      
      // After delay, show success
      setTimeout(() => {
        iconEl.textContent = '‚úÖ';
        textEl.textContent = 'Bestand ge√ºpload! Klik om te wijzigen';
        fileDisplay.innerHTML = `
          <div style="display: flex; flex-direction: column; gap: 0.25rem;">
            <span style="color: var(--text-primary); font-weight: 500;">‚úì ${randomFile.name}</span>
            <span style="color: var(--text-muted); font-size: 0.75rem;">${randomFile.size} ‚Ä¢ Ge√ºpload ${randomFile.date}</span>
          </div>
        `;
        dropzone.style.borderColor = 'var(--kd-full)';
        dropzone.style.background = 'rgba(34, 197, 94, 0.05)';
        
        showToast(`Bestand "${randomFile.name}" ge√ºpload!`);
        
        // Reset style after a moment
        setTimeout(() => {
          dropzone.style.background = 'var(--bg-input)';
        }, 2000);
      }, 1200);
    }

    // ========================================
    // KD MAPPING: START MAPPING (Progress Simulation)
    // ========================================
    function startKDMapping() {
      const body = `
        <div class="kw1c-mapping-progress">
          <div class="kw1c-mapping-spinner"></div>
          <h3 style="margin-bottom: 0.5rem;">Vaardigheden worden geanalyseerd...</h3>
          <p style="color: var(--text-muted); font-size: 0.875rem;">We checken welke beroepsvaardigheden in je lesplan zitten</p>
          
          <div class="kw1c-mapping-steps">
            <div class="kw1c-mapping-step done" id="step1">‚úì Document geladen</div>
            <div class="kw1c-mapping-step active" id="step2">‚è≥ Leerdoelen herkennen...</div>
            <div class="kw1c-mapping-step" id="step3">‚óã Vaardigheden matchen</div>
            <div class="kw1c-mapping-step" id="step4">‚óã Tips zoeken</div>
          </div>
        </div>
      `;
      
      openDrawer('Vaardigheden Check', 'Lessenreeks Klinisch Redeneren', body, '');
      
      // Simulate progress
      setTimeout(() => {
        document.getElementById('step2').className = 'kw1c-mapping-step done';
        document.getElementById('step2').textContent = '‚úì 8 leerdoelen gevonden';
        document.getElementById('step3').className = 'kw1c-mapping-step active';
        document.getElementById('step3').textContent = '‚è≥ Vaardigheden matchen...';
      }, 1200);
      
      setTimeout(() => {
        document.getElementById('step3').className = 'kw1c-mapping-step done';
        document.getElementById('step3').textContent = '‚úì 12 van 14 vaardigheden gedekt';
        document.getElementById('step4').className = 'kw1c-mapping-step active';
        document.getElementById('step4').textContent = '‚è≥ Tips zoeken voor ontbrekende...';
      }, 2400);
      
      setTimeout(() => {
        document.getElementById('step4').className = 'kw1c-mapping-step done';
        document.getElementById('step4').textContent = '‚úì 2 tips gevonden';
        
        // Show completion
        document.querySelector('.kw1c-mapping-spinner').style.display = 'none';
        document.querySelector('.kw1c-mapping-progress h3').textContent = '‚úì Check Voltooid!';
        document.querySelector('.kw1c-mapping-progress h3').style.color = 'var(--kd-covered)';
        
        // Add footer
        document.getElementById('drawer-footer').innerHTML = `
          <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button>
          <button class="kw1c-btn kw1c-btn-primary" onclick="closeDrawer(); showToast('Resultaten zichtbaar in overzicht');">Bekijk Resultaten</button>
        `;
      }, 3600);
    }

    // ========================================
    // KD MAPPING: GAP DRAWER (Teacher-friendly)
    // ========================================
    function openGapDrawer(gapIndex) {
      const gap = SAMPLE_KD_GAPS[gapIndex];
      if (!gap) return;
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-card" style="border-left: 3px solid var(--accent-purple);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
              <span class="kw1c-badge kw1c-badge-wp">${gap.code}</span>
              <span class="kw1c-badge kw1c-badge-tip">üí° Tip</span>
            </div>
            <h4 style="margin-bottom: 0.5rem;">Je studenten missen nog: ${gap.title}</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary);">${gap.reason}</p>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Waarom is dit belangrijk?</div>
          <div class="kw1c-drawer-card" style="background: rgba(124, 58, 237, 0.05); border: none;">
            <p style="font-size: 0.875rem; color: var(--text-primary); line-height: 1.6;">${gap.whyImportant}</p>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Aanbevolen Oplossing</div>
          <div class="kw1c-drawer-card" style="border-left: 3px solid var(--ec-green);">
            <strong style="color: var(--ec-green);">üìö ${gap.suggestedModule}</strong>
            <p style="font-size: 0.875rem; margin-top: 0.5rem; color: var(--text-secondary);">
              <strong>Voorgestelde activiteit:</strong><br>
              ${gap.suggestedActivity}
            </p>
            <div style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-card); border-radius: 6px;">
              <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem;">Beschikbaar in ExpertCollege:</div>
              <div style="font-size: 0.875rem;">‚úì E-learning module (45 min)</div>
              <div style="font-size: 0.875rem;">‚úì Formatieve toets (10 vragen)</div>
              <div style="font-size: 0.875rem;">‚úì BPV-opdracht</div>
            </div>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Alternatieve Opties</div>
          <div class="kw1c-drawer-card">
            <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" style="width: 100%; justify-content: flex-start; margin-bottom: 0.5rem;" onclick="generateFromGap('${gap.code}', '${gap.title}')">
              ‚ú® Genereer met e-Xpert SAM
            </button>
            <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" style="width: 100%; justify-content: flex-start;" onclick="showToast('Zoeken in corpus...'); closeDrawer();">
              üîç Zoek in eigen materialen
            </button>
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Annuleren</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="addGapSolution(${gapIndex})">+ Toevoegen aan Lesplan</button>
      `;
      
      openDrawer('Suggestie voor je les', gap.title + ' (' + gap.code + ')', body, footer);
    }
    
    // Generate assignment from gap suggestion
    function generateFromGap(wpCode, wpTitle) {
      closeDrawer();
      
      // Navigate to werkopdrachten panel
      showPanel('werkopdrachten');
      
      // Set the WP selector to the gap's code
      const wpSelect = document.querySelector('[data-cta-id="cta-kw1c-gen-wp-select"]');
      if (wpSelect) {
        wpSelect.value = wpCode;
      }
      
      // Set selected WP in state
      DemoState.selectedWp = wpCode;
      DemoState.selectedType = 'werkopdracht';
      
      // Show generating state
      showToast(`e-Xpert SAM genereert opdracht voor ${wpTitle}...`);
      
      // Generate the assignment after a brief delay
      setTimeout(() => {
        generateAssignment();
      }, 500);
    }

    function addGapSolution(gapIndex) {
      // Update the specific gap row by ID (fixes WP5.2 bug)
      const gapRow = document.getElementById('gap-row-' + gapIndex);
      if (gapRow) {
        gapRow.style.background = 'rgba(34, 197, 94, 0.08)';
        gapRow.style.transition = 'background 0.5s ease';
        const statusCell = gapRow.querySelector('td:last-child');
        if (statusCell) {
          statusCell.innerHTML = '<span class="kw1c-badge kw1c-badge-covered">‚úì Toegevoegd</span>';
        }
      }
      
      // Update coverage stats
      kdMappingState.covered++;
      kdMappingState.gaps--;
      updateCoverageDisplay();
      
      // Auto-close drawer after short delay
      setTimeout(() => {
        closeDrawer();
        // Show contextual toast based on remaining tips
        if (kdMappingState.gaps > 0) {
          showToast(`Toegevoegd aan je lesplan! Nog ${kdMappingState.gaps} tip beschikbaar.`);
        } else {
          showToast('Gefeliciteerd! Je lessenreeks dekt nu alle 14 vaardigheden! üéâ');
        }
      }, 400);
    }

    function updateCoverageDisplay() {
      const pct = Math.round((kdMappingState.covered / kdMappingState.total) * 100);
      document.querySelector('.kw1c-progress-fill.green').style.width = pct + '%';
      document.querySelector('.kw1c-progress-header span:last-child').innerHTML = `<strong>${kdMappingState.covered}</strong> / ${kdMappingState.total}`;
      document.querySelector('.kw1c-badge-covered').textContent = '‚úì ' + kdMappingState.covered + ' Gedekt';
      document.querySelector('.kw1c-badge-tip').textContent = 'üí° ' + kdMappingState.gaps + ' Tips';
      
      // Update the coverage count text
      const coverageCount = document.getElementById('coverage-count');
      if (coverageCount) {
        coverageCount.textContent = kdMappingState.covered;
      }
    }

    // ========================================
    // KD MAPPING: UPDATE TABLE BY OPLEIDING
    // ========================================
    function updateKDTable(opleidingKey) {
      const mapping = KD_MAPPINGS[opleidingKey];
      if (!mapping) return;
      
      const tbody = document.querySelector('#panel-kdmapping tbody[data-list="mappings"]');
      if (!tbody) return;
      
      // Update header coverage
      const coverageEl = document.querySelector('#panel-kdmapping .kw1c-progress-header span:last-child');
      if (coverageEl) {
        const parts = mapping.coverage.split('/');
        coverageEl.innerHTML = `Je lessenreeks dekt <strong>${parts[0]}</strong> van <strong>${parts[1]}</strong> beroepsvaardigheden`;
      }
      
      // Build new table rows
      tbody.innerHTML = mapping.rows.map(row => {
        let statusBadge = '';
        if (row.status === 'full') {
          statusBadge = '<span class="kw1c-badge kw1c-badge-covered">‚úì Gedekt</span>';
        } else if (row.status === 'partial') {
          statusBadge = '<span class="kw1c-badge kw1c-badge-partial">‚ö° Deels</span>';
        } else {
          statusBadge = `<span class="kw1c-badge kw1c-badge-gap">üí° Tip</span>
            <button class="kw1c-btn kw1c-btn-ghost kw1c-btn-small" style="margin-left: 0.5rem;" onclick="openGapDrawerForWp('${row.wp}')">
              Bekijk suggestie ‚Üí
            </button>`;
        }
        
        return `<tr${row.status === 'gap' ? ' class="kw1c-gap-row"' : ''}>
          <td>${row.les}</td>
          <td>
            <div>${row.desc}</div>
            <span class="kw1c-wp-code-secondary">${row.wp}</span>
          </td>
          <td>${statusBadge}</td>
        </tr>`;
      }).join('');
      
      showToast(`Geladen: ${mapping.title}`);
    }
    
    function openGapDrawerForWp(wpCode) {
      // Find matching gap in current sample data
      const gap = SAMPLE_KD_GAPS.find(g => g.wp === wpCode) || SAMPLE_KD_GAPS[0];
      openGapDrawer(SAMPLE_KD_GAPS.indexOf(gap));
    }

    // ========================================
    // KD MAPPING: CSV EXPORT
    // ========================================
    function exportMappingCSV() {
      const csvContent = `Jouw les,Wat studenten leren,KD Code,Status
Les 1: Vitale functies meten,Informatie verzamelen over een zorgvrager,WP1.1,Gedekt
Les 2: Klinisch redeneren basis,Inschatten wat er met een zorgvrager aan de hand is,WP2.3,Gedekt
Les 3: Medicatieveiligheid,Veilig omgaan met medicijnen,WP3.2,Gedekt
Les 4: Verpleegplan opstellen,Een zorgplan schrijven,WP2.1,Gedekt
Les 5: Zorgvrager communicatie,Goed communiceren met zorgvragers,WP1.3,Gedekt
Les 6: Hygi√´ne protocollen,Verpleegtechnische handelingen uitvoeren,WP3.1,Gedekt
-,Kijken of de zorg goed werkt,WP4.1,Tip - niet gedekt
-,Nadenken over je eigen handelen,WP5.2,Tip - niet gedekt`;
      
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'vaardigheden_check_' + new Date().toISOString().slice(0,10) + '.csv';
      link.click();
      showToast('CSV gedownload!');
    }

    // ========================================
    // TAALNIVEAUS: SECTION NAVIGATION
    // ========================================
    function navigateTaalSection(direction) {
      currentTaalSection = Math.max(0, Math.min(SAMPLE_TAAL_SECTIONS.length - 1, currentTaalSection + direction));
      DemoState.taalSection = currentTaalSection;
      const section = SAMPLE_TAAL_SECTIONS[currentTaalSection];
      const content = TAAL_CONTENT[currentTaalSection];
      
      // Update header
      const headerCard = document.querySelector('#panel-taalniveaus .kw1c-card');
      if (headerCard) {
        const title = headerCard.querySelector('.kw1c-card-title');
        const subtitle = headerCard.querySelector('.kw1c-card-title + p');
        if (title) title.textContent = 'üìñ ' + section.module;
        if (subtitle) subtitle.innerHTML = `Module: ${section.title} ‚Ä¢ Hoofdstuk ${section.chapter}`;
      }
      
      // Update ALL content viewers (B2, B1, A2)
      if (content) {
        const contentNormal = document.getElementById('content-normal');
        const contentEasy = document.getElementById('content-easy');
        const contentVeryeasy = document.getElementById('content-veryeasy');
        
        // The elements ARE the viewers, so update their inner content areas
        if (contentNormal) {
          // Keep the level indicator, update the rest
          const indicator = contentNormal.querySelector('.kw1c-level-indicator').outerHTML;
          contentNormal.innerHTML = indicator + content.B2;
        }
        if (contentEasy) {
          const indicator = contentEasy.querySelector('.kw1c-level-indicator').outerHTML;
          contentEasy.innerHTML = indicator + content.B1;
        }
        if (contentVeryeasy) {
          const indicator = contentVeryeasy.querySelector('.kw1c-level-indicator').outerHTML;
          contentVeryeasy.innerHTML = indicator + content.A2;
        }
        
        // Update Arabic content
        const contentArabic = document.getElementById('content-arabic');
        if (contentArabic && content.AR) {
          const indicator = contentArabic.querySelector('.kw1c-level-indicator').outerHTML;
          contentArabic.innerHTML = indicator + content.AR;
        }
      }
      
      showToast(`Sectie ${currentTaalSection + 1}/${SAMPLE_TAAL_SECTIONS.length}: ${section.title}`);
    }
    
    // Initialize Taalniveaus with first section content
    function initTaalContent() {
      if (TAAL_CONTENT[0]) {
        const content = TAAL_CONTENT[0];
        const contentNormal = document.getElementById('content-normal');
        const contentEasy = document.getElementById('content-easy');
        const contentVeryeasy = document.getElementById('content-veryeasy');
        
        // The elements ARE the viewers, so update their inner content areas
        if (contentNormal) {
          const indicator = contentNormal.querySelector('.kw1c-level-indicator').outerHTML;
          contentNormal.innerHTML = indicator + content.B2;
        }
        if (contentEasy) {
          const indicator = contentEasy.querySelector('.kw1c-level-indicator').outerHTML;
          contentEasy.innerHTML = indicator + content.B1;
        }
        if (contentVeryeasy) {
          const indicator = contentVeryeasy.querySelector('.kw1c-level-indicator').outerHTML;
          contentVeryeasy.innerHTML = indicator + content.A2;
        }
        
        // Initialize Arabic content
        const contentArabic = document.getElementById('content-arabic');
        if (contentArabic && content.AR) {
          const indicator = contentArabic.querySelector('.kw1c-level-indicator').outerHTML;
          contentArabic.innerHTML = indicator + content.AR;
        }
      }
    }

    // ========================================
    // TAALNIVEAUS: MANAGE LEVELS DRAWER
    // ========================================
    function openManageLevelsDrawer() {
      const cls = SAMPLE_CLASSES[0]; // VIG-3A
      const classStudents = SAMPLE_STUDENTS.filter(s => s.class === cls.name);
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Klas: ${cls.name}</div>
          <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
            <span class="kw1c-badge" style="background: rgba(14, 165, 233, 0.15); color: var(--ec-blue);">${cls.levelDistribution.B2}√ó B2</span>
            <span class="kw1c-badge" style="background: rgba(249, 115, 22, 0.15); color: var(--ec-orange);">${cls.levelDistribution.B1}√ó B1</span>
            <span class="kw1c-badge" style="background: rgba(34, 197, 94, 0.15); color: var(--ec-green);">${cls.levelDistribution.A2}√ó A2</span>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Individuele Instellingen</div>
          ${classStudents.map(s => `
            <div class="kw1c-level-select-row">
              <div class="kw1c-drawer-avatar" style="width: 28px; height: 28px; font-size: 0.625rem;">${s.initials}</div>
              <div style="flex: 1;">
                <div style="font-size: 0.875rem; font-weight: 500;">${s.name}</div>
              </div>
              <select onchange="showToast('Taalniveau aangepast voor ${s.name}')">
                <option value="B2" ${s.level === 'B2' ? 'selected' : ''}>B2</option>
                <option value="B1" ${s.level === 'B1' ? 'selected' : ''}>B1</option>
                <option value="A2" ${s.level === 'A2' ? 'selected' : ''}>A2</option>
              </select>
            </div>
          `).join('')}
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Bulk Acties</div>
          <div class="kw1c-drawer-card">
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" style="width: 100%; margin-bottom: 0.5rem;" onclick="showToast('Hele klas naar B2 gezet');">Hele klas ‚Üí B2</button>
            <button class="kw1c-btn kw1c-btn-secondary kw1c-btn-small" style="width: 100%;" onclick="showToast('Niveaus gereset naar standaard');">Reset naar standaard</button>
          </div>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Preview: Huidige Sectie op A2</div>
          <div class="kw1c-drawer-card" style="font-size: 0.875rem; line-height: 1.6; background: rgba(34, 197, 94, 0.1); border: 1px solid var(--ec-green);">
            <p><strong>Wat is het hart?</strong></p>
            <p>Het hart is een spier. Het hart pompt bloed door je lichaam. Het hart zit in je borst.</p>
          </div>
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Annuleren</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="showToast('Wijzigingen opgeslagen'); closeDrawer();">Opslaan</button>
      `;
      
      openDrawer('Taalniveau Beheer', cls.name + ' - ' + cls.students + ' studenten', body, footer);
    }

    // ========================================
    // AI WERKOPDRACHTEN: GENERATION FLOW
    // ========================================
    
    // Render the generator output panel
    function renderGeneratorOutput(template, showSpinner = false) {
      const container = document.querySelector('.kw1c-generated');
      if (!container) return;
      
      if (showSpinner) {
        container.innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <div class="kw1c-mapping-spinner"></div>
            <p style="color: var(--text-secondary); margin-top: 1rem;">e-Xpert SAM genereert ${DemoState.selectedType}...</p>
          </div>
        `;
        return;
      }
      
      // Store current template for edit/save functionality
      DemoState.currentTemplate = { ...template };
      
      container.innerHTML = `
        <h4 style="color: var(--accent-cyan);">${template.title}</h4>
        <p style="margin: 0.75rem 0;"><strong>Leerdoel:</strong><br>${template.leerdoel}</p>
        <p style="margin: 0.75rem 0;"><strong>KD Werkproces:</strong> <span class="kw1c-badge kw1c-badge-wp">${template.wp}</span></p>
        ${template.content}
        <p style="margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem;"><strong>Tijdsduur:</strong> ${template.duration}</p>
      `;
    }
    
    // Generate new assignment
    function generateAssignment() {
      // Get selected type from UI
      const activeType = document.querySelector('.kw1c-type-btn.active');
      if (activeType) {
        if (activeType.textContent.includes('Toetsvraag')) DemoState.selectedType = 'toetsvraag';
        else if (activeType.textContent.includes('Kennischeck')) DemoState.selectedType = 'kennischeck';
        else DemoState.selectedType = 'werkopdracht';
      }
      
      // Get selected module
      const moduleSelect = document.querySelector('[data-cta-id="cta-kw1c-gen-select-module"]');
      const selectedModule = moduleSelect ? moduleSelect.value : 'klinisch-redeneren';
      const moduleData = MODULE_TEMPLATES[selectedModule];
      
      // Get question count from slider
      const slider = document.querySelector('.kw1c-slider');
      const questionCount = slider ? parseInt(slider.value) : 5;
      
      // Get selected WP (if specified)
      const wpSelect = document.querySelector('[data-cta-id="cta-kw1c-gen-select-wp"]');
      const selectedWp = wpSelect ? wpSelect.value : '';
      
      // Show spinner
      renderGeneratorOutput(null, true);
      
      // Simulate AI generation delay
      setTimeout(() => {
        let template;
        
        // Determine WP to use (selected or from module)
        const wpToUse = selectedWp || moduleData?.werkopdracht?.wp || 'WP1.1';
        const wpLabel = getWpLabel(wpToUse);
        
        // PRIORITY 1: If specific WP selected and it's a werkopdracht, use WP-specific template
        if (selectedWp && WP_TEMPLATES[selectedWp] && DemoState.selectedType === 'werkopdracht') {
          const wpTemplate = WP_TEMPLATES[selectedWp];
          template = {
            title: wpTemplate.title,
            leerdoel: wpTemplate.leerdoel,
            wp: selectedWp,
            content: wpTemplate.content,
            duration: wpTemplate.duration
          };
        }
        // PRIORITY 2: Kennischeck from module
        else if (DemoState.selectedType === 'kennischeck' && moduleData && moduleData.kennischeck) {
          // Generate kennischeck from module-specific questions
          const questions = moduleData.kennischeck.questions.slice(0, questionCount);
          const questionsHtml = questions.map((q, i) => `
            <p><strong>${i + 1}.</strong> ${q.q}</p>
            <p>‚Üí <em>${q.a}</em></p>
          `).join('');
          
          template = {
            title: moduleData.kennischeck.title,
            leerdoel: `De student kent de basisconcepten van ${moduleData.name.toLowerCase()}.`,
            wp: wpToUse,
            content: `<p><strong>Beantwoord de volgende vragen:</strong></p>${questionsHtml}`,
            duration: `${Math.max(3, questionCount)} minuten`
          };
        }
        // PRIORITY 3: Toetsvraag from module
        else if (DemoState.selectedType === 'toetsvraag' && moduleData && moduleData.toetsvraag) {
          const tv = moduleData.toetsvraag;
          const questionsHtml = tv.questions.map((q, i) => `
            <p><strong>Vraag ${i + 1}:</strong> ${q.q}</p>
            <ul>
              ${q.options.map(opt => `<li>${opt}</li>`).join('')}
            </ul>
          `).join('');
          
          template = {
            title: tv.title,
            leerdoel: `De student kan ${moduleData.name.toLowerCase()} toepassen in praktijksituaties.`,
            wp: wpToUse,
            content: `<p><strong>Casus:</strong></p>
              <p>${tv.casus}</p>
              ${questionsHtml}
              <p style="margin-top: 1rem;"><strong>Antwoorden:</strong> ${tv.questions.map((q, i) => `Vraag ${i+1}: ${q.correct}`).join('. ')}</p>`,
            duration: '10 minuten'
          };
        }
        // PRIORITY 4: Werkopdracht from module (no specific WP selected)
        else if (DemoState.selectedType === 'werkopdracht' && moduleData && moduleData.werkopdracht) {
          // Use module-specific werkopdracht with full content if available
          const wo = moduleData.werkopdracht;
          template = {
            title: wo.title,
            leerdoel: wo.leerdoel,
            wp: wpToUse,
            content: wo.fullContent || `<p><strong>Context:</strong></p>
              <p>${wo.context}</p>
              <p><strong>Opdracht:</strong></p>
              <p>Werk de volgende onderdelen uit:</p>
              <ul>
                <li>Analyseer de situatie met behulp van ${wo.keywords[0]}</li>
                <li>Pas ${wo.keywords[1] || wo.keywords[0]} toe in je aanpak</li>
                <li>Documenteer je bevindingen volgens protocol</li>
              </ul>
              <p><strong>KD Koppeling:</strong> ${wpToUse} - ${wpLabel}</p>
              <p><strong>Beoordelingscriteria:</strong></p>
              <ul>
                <li>‚úì ${wo.keywords[0]} wordt correct toegepast</li>
                <li>‚úì Systematische aanpak is zichtbaar</li>
                <li>‚úì Rapportage is volledig en professioneel</li>
              </ul>`,
            duration: wo.duration || '45 minuten'
          };
        } else {
          // Fallback - should not happen if modules are complete, but use first module's content
          const fallbackModule = MODULE_TEMPLATES['klinisch-redeneren'];
          if (DemoState.selectedType === 'kennischeck') {
            const questions = fallbackModule.kennischeck.questions.slice(0, questionCount);
            const questionsHtml = questions.map((q, i) => `
              <p><strong>${i + 1}.</strong> ${q.q}</p>
              <p>‚Üí <em>${q.a}</em></p>
            `).join('');
            template = {
              title: fallbackModule.kennischeck.title,
              leerdoel: `De student kent de basisconcepten.`,
              wp: wpToUse,
              content: `<p><strong>Beantwoord de volgende vragen:</strong></p>${questionsHtml}`,
              duration: `${Math.max(3, questionCount)} minuten`
            };
          } else {
            const wo = fallbackModule.werkopdracht;
            template = {
              title: wo.title,
              leerdoel: wo.leerdoel,
              wp: wpToUse,
              content: wo.fullContent,
              duration: wo.duration
            };
          }
        }
        
        renderGeneratorOutput(template);
        showToast(`${moduleData?.name || 'Opdracht'} gegenereerd!`);
      }, 1500);
    }
    
    // Quick generate with specific type (for Snel Genereren buttons)
    function generateQuickAssignment(quickType) {
      // Show spinner
      renderGeneratorOutput(null, true);
      
      // Get selected module for context
      const moduleSelect = document.querySelector('[data-cta-id="cta-kw1c-gen-select-module"]');
      const selectedModule = moduleSelect ? moduleSelect.value : 'klinisch-redeneren';
      const moduleData = MODULE_TEMPLATES[selectedModule];
      
      // Simulate AI generation delay
      setTimeout(() => {
        let template;
        DemoState.selectedType = quickType;
        DemoState.currentVariant = 0;
        
        // Use module-specific content based on quickType
        if (quickType === 'kennischeck' && moduleData && moduleData.kennischeck) {
          const questions = moduleData.kennischeck.questions.slice(0, 5);
          const questionsHtml = questions.map((q, i) => `
            <p><strong>${i + 1}.</strong> ${q.q}</p>
            <p>‚Üí <em>${q.a}</em></p>
          `).join('');
          
          template = {
            title: moduleData.kennischeck.title,
            leerdoel: `De student kent de basisconcepten van ${moduleData.name.toLowerCase()}.`,
            wp: moduleData.werkopdracht?.wp || 'WP1.1',
            content: `<p><strong>Beantwoord de volgende vragen:</strong></p>${questionsHtml}`,
            duration: '5 minuten'
          };
        } else if (quickType === 'reflectie') {
          // Reflectie is generic but contextualized with module name
          template = GENERATED_TEMPLATES.reflectie[0];
          template = {
            ...template,
            title: `Reflectieopdracht: ${moduleData.name}`,
            leerdoel: `De student reflecteert systematisch op een praktijksituatie met ${moduleData.name.toLowerCase()}.`
          };
        } else if (quickType === 'praktijkcasus') {
          // Use module toetsvraag as praktijkcasus if available
          if (moduleData && moduleData.toetsvraag) {
            const tv = moduleData.toetsvraag;
            const questionsHtml = tv.questions.map((q, i) => `
              <p><strong>Vraag ${i + 1}:</strong> ${q.q}</p>
              <ul>
                ${q.options.map(opt => `<li>${opt}</li>`).join('')}
              </ul>
            `).join('');
            
            template = {
              title: `Praktijkcasus: ${moduleData.name}`,
              leerdoel: `De student kan ${moduleData.name.toLowerCase()} toepassen in praktijksituaties.`,
              wp: moduleData.werkopdracht?.wp || 'WP2.3',
              content: `<p><strong>Casus:</strong></p>
                <p>${tv.casus}</p>
                ${questionsHtml}
                <p style="margin-top: 1rem;"><strong>Antwoorden:</strong> ${tv.questions.map((q, i) => `Vraag ${i+1}: ${q.correct}`).join('. ')}</p>`,
              duration: '15 minuten'
            };
          } else {
            template = GENERATED_TEMPLATES.praktijkcasus[0];
          }
        } else {
          // Fallback to generic templates
          const templates = GENERATED_TEMPLATES[quickType];
          if (!templates || templates.length === 0) {
            showToast('Template niet gevonden');
            return;
          }
          template = templates[0];
        }
        
        renderGeneratorOutput(template);
        showToast(`${moduleData?.name || 'Opdracht'} gegenereerd!`);
      }, 1000);
    }
    
    // Regenerate with next variant - just regenerates with same settings
    function regenerateAssignment() {
      // Show spinner
      renderGeneratorOutput(null, true);
      
      setTimeout(() => {
        // Re-run the generate function to get fresh content
        generateAssignment();
        showToast('Nieuwe variant gegenereerd!');
      }, 800);
    }
    
    // Edit assignment in drawer
    function editAssignment() {
      const template = DemoState.currentTemplate;
      if (!template) {
        showToast('Genereer eerst een opdracht');
        return;
      }
      
      const body = `
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Titel</div>
          <input type="text" class="kw1c-input" id="edit-title" value="${template.title}" style="margin-bottom: 1rem;">
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Leerdoel</div>
          <textarea class="kw1c-input" id="edit-leerdoel" rows="3" style="resize: vertical;">${template.leerdoel}</textarea>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">KD Werkproces</div>
          <select class="kw1c-select" id="edit-wp">
            <option value="WP1.1" ${template.wp === 'WP1.1' ? 'selected' : ''}>WP1.1 - Verzamelt gegevens</option>
            <option value="WP1.2" ${template.wp === 'WP1.2' ? 'selected' : ''}>WP1.2 - Communiceert met zorgvrager</option>
            <option value="WP2.1" ${template.wp === 'WP2.1' ? 'selected' : ''}>WP2.1 - Stelt zorgplan op</option>
            <option value="WP2.3" ${template.wp === 'WP2.3' ? 'selected' : ''}>WP2.3 - Analyseert gezondheidssituatie</option>
            <option value="WP3.1" ${template.wp === 'WP3.1' ? 'selected' : ''}>WP3.1 - Voert verpleegtechnische handelingen uit</option>
            <option value="WP3.2" ${template.wp === 'WP3.2' ? 'selected' : ''}>WP3.2 - Bereidt medicatie voor</option>
            <option value="WP4.1" ${template.wp === 'WP4.1' ? 'selected' : ''}>WP4.1 - Evalueert de zorg</option>
            <option value="WP5.2" ${template.wp === 'WP5.2' ? 'selected' : ''}>WP5.2 - Reflecteert op eigen handelen</option>
          </select>
        </div>
        
        <div class="kw1c-drawer-section">
          <div class="kw1c-drawer-section-title">Tijdsduur</div>
          <input type="text" class="kw1c-input" id="edit-duration" value="${template.duration}">
        </div>
      `;
      
      const footer = `
        <button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Annuleren</button>
        <button class="kw1c-btn kw1c-btn-primary" onclick="applyEdit()">Toepassen</button>
      `;
      
      openDrawer('Opdracht Aanpassen', template.title, body, footer);
    }
    
    // Apply edits from drawer
    function applyEdit() {
      const newTitle = document.getElementById('edit-title').value;
      const newLeerdoel = document.getElementById('edit-leerdoel').value;
      const newWp = document.getElementById('edit-wp').value;
      const newDuration = document.getElementById('edit-duration').value;
      
      // Update the current template in state
      DemoState.currentTemplate.title = newTitle;
      DemoState.currentTemplate.leerdoel = newLeerdoel;
      DemoState.currentTemplate.wp = newWp;
      DemoState.currentTemplate.duration = newDuration;
      
      // Re-render
      renderGeneratorOutput(DemoState.currentTemplate);
      closeDrawer();
      showToast('Aanpassingen toegepast!');
    }
    
    // Save assignment
    function saveAssignment() {
      const template = DemoState.currentTemplate;
      if (!template) {
        showToast('Genereer eerst een opdracht');
        return;
      }
      
      // Add to saved artifacts
      DemoState.savedArtifacts.push({
        ...template,
        type: DemoState.selectedType,
        savedAt: new Date().toISOString()
      });
      
      // Update dashboard counter
      updateDashboardCounters();
      
      // Show confirmation in output panel
      const container = document.querySelector('.kw1c-generated');
      container.innerHTML = `
        <div style="text-align: center; padding: 2rem;">
          <div style="font-size: 3rem; margin-bottom: 1rem;">‚úÖ</div>
          <h4 style="color: var(--kd-covered); margin-bottom: 0.5rem;">Opdracht Opgeslagen!</h4>
          <p style="color: var(--text-secondary);">"${template.title}" is toegevoegd aan je materialen.</p>
          <p style="color: var(--text-muted); font-size: 0.875rem; margin-top: 1rem;">
            Totaal opgeslagen: ${DemoState.savedArtifacts.length} opdrachten
          </p>
          <button class="kw1c-btn kw1c-btn-secondary" style="margin-top: 1rem;" onclick="generateAssignment()">
            + Nieuwe opdracht genereren
          </button>
        </div>
      `;
      
      showToast('Opdracht opgeslagen!');
    }
    
    // Update dashboard counters
    function updateDashboardCounters() {
      const counter = document.querySelector('[data-field="active_assignments"]');
      if (counter) {
        const currentVal = parseInt(counter.textContent) || 12;
        counter.textContent = currentVal + 1;
      }
    }
    
    // Legacy function for backward compatibility
    function updateGeneratedContent(type) {
      const typeMap = {
        'toets': 'toetsvraag',
        'kennis': 'kennischeck',
        'werkopdracht': 'werkopdracht',
        'reflectie': 'werkopdracht',
        'casus': 'werkopdracht'
      };
      DemoState.selectedType = typeMap[type] || 'werkopdracht';
      generateAssignment();
    }

    // ========================================
    // CHAT: Enhanced functionality
    // ========================================
    function addChatMessage(text, isUser = false, citations = []) {
      const chatContainer = document.querySelector('.kw1c-chat-messages');
      const msgDiv = document.createElement('div');
      msgDiv.className = `kw1c-chat-message ${isUser ? 'user' : 'ai'}`;
      
      let citationsHtml = '';
      if (!isUser && citations.length > 0) {
        citationsHtml = citations.map((c, i) => 
          `<div class="kw1c-chat-citation" onclick="showToast('Bron: ${c}')">üìö ${c}</div>`
        ).join('');
      }
      
      msgDiv.innerHTML = `
        <div class="kw1c-chat-avatar">${isUser ? 'MV' : 'ü§ñ'}</div>
        <div class="kw1c-chat-bubble">
          ${text}
          ${citationsHtml}
        </div>
      `;
      chatContainer.appendChild(msgDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    // Show typing indicator
    function showTypingIndicator() {
      const chatContainer = document.querySelector('.kw1c-chat-messages');
      const typingDiv = document.createElement('div');
      typingDiv.className = 'kw1c-chat-message ai';
      typingDiv.id = 'typing-indicator';
      typingDiv.innerHTML = `
        <div class="kw1c-chat-avatar">ü§ñ</div>
        <div class="kw1c-chat-bubble" style="display: flex; gap: 0.25rem; padding: 1rem;">
          <span style="animation: pulse 1s infinite;">‚óè</span>
          <span style="animation: pulse 1s infinite 0.2s;">‚óè</span>
          <span style="animation: pulse 1s infinite 0.4s;">‚óè</span>
        </div>
      `;
      chatContainer.appendChild(typingDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    // Remove typing indicator
    function hideTypingIndicator() {
      const indicator = document.getElementById('typing-indicator');
      if (indicator) indicator.remove();
    }
    
    // Find best matching response
    function findChatResponse(question, scope) {
      const lowerQ = question.toLowerCase();
      for (const response of CHAT_RESPONSES) {
        if (response.keywords.some(kw => lowerQ.includes(kw))) {
          // Get scope-specific citations if available
          const citations = response.citations[scope] || response.citations.all || response.citations;
          return { text: response.text, citations };
        }
      }
      // Default response if no match - scope-specific
      const defaultCitations = {
        all: ['ExpertCollege Kennisbank', 'KD 2026 Documentatie'],
        materials: ['Jouw ge√ºploade materialen', 'Jouw lesplannen'],
        expertcollege: ['ExpertCollege Kennisbank', 'ExpertCollege Artikelen']
      };
      return {
        text: `<p>Interessante vraag over "${question}". Op basis van ${scope === 'materials' ? 'je eigen materialen' : scope === 'expertcollege' ? 'de ExpertCollege kennisbank' : 'alle beschikbare bronnen'} kan ik je het volgende adviseren:</p>
          <p>Voor specifiekere informatie kun je de zoekfunctie gebruiken of een van de snelle vragen proberen.</p>`,
        citations: defaultCitations[scope] || defaultCitations.all
      };
    }
    
    // Send chat message with AI response
    function sendChatMessage() {
      const input = document.querySelector('.kw1c-chat-input');
      const question = input.value.trim();
      if (!question) return;
      
      // Get selected scope
      const scopeSelect = document.querySelector('[data-cta-id="cta-kw1c-chat-scope-select"]');
      const scope = scopeSelect ? scopeSelect.value : 'all';
      
      // Add user message
      addChatMessage(question, true);
      input.value = '';
      
      // Show typing indicator
      showTypingIndicator();
      
      // Find and show response after delay
      setTimeout(() => {
        hideTypingIndicator();
        const response = findChatResponse(question, scope);
        addChatMessage(response.text, false, response.citations);
      }, 1500);
    }

    // ========================================
    // EVENT BINDINGS
    // ========================================
    document.addEventListener('DOMContentLoaded', () => {
      // Dashboard: Class cards clickable
      document.querySelectorAll('.kw1c-class-card').forEach((card, i) => {
        card.style.cursor = 'pointer';
        card.onclick = () => openClassDrawer(SAMPLE_CLASSES[i].id);
      });
      
      // Dashboard: View all classes
      document.querySelector('[data-cta-id="cta-kw1c-dash-view-all-classes"]')?.addEventListener('click', () => {
        openAllClassesDrawer();
      });
      
      // Dashboard: Student buttons
      document.querySelectorAll('[data-cta-id^="cta-kw1c-dash-view-student-"]').forEach(btn => {
        btn.onclick = (e) => {
          e.stopPropagation();
          const idx = btn.dataset.ctaId.split('-').pop();
          openStudentDrawer('s' + idx);
        };
      });
      
      // KD Mapping: File upload simulation
      document.querySelector('[data-cta-id="cta-kw1c-kd-upload-lesplan"]')?.addEventListener('click', () => {
        simulateFileUpload();
      });
      
      // KD Mapping: Opleiding selection
      document.querySelector('[data-cta-id="cta-kw1c-kd-select-document"]')?.addEventListener('change', (e) => {
        updateKDTable(e.target.value);
      });
      
      // KD Mapping: Start mapping
      document.querySelector('[data-cta-id="cta-kw1c-kd-start-mapping"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        startKDMapping();
      });
      
      // KD Mapping: Export CSV
      document.querySelector('[data-cta-id="cta-kw1c-kd-export-csv"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        exportMappingCSV();
      });
      
      // KD Mapping: Gap buttons
      document.querySelectorAll('[data-cta-id^="cta-kw1c-kd-view-gap-"]').forEach(btn => {
        btn.onclick = (e) => {
          e.stopPropagation();
          const idx = parseInt(btn.dataset.ctaId.split('-').pop());
          openGapDrawer(idx);
        };
      });
      
      // Taalniveaus: Initialize content
      initTaalContent();
      
      // Taalniveaus: Navigation
      document.querySelector('[data-cta-id="cta-kw1c-taal-prev-section"]')?.addEventListener('click', () => navigateTaalSection(-1));
      document.querySelector('[data-cta-id="cta-kw1c-taal-next-section"]')?.addEventListener('click', () => navigateTaalSection(1));
      
      // Taalniveaus: Manage levels
      document.querySelector('[data-cta-id="cta-kw1c-taal-manage-levels"]')?.addEventListener('click', openManageLevelsDrawer);
      
      // Type buttons - update state but don't generate yet
      document.querySelectorAll('.kw1c-type-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.kw1c-type-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          if (this.textContent.includes('Toetsvraag')) DemoState.selectedType = 'toetsvraag';
          else if (this.textContent.includes('Kennischeck')) DemoState.selectedType = 'kennischeck';
          else DemoState.selectedType = 'werkopdracht';
        });
      });
      
      // AI Werkopdrachten: Generate button
      document.querySelector('[data-cta-id="cta-kw1c-gen-generate"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        generateAssignment();
      });
      
      // AI Werkopdrachten: Regenerate button
      document.querySelector('[data-cta-id="cta-kw1c-gen-regenerate"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        regenerateAssignment();
      });
      
      // AI Werkopdrachten: Edit button
      document.querySelector('[data-cta-id="cta-kw1c-gen-edit"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        editAssignment();
      });
      
      // AI Werkopdrachten: Save button
      document.querySelector('[data-cta-id="cta-kw1c-gen-save"]')?.addEventListener('click', (e) => {
        e.preventDefault();
        saveAssignment();
      });
      
      // Quick generate buttons - each uses dedicated template type
      document.querySelector('[data-cta-id="cta-kw1c-gen-quick-kennischeck"]')?.addEventListener('click', () => {
        generateQuickAssignment('kennischeck');
      });
      document.querySelector('[data-cta-id="cta-kw1c-gen-quick-reflectie"]')?.addEventListener('click', () => {
        generateQuickAssignment('reflectie');
      });
      document.querySelector('[data-cta-id="cta-kw1c-gen-quick-casus"]')?.addEventListener('click', () => {
        generateQuickAssignment('praktijkcasus');
      });
      
      // Chat quick questions
      document.querySelectorAll('[data-cta-id^="cta-kw1c-chat-quick-"]').forEach(btn => {
        btn.addEventListener('click', function() {
          const question = this.textContent.trim().substring(2);
          const input = document.querySelector('.kw1c-chat-input');
          input.value = question;
          sendChatMessage();
        });
      });
      
      // Chat send button
      document.querySelector('[data-cta-id="cta-kw1c-chat-send"]')?.addEventListener('click', sendChatMessage);
      
      // Chat enter key
      document.querySelector('.kw1c-chat-input')?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendChatMessage();
      });
      
      // Citations
      document.querySelectorAll('[data-cta-id^="cta-kw1c-chat-citation-"]').forEach(btn => {
        btn.onclick = () => {
          openDrawer('Bron Preview', btn.textContent.trim().substring(3), `
            <div class="kw1c-drawer-card">
              <h4 style="margin-bottom: 0.75rem;">${btn.textContent.trim().substring(3)}</h4>
              <p style="font-size: 0.875rem; line-height: 1.6; color: var(--text-secondary);">
                Dit hoofdstuk behandelt de basisprincipes van klinisch redeneren in de zorgpraktijk. 
                De nadruk ligt op het systematisch verzamelen van gegevens, het analyseren van de gezondheidssituatie, 
                en het formuleren van verpleegkundige diagnoses.
              </p>
              <div style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-card); border-radius: 6px; font-size: 0.75rem; color: var(--text-muted);">
                Laatste update: januari 2026<br>
                Niveau: MBO-4
              </div>
            </div>
          `, '<button class="kw1c-btn kw1c-btn-secondary" onclick="closeDrawer()">Sluiten</button><button class="kw1c-btn kw1c-btn-primary" onclick="showToast(\'Bron geopend in nieuw venster\'); closeDrawer();">Open Volledig</button>');
        };
      });
    });
  </script>
</body>
</html>
